

var Profiles;
(function (Profiles) {
    function createProfilesSubNavBars(namespace, projectId) {
        return Developer.activateCurrent([
            {
                href: UrlHelpers.join(HawtioCore.documentBase(), '/workspaces', namespace, 'projects', projectId, 'profiles'),
                label: 'Profiles',
                title: 'Profiles'
            },
            {
                href: UrlHelpers.join(HawtioCore.documentBase(), '/workspaces', namespace, 'projects', projectId, 'profiles', 'containers'),
                label: 'Containers',
                title: 'Containers',
                isActive: function (item, path) { return _.startsWith(path, item.href); }
            },
            {
                href: UrlHelpers.join(HawtioCore.documentBase(), '/workspaces', namespace, 'projects', projectId, 'profiles', 'settings'),
                label: 'Settings',
                title: 'Settings'
            }
        ]);
    }
    Profiles.createProfilesSubNavBars = createProfilesSubNavBars;
})(Profiles || (Profiles = {}));

var Profiles;
(function (Profiles) {
    Profiles.pluginName = 'profiles';
    Profiles.log = Logger.get(Profiles.pluginName);
    Profiles.templatePath = 'plugins/' + Profiles.pluginName + '/html/';
    Profiles.module = angular.module(Profiles.pluginName, ['hawtio-core', 'hawtio-ui', 'hawtio-forms', 'blockUI', 'ui.select', 'ngSanitize']);
    Profiles.module.config(['$routeProvider', 'blockUIConfig', function ($routeProvider, blockUIConfig) {
            blockUIConfig.autoBlock = false;
            blockUIConfig.delay = 0;
            var join = UrlHelpers.join;
            var route = Developer.createTabRoutingFunction(Profiles.templatePath);
            var base = '/workspaces/:namespace/projects/:projectId/profiles';
            Developer.customProjectSubTabFactories.push(function (context) {
                if (context.$scope) {
                    Forge.updateForgeProject(context.$scope);
                }
                return [{
                        isValid: function () { return context.projectLink && Developer.forgeReadyLink() && Forge.forgeProject().hasPerspective('fabric8-profiles'); },
                        href: join(context.projectLink, 'profiles'),
                        class: 'fa fa-code-fork',
                        label: 'Profiles',
                        title: 'Browse the profiles of this project',
                        isActive: function (subTab, path) { return _.startsWith(path, join(context.projectLink, 'profiles')); }
                    }];
            });
            $routeProvider
                .when(base, route('profiles.html', false))
                .when(join(base, 'containers', 'assignProfiles'), route('assignProfiles.html', false))
                .when(join(base, 'containers', 'deployProfiles'), route('deployProfiles.html', false))
                .when(join(base, 'containers'), route('containers.html', false))
                .when(join(base, 'settings'), route('settings.html', false));
        }]);
    Profiles.module.directive('templateCacheInclude', ['$compile', '$templateCache', function ($compile, $templateCache) { return ({
            restrict: 'A',
            priority: 400,
            compile: function (element, attrs) {
                var templateName = attrs.templateCacheInclude;
                var template = $templateCache.get(templateName);
                return function (scope, element) {
                    element.html(template);
                    $compile(element.contents())(scope);
                };
            }
        }); }
    ]);
    hawtioPluginLoader.addModule(Profiles.pluginName);
})(Profiles || (Profiles = {}));

var Profiles;
(function (Profiles) {
    Profiles.module.controller('Profiles.AssignProfilesController', ['$scope', '$location', '$templateCache', 'profiles', 'containers', 'blockUI', 'jsyaml', function ($scope, $location, $templateCache, profiles, containers, blockUI, yaml) {
            $scope.tabs = Profiles.createProfilesSubNavBars($scope.namespace, $scope.projectId);
            Forge.updateForgeProject($scope);
            $scope.gitRestUrl = function (path) { return Wiki.gitRestURL($scope, path); };
            $scope.profiles = profiles;
            $scope.containers = containers;
            $scope.selectable = true;
            $scope.profileGroups = function (profile) { return profile.tags.length > 0 ? profile.tags[0] : ''; };
            var saving = 0;
            $scope.saving = function () { return saving > 0; };
            var blockTable = blockUI.instances.get('blockTable');
            $scope.assignProfiles = function () {
                var wiki = new Wiki.GitWikiRepository($scope);
                var success = function (response) {
                    Wiki.onComplete(response);
                    Core.notification('success', response.file + ' saved!');
                    complete();
                };
                var failure = function (response) {
                    Core.notification('error', response);
                    complete();
                };
                var complete = function () {
                    if (--saving === 0) {
                        blockTable.message('Refreshing ...');
                        containers.load(wiki, $scope.branch).then(function () {
                            blockTable.stop();
                            $location.path(UrlHelpers.join('/workspaces', $scope.namespace, 'projects', $scope.projectId, 'profiles', 'containers'));
                        });
                    }
                };
                blockTable.start("Saving ...");
                containers.cart.forEach(function (container) {
                    saving++;
                    wiki.putPage($scope.branch, container.path, assignProfiles(container, profiles.cart), 'Assign profiles', success, failure);
                });
            };
            var assignProfiles = function (container, profiles) { return yaml.safeDump({
                container: {
                    profiles: profiles.map(function (profile) { return profile.id; }).join(' '),
                    'container-type': container.types.join(' ')
                }
            }); };
            $scope.refreshContainers = function () { return containers.load(new Wiki.GitWikiRepository($scope), $scope.branch); };
            $scope.refreshProfiles = function () {
                if (!profiles.loading) {
                    profiles.load(new Wiki.GitWikiRepository($scope), $scope.branch);
                }
            };
            if (!(containers.loaded || containers.loading)) {
                $scope.refreshContainers();
            }
        }]);
})(Profiles || (Profiles = {}));

var Profiles;
(function (Profiles) {
    Profiles.module.controller('Profiles.ContainerListController', ['$scope', '$location', '$templateCache', 'profiles', 'containers', 'KubernetesModel',
        function ($scope, $location, $templateCache, profiles, containers, kubernetes) {
            $scope.viewProfile = function (profile) { return $location.path(Wiki.viewLink($scope.projectId, $scope.branch, profile.path, $location)); };
            $scope.profiles = profiles;
            $scope.containers = containers;
            $scope.tableConfig = {
                data: 'containers.data',
                showSelectionCheckbox: $scope.selectable || false,
                enableRowClickSelection: $scope.selectable || false,
                multiSelect: true,
                selectedItems: $scope.selectable ? containers.cart : [],
                filterOptions: {
                    filterText: $location.search()['q'] || ''
                },
                columnDefs: [
                    { field: 'name',
                        displayName: 'Name',
                        cellTemplate: $templateCache.get('containerName.html')
                    },
                    { field: 'pods',
                        displayName: 'Pods',
                        cellTemplate: $templateCache.get('containerPods.html')
                    },
                    { field: 'types',
                        displayName: 'Types',
                        cellTemplate: $templateCache.get('containerTypes.html')
                    },
                    { field: 'profiles',
                        displayName: 'Profiles',
                        cellTemplate: $templateCache.get('containerProfiles.html')
                    }
                ]
            };
            $scope.$watchCollection('profiles.data', function (profiles) {
                return containers.data.forEach(function (container) {
                    return profiles.forEach(function (profile) {
                        var i = _.indexOf(container.profiles, profile.id);
                        if (i >= 0) {
                            container.profiles[i] = profile;
                        }
                    });
                });
            });
            $scope.$watch('containers.cart', function (containers) {
                $scope.tableConfig.selectedItems = containers;
                $scope.$broadcast('hawtio.datatable.containers.data');
            });
            $scope.$on('kubernetesModelUpdated', function () {
                return _.filter(containers.data, function (container) { return !container.deployment; })
                    .forEach(function (container) {
                    container.deployment = kubernetes.getDeployment($scope.namespace || Kubernetes.currentKubernetesNamespace(), container.name);
                    container.icons.push({
                        type: 'img',
                        src: container.deployment.$iconUrl
                    });
                });
            });
            if (!(containers.loaded || containers.loading)) {
                $scope.refresh();
            }
        }]);
    Profiles.module.filter('kubernetesPageLink', function () { return function (entity, path1, path2) { return UrlHelpers.join(Kubernetes.entityPageLink(entity), path1, path2); }; });
})(Profiles || (Profiles = {}));

var Profiles;
(function (Profiles) {
    var icons = {
        camel: 'camel',
        jenkinsfile: 'jenkins',
        karaf: 'karaf'
    };
    var Containers = (function () {
        function Containers(profiles, kubernetes, $q, yaml) {
            var _this = this;
            this.loaded = false;
            this.loading = false;
            this.requests = 0;
            this.data = [];
            this.cart = [];
            this.load = function (wiki, branch, namespace) {
                _this.loading = true;
                _this.requests++;
                var data = [];
                var deferred = _this.$q.defer();
                wiki.getPage(branch, 'configs/containers', null, function (page) {
                    _.forEach(page.children, function (child) {
                        if (!child.directory && _.endsWith(child.name, '.yaml')) {
                            _this.requests++;
                            wiki.getPage(branch, child.path, null, function (page) {
                                var properties = _this.yaml.safeLoad(page.text);
                                var name = page.name.replace(/.yaml/, '');
                                var container = {
                                    name: name,
                                    path: page.path,
                                    deployment: _this.kubernetes.getDeployment(namespace || Kubernetes.currentKubernetesNamespace(), name),
                                    profiles: _.map(properties.container.profiles.split(' '), function (profile) { return _.find(_this.profiles.data, { id: profile }) || profile; }),
                                    types: properties.container['container-type'].split(' '),
                                    icons: properties.container['container-type'].split(' ').map(function (type) { return {
                                        title: type,
                                        type: 'img',
                                        src: 'img/icons/' + (type.toLowerCase() in icons ? icons[type.toLowerCase()] : 'java') + '.svg'
                                    }; })
                                };
                                if (container.deployment) {
                                    container.icons.push({
                                        type: 'img',
                                        src: container.deployment.$iconUrl
                                    });
                                }
                                data.push(container);
                                _this.complete(data);
                            });
                        }
                    });
                    _this.complete(data);
                    deferred.resolve();
                });
                return deferred.promise;
            };
            this.complete = function (data) {
                if (--_this.requests === 0) {
                    _this.data.length = 0;
                    (_a = _this.data).push.apply(_a, data);
                    _this.loading = false;
                    _this.loaded = true;
                }
                var _a;
            };
            this.profiles = profiles;
            this.kubernetes = kubernetes;
            this.$q = $q;
            this.yaml = yaml;
        }
        return Containers;
    }());
    Profiles.Containers = Containers;
    Profiles.module.service('containers', ['profiles', 'KubernetesModel', '$q', 'jsyaml', Containers]);
    Profiles.module.controller('Profiles.ContainersController', ['$scope', '$location', 'containers', 'blockUI',
        function ($scope, $location, containers, blockUI) {
            $scope.tabs = Profiles.createProfilesSubNavBars($scope.namespace, $scope.projectId);
            Forge.updateForgeProject($scope);
            $scope.containers = containers;
            $scope.selectable = true;
            var saving = 0;
            $scope.saving = function () { return saving > 0; };
            var blockTable = blockUI.instances.get('blockTable');
            $scope.createContainers = function () { return $location.path(UrlHelpers.join('/workspaces', $scope.namespace, 'projects', $scope.projectId, 'profiles', 'containers', 'deployProfiles')); };
            $scope.assignProfiles = function () { return $location.path(UrlHelpers.join('/workspaces', $scope.namespace, 'projects', $scope.projectId, 'profiles', 'containers', 'assignProfiles')); };
            $scope.deleteContainers = function () {
                var wiki = new Wiki.GitWikiRepository($scope);
                var success = function (response, container) {
                    Wiki.onComplete(response);
                    Core.notification('success', container + ' deleted!');
                    complete();
                };
                var failure = function (response) {
                    Core.notification('error', response);
                    complete();
                };
                var complete = function () {
                    if (--saving === 0) {
                        blockTable.message('Refreshing ...');
                        containers.load(wiki, $scope.branch).then(function () {
                            blockTable.stop();
                            $location.path(UrlHelpers.join('/workspaces', $scope.namespace, 'projects', $scope.projectId, 'profiles', 'containers'));
                        });
                    }
                };
                blockTable.start("Saving ...");
                containers.cart.forEach(function (container) {
                    saving++;
                    wiki.removePage($scope.branch, container.path, 'Delete container', function (response) { return success(response, container.name); });
                });
            };
            $scope.refresh = function () { return containers.load(new Wiki.GitWikiRepository($scope), $scope.branch, $scope.namespace); };
        }]);
})(Profiles || (Profiles = {}));

var Profiles;
(function (Profiles) {
    Profiles.module.controller('Profiles.DeployProfilesController', ['$scope', '$location', '$templateCache', 'profiles', 'containers', 'blockUI', 'jsyaml', function ($scope, $location, $templateCache, profiles, containers, blockUI, yaml) {
            $scope.tabs = Profiles.createProfilesSubNavBars($scope.namespace, $scope.projectId);
            Forge.updateForgeProject($scope);
            $scope.gitRestUrl = function (path) { return Wiki.gitRestURL($scope, path); };
            $scope.profiles = profiles;
            $scope.containers = containers;
            $scope.select = {
                names: []
            };
            $scope.selectable = false;
            $scope.profileGroups = function (profile) { return profile.tags.length > 0 ? profile.tags[0] : ''; };
            var saving = 0;
            $scope.saving = function () { return saving > 0; };
            var blockTable = blockUI.instances.get('blockTable');
            $scope.deployProfiles = function () {
                var wiki = new Wiki.GitWikiRepository($scope);
                var success = function (response) {
                    Wiki.onComplete(response);
                    Core.notification('success', response.file + ' saved!');
                    complete();
                };
                var failure = function (response) {
                    Core.notification('error', response);
                    complete();
                };
                var complete = function () {
                    if (--saving === 0) {
                        blockTable.message('Refreshing ...');
                        containers.load(wiki, $scope.branch).then(function () {
                            blockTable.stop();
                            $location.path(UrlHelpers.join('/workspaces', $scope.namespace, 'projects', $scope.projectId, 'profiles', 'containers'));
                        });
                    }
                };
                blockTable.start("Saving ...");
                saving++;
                $scope.select.names.forEach(function (name) {
                    return wiki.putPage($scope.branch, 'configs/containers/' + name + '.yaml', deployProfiles(name, profiles.cart), 'Deploy profiles into ' + name, success, failure);
                });
            };
            var deployProfiles = function (container, profiles) { return yaml.safeDump({
                container: {
                    profiles: profiles.map(function (profile) { return profile.id; }).join(' '),
                    'container-type': 'karaf jenkinsfile'
                }
            }); };
            $scope.existingContainers = function (names) { return _.intersection(names, _.pluck(containers.data, 'name')); };
            $scope.refreshContainers = function () { return containers.load(new Wiki.GitWikiRepository($scope), $scope.branch); };
            $scope.refreshProfiles = function () {
                if (!profiles.loading) {
                    profiles.load(new Wiki.GitWikiRepository($scope), $scope.branch);
                }
            };
            if (!(containers.loaded || containers.loading)) {
                $scope.refreshContainers();
            }
        }]);
})(Profiles || (Profiles = {}));

var Profiles;
(function (Profiles_1) {
    var Profiles = (function () {
        function Profiles() {
            var _this = this;
            this.loaded = false;
            this.loading = false;
            this.data = [];
            this.cart = [];
            this.requests = 0;
            this.load = function (wiki, branch, path) {
                if (path === void 0) { path = 'profiles'; }
                _this.loading = true;
                _this.data.length = 0;
                _this.requests = 0;
                _this.findProfiles(wiki, branch, path);
            };
            this.findProfiles = function (wiki, branch, path) {
                _this.requests++;
                wiki.getPage(branch, path, null, function (data) {
                    if (data.children) {
                        _.forEach(data.children, function (value) {
                            if (value.directory && _.endsWith(value.name, '.profile')) {
                                _this.loadProfile(wiki, branch, value);
                            }
                            else if (value.directory) {
                                _this.findProfiles(wiki, branch, value.path);
                            }
                        });
                    }
                    _this.complete();
                });
            };
            this.loadProfile = function (wiki, branch, value) {
                var info = /^profiles\/((?:.+)\/)*(.+).profile$/.exec(value.path);
                var profile = {
                    id: (info[1] ? info[1].replace(/\//g, '-') : '') + info[2],
                    name: info[2],
                    path: value.path,
                    tags: info[1] ? info[1].slice(0, -1).split('/') : []
                };
                _this.requests++;
                wiki.getPage(branch, value.path, null, function (data) {
                    for (var _i = 0, _a = data.children; _i < _a.length; _i++) {
                        var child = _a[_i];
                        var name_1 = child.name.toUpperCase();
                        if (name_1 == 'README.MD' || name_1 == 'SUMMARY.MD') {
                            profile.summaryUrl = child.path;
                        }
                        else if (name_1 == 'ICON.SVG') {
                            profile.iconUrl = child.path;
                        }
                    }
                    _this.data.splice(_.sortedIndex(_this.data, profile, 'id'), 0, profile);
                    var i = _.findIndex(_this.cart, { id: profile.id });
                    if (i >= 0) {
                        _this.cart[i] = profile;
                    }
                    _this.complete();
                });
            };
            this.complete = function () {
                if (--_this.requests === 0) {
                    SelectionHelpers.syncGroupSelection(_this.cart, _this.data, 'id');
                    _this.loading = false;
                    _this.loaded = true;
                }
            };
        }
        return Profiles;
    }());
    Profiles_1.Profiles = Profiles;
    var ProfileView = (function () {
        function ProfileView(scope) {
            this.scope = scope;
        }
        Object.defineProperty(ProfileView.prototype, "openOrSingle", {
            get: function () {
                var scope = this.scope;
                if (scope.filteredProfiles.length === 1) {
                    if (!this.force && (!scope.loading() || scope.profiles.length > 1)) {
                        return true;
                    }
                }
                else {
                    this.force = false;
                }
                return this.open;
            },
            set: function (open) {
                if (this.scope.filteredProfiles.length === 1) {
                    this.force = true;
                }
                this.open = open;
            },
            enumerable: true,
            configurable: true
        });
        return ProfileView;
    }());
    var ProfileViews = (function () {
        function ProfileViews() {
            this.selectedTags = [];
            this.profileViews = {};
        }
        return ProfileViews;
    }());
    Profiles_1.module.service('profiles', Profiles);
    Profiles_1.module.service('profileViews', ProfileViews);
    Profiles_1.module.constant('jsyaml', jsyaml);
    Profiles_1.module.filter('filterCollection', function () { return function (collection, text) {
        return Core.isBlank(text)
            ? collection
            : _.filter(collection, function (item) { return FilterHelpers.searchObject(item, text); });
    }; });
    Profiles_1.module.controller('Profiles.ProfilesController', ['$scope', '$location', 'marked', '$sce', 'profiles', 'profileViews',
        function ($scope, $location, marked, $sce, profiles, profileViews) {
            $scope.tabs = Profiles_1.createProfilesSubNavBars($scope.namespace, $scope.projectId);
            Forge.updateForgeProject($scope);
            $scope.gitRestUrl = function (path) { return Wiki.gitRestURL($scope, path); };
            $scope.profiles = profiles.data;
            $scope.selection = profiles.cart;
            $scope.selectedTags = profileViews.selectedTags;
            $scope.profileViews = profileViews.profileViews;
            SelectionHelpers.decorate($scope);
            $scope.isBlank = Core.isBlank;
            $scope.loading = function () { return profiles.loading; };
            $scope.wikiLink = function (path) { return Wiki.viewLink($scope.projectId, $scope.branch, path, $location); };
            var wiki = new Wiki.GitWikiRepository($scope);
            $scope.loadSummary = function (profile) {
                if (profile.summaryUrl) {
                    var renderer_1 = new marked.Renderer();
                    renderer_1.image = function (href, title, text) {
                        var uri = new URI(href);
                        if (uri.is('relative')) {
                            if (_.startsWith(uri.path(), '/')) {
                                uri.segment(['profiles'].concat(uri.segment()));
                            }
                            else {
                                uri = uri.absoluteTo(UrlHelpers.join(profile.path, '/'));
                            }
                            var src = Wiki.gitRestURL($scope, uri.normalize().toString());
                            return '<img src="img/loader.svg" http-src="' + src + '" alt="' + (title ? title : text) + '" />';
                        }
                        else {
                            return '<img src="' + href + '" alt="' + (title ? title : text) + '" />';
                        }
                    };
                    wiki.getPage($scope.branch, profile.summaryUrl, null, function (data) { return profile.summary = marked(data.text, { renderer: renderer_1 }); });
                }
                else {
                    profile.summary = '<em>no summary</em>';
                }
            };
            $scope.assignProfiles = function () { return $location.path(UrlHelpers.join('/workspaces', $scope.namespace, 'projects', $scope.projectId, 'profiles', 'containers', 'assignProfiles')); };
            $scope.deployProfiles = function () { return $location.path(UrlHelpers.join('/workspaces', $scope.namespace, 'projects', $scope.projectId, 'profiles', 'containers', 'deployProfiles')); };
            var updateProfileViews = function (profiles) { return _.reduce(profiles, function (profileViews, profile) {
                if (!_.has(profileViews, profile.id)) {
                    profileViews[profile.id] = new ProfileView($scope);
                }
                else {
                    profileViews[profile.id].scope = $scope;
                }
                return profileViews;
            }, $scope.profileViews); };
            _.keys($scope.profileViews).forEach(function (key) { return delete $scope.profileViews[key]; });
            $scope.$watchCollection('profiles', updateProfileViews);
            $scope.refresh = function () { return profiles.load(wiki, $scope.branch); };
            if (!(profiles.loaded || profiles.loading)) {
                $scope.refresh();
            }
        }]);
})(Profiles || (Profiles = {}));

var Profiles;
(function (Profiles) {
    Profiles.module.controller('Profiles.SettingsController', ['$scope', 'jsyaml', function ($scope, yaml) {
            $scope.tabs = Profiles.createProfilesSubNavBars($scope.namespace, $scope.projectId);
            Forge.updateForgeProject($scope);
            var wikiRepository = new Wiki.GitWikiRepository($scope);
            $scope.loading = 0;
            $scope.config = {
                style: HawtioForms.FormStyle.STANDARD,
                mode: HawtioForms.FormMode.VIEW,
                properties: {
                    'git.gitRemoteUriPattern': {
                        type: 'string',
                        description: 'Git remote URI pattern for all containers, name is the name of the container, e.g. root'
                    },
                    'git.gogsUsername': {
                        type: 'string'
                    },
                    'git.gogsPassword': {
                        type: 'password'
                    },
                    'maven.groupId': {
                        type: 'string'
                    },
                    'maven.version': {
                        type: 'string'
                    }
                }
            };
            $scope.refresh = function () {
                $scope.loading++;
                wikiRepository.getPage($scope.branch, 'fabric8-profiles.yaml', null, function (data) {
                    $scope.loading--;
                    $scope.settings = data.text;
                    $scope.properties = yaml.safeLoad(data.text);
                });
            };
            $scope.$watch('loading', function (value) { return $scope.config.mode = value > 0
                ? HawtioForms.FormMode.VIEW
                : HawtioForms.FormMode.EDIT; });
            $scope.save = function () {
                var edit = yaml.safeDump($scope.properties);
                if (edit != $scope.settings) {
                    $scope.loading++;
                    wikiRepository.putPage($scope.branch, 'fabric8-profiles.yaml', edit, 'Update profiles settings', function (response) {
                        Wiki.onComplete(response);
                        Core.notification('success', response.file + ' saved!');
                        $scope.loading--;
                    }, function (response) {
                        Core.notification('error', response);
                        $scope.loading--;
                    });
                }
            };
            $scope.refresh();
        }
    ]);
})(Profiles || (Profiles = {}));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluY2x1ZGVzLmpzIiwicHJvZmlsZXMvdHMvcHJvZmlsZXNIZWxwZXJzLnRzIiwicHJvZmlsZXMvdHMvcHJvZmlsZXNQbHVnaW4udHMiLCJwcm9maWxlcy90cy9hc3NpZ25Qcm9maWxlcy50cyIsInByb2ZpbGVzL3RzL2NvbnRhaW5lckxpc3QudHMiLCJwcm9maWxlcy90cy9jb250YWluZXJzLnRzIiwicHJvZmlsZXMvdHMvZGVwbG95UHJvZmlsZXMudHMiLCJwcm9maWxlcy90cy9wcm9maWxlcy50cyIsInByb2ZpbGVzL3RzL3NldHRpbmdzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUNJQSxJQUFPLFFBQVEsQ0FzQmQ7QUF0QkQsV0FBTyxRQUFRLEVBQUMsQ0FBQztJQUVmLGtDQUF5QyxTQUFnQixFQUFFLFNBQWdCO1FBQ3pFLE1BQU0sQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDO1lBQy9CO2dCQUNFLElBQUksRUFBRSxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxZQUFZLEVBQUUsRUFBRSxhQUFhLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsVUFBVSxDQUFDO2dCQUM3RyxLQUFLLEVBQUUsVUFBVTtnQkFDakIsS0FBSyxFQUFFLFVBQVU7YUFDbEI7WUFDRDtnQkFDRSxJQUFJLEVBQUUsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBWSxFQUFFLEVBQUUsYUFBYSxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxZQUFZLENBQUM7Z0JBQzNILEtBQUssRUFBRSxZQUFZO2dCQUNuQixLQUFLLEVBQUUsWUFBWTtnQkFDbkIsUUFBUSxFQUFFLFVBQUMsSUFBSSxFQUFFLElBQUksSUFBSyxPQUFBLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBN0IsQ0FBNkI7YUFDeEQ7WUFDRDtnQkFDRSxJQUFJLEVBQUUsVUFB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QU0sQ0FBQyxNQUFNLEVBQUUsdUJBQXVCLEVBQUUsSUFBSSxFQUFFLDBCQUEwQixFQUM3RixVQUFBLFFBQVE7d0JBQ04sSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQzt3QkFDMUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLElBQUksR0FBRyxTQUFTLENBQUMsQ0FBQzt3QkFDeEQsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO29CQUNuQixDQUFDLEVBQ0QsVUFBQSxRQUFRO3dCQUNOLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDO3dCQUNyQyxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUM7b0JBQ25CLENBQUMsQ0FDRixDQUFDO2dCQUNKLENBQUM7WUFDSCxDQUFDLENBQUM7WUFFRixNQUFNLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDbkIsQ0FBQztLQUNGLENBQUMsQ0FBQztBQUNMLENBQUMsRUF4RU0sUUFBUSxLQUFSLFFBQVEsUUF3RWQiLCJmaWxlIjoiY29tcGlsZWQuanMiLCJzb3VyY2VzQ29udGVudCI6W251bGwsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9pbmNsdWRlcy50c1wiLz5cblxuLyoqXG4gKiBAbW9kdWxlIFByb2ZpbGVzXG4gKi9cbm1vZHVsZSBQcm9maWxlcyB7XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb2ZpbGVzU3ViTmF2QmFycyhuYW1lc3BhY2U6c3RyaW5nLCBwcm9qZWN0SWQ6c3RyaW5nKSB7XG4gICAgcmV0dXJuIERldmVsb3Blci5hY3RpdmF0ZUN1cnJlbnQoW1xuICAgICAge1xuICAgICAgICBocmVmOiBVcmxIZWxwZXJzLmpvaW4oSGF3dGlvQ29yZS5kb2N1bWVudEJhc2UoKSwgJy93b3Jrc3BhY2VzJywgbmFtZXNwYWNlLCAncHJvamVjdHMnLCBwcm9qZWN0SWQsICdwcm9maWxlcycpLFxuICAgICAgICBsYWJlbDogJ1Byb2ZpbGVzJyxcbiAgICAgICAgdGl0bGU6ICdQcm9maWxlcydcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGhyZWY6IFVybEhlbHBlcnMuam9pbihIYXd0aW9Db3JlLmRvY3VtZW50QmFzZSgpLCAnL3dvcmtzcGFjZXMnLCBuYW1lc3BhY2UsICdwcm9qZWN0cycsIHByb2plY3RJZCwgJ3Byb2ZpbGVzJywgJ2NvbnRhaW5lcnMnKSxcbiAgICAgICAgbGFiZWw6ICdDb250YWluZXJzJyxcbiAgICAgICAgdGl0bGU6ICdDb250YWluZXJzJyxcbiAgICAgICAgaXNBY3RpdmU6IChpdGVtLCBwYXRoKSA9PiBfLnN0YXJ0c1dpdGgocGF0aCwgaXRlbS5ocmVmKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaHJlZjogVXJsSGVscGVycy5qb2luKEhhd3Rpb0NvcmUuZG9jdW1lbnRCYXNlKCksICcvd29ya3NwYWNlcycsIG5hbWVzcGFjZSwgJ3Byb2plY3RzJywgcHJvamVjdElkLCAncHJvZmlsZXMnLCAnc2V0dGluZ3MnKSxcbiAgICAgICAgbGFiZWw6ICdTZXR0aW5ncycsXG4gICAgICAgIHRpdGxlOiAnU2V0dGluZ3MnXG4gICAgICB9XG4gICAgXSk7XG4gIH1cbn1cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9pbmNsdWRlcy50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJwcm9maWxlc0hlbHBlcnMudHNcIi8+XG5cbi8qKlxuICogQG1vZHVsZSBQcm9maWxlc1xuICogQG1haW4gUHJvZmlsZXNcbiAqL1xubW9kdWxlIFByb2ZpbGVzIHtcblxuICBleHBvcnQgdmFyIHBsdWdpbk5hbWUgPSAncHJvZmlsZXMnO1xuICBleHBvcnQgdmFyIGxvZzpMb2dnaW5nLkxvZ2dlciA9IExvZ2dlci5nZXQocGx1Z2luTmFtZSk7XG4gIGV4cG9ydCB2YXIgdGVtcGxhdGVQYXRoID0gJ3BsdWdpbnMvJyArIHBsdWdpbk5hbWUgKyAnL2h0bWwvJztcblxuICBleHBvcnQgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKHBsdWdpbk5hbWUsIFsnaGF3dGlvLWNvcmUnLCAnaGF3dGlvLXVpJywgJ2hhd3Rpby1mb3JtcycsICdibG9ja1VJJywgJ3VpLnNlbGVjdCcsICduZ1Nhbml0aXplJ10pO1xuXG4gIG1vZHVsZS5jb25maWcoWyckcm91dGVQcm92aWRlcicsICdibG9ja1VJQ29uZmlnJywgKCRyb3V0ZVByb3ZpZGVyOm5nLnJvdXRlLklSb3V0ZVByb3ZpZGVyLCBibG9ja1VJQ29uZmlnKSA9PiB7XG4gICAgYmxvY2tVSUNvbmZpZy5hdXRvQmxvY2sgPSBmYWxzZTtcbiAgICBibG9ja1VJQ29uZmlnLmRlbGF5ID0gMDtcblxuICAgIHZhciBqb2luID0gVXJsSGVscGVycy5qb2luO1xuICAgIHZhciByb3V0ZSA9IERldmVsb3Blci5jcmVhdGVUYWJSb3V0aW5nRnVuY3Rpb24odGVtcGxhdGVQYXRoKTtcbiAgICB2YXIgYmFzZSA9ICcvd29ya3NwYWNlcy86bmFtZXNwYWNlL3Byb2plY3RzLzpwcm9qZWN0SWQvcHJvZmlsZXMnO1xuXG4gICAgLy8gQWRkIGEgdGFiL2xpbmsgdG8gdGhlIHByb2ZpbGVzIHZpZXcgb24gdGhlIGxlZnQuLlxuICAgIERldmVsb3Blci5jdXN0b21Qcm9qZWN0U3ViVGFiRmFjdG9yaWVzLnB1c2goY29udGV4dCA9PiB7XG4gICAgICBpZihjb250ZXh0LiRzY29wZSkge1xuICAgICAgICBGb3JnZS51cGRhdGVGb3JnZVByb2plY3QoY29udGV4dC4kc2NvcGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIGlzVmFsaWQ6ICgpID0+IGNvbnRleHQucHJvamVjdExpbmsgJiYgRGV2ZWxvcGVyLmZvcmdlUmVhZHlMaW5rKCkgJiYgRm9yZ2UuZm9yZ2VQcm9qZWN0KCkuaGFzUGVyc3BlY3RpdmUoJ2ZhYnJpYzgtcHJvZmlsZXMnKSxcbiAgICAgICAgaHJlZjogam9pbihjb250ZXh0LnByb2plY3RMaW5rLCAncHJvZmlsZXMnKSxcbiAgICAgICAgY2xhc3M6ICdmYSBmYS1jb2RlLWZvcmsnLFxuICAgICAgICBsYWJlbDogJ1Byb2ZpbGVzJyxcbiAgICAgICAgdGl0bGU6ICdCcm93c2UgdGhlIHByb2ZpbGVzIG9mIHRoaXMgcHJvamVjdCcsXG4gICAgICAgIGlzQWN0aXZlOiAoc3ViVGFiLCBwYXRoKSA9PiBfLnN0YXJ0c1dpdGgocGF0aCwgam9pbihjb250ZXh0LnByb2plY3RMaW5rLCAncHJvZmlsZXMnKSlcbiAgICAgIH1dXG4gICAgfSk7XG5cbiAgICAkcm91dGVQcm92aWRlclxuICAgICAgLndoZW4oYmFzZSwgcm91dGUoJ3Byb2ZpbGVzLmh0bWwnLCBmYWxzZSkpXG4gICAgICAud2hlbihqb2luKGJhc2UsICdjb250YWluZXJzJywgJ2Fzc2lnblByb2ZpbGVzJyksIHJvdXRlKCdhc3NpZ25Qcm9maWxlcy5odG1sJywgZmFsc2UpKVxuICAgICAgLndoZW4oam9pbihiYXNlLCAnY29udGFpbmVycycsICdkZXBsb3lQcm9maWxlcycpLCByb3V0ZSgnZGVwbG95UHJvZmlsZXMuaHRtbCcsIGZhbHNlKSlcbiAgICAgIC53aGVuKGpvaW4oYmFzZSwgJ2NvbnRhaW5lcnMnKSwgcm91dGUoJ2NvbnRhaW5lcnMuaHRtbCcsIGZhbHNlKSlcbiAgICAgIC53aGVuKGpvaW4oYmFzZSwgJ3NldHRpbmdzJyksIHJvdXRlKCdzZXR0aW5ncy5odG1sJywgZmFsc2UpKTtcbiAgfV0pO1xuXG4gIC8vIERpcmVjdGl2ZSB0aGF0IGF2b2lkcyByZW5kZXJpbmcgZ2xpdGNoZXMgd2hlbiB1c2luZyBuZy1pbmNsdWRlIGFuZCBieXBhc3NlcyBpdHMgY29tcGxleGl0eVxuICAvLyBhcyB3ZSB1c2UgZ3VscC1hbmd1bGFyLXRlbXBsYXRlY2FjaGUgdG8gcmVnaXN0ZXIgQW5ndWxhckpTIHRlbXBsYXRlcyBpbiB0aGUgJHRlbXBsYXRlQ2FjaGUuXG4gIG1vZHVsZS5kaXJlY3RpdmUoJ3RlbXBsYXRlQ2FjaGVJbmNsdWRlJywgWyckY29tcGlsZScsICckdGVtcGxhdGVDYWNoZScsICgkY29tcGlsZSwgJHRlbXBsYXRlQ2FjaGUpID0+ICh7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgcHJpb3JpdHk6IDQwMCxcbiAgICAgIGNvbXBpbGU6IChlbGVtZW50LCBhdHRycykgPT4ge1xuICAgICAgICB2YXIgdGVtcGxhdGVOYW1lID0gYXR0cnMudGVtcGxhdGVDYWNoZUluY2x1ZGU7XG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9ICR0ZW1wbGF0ZUNhY2hlLmdldCh0ZW1wbGF0ZU5hbWUpO1xuICAgICAgICByZXR1cm4gKHNjb3BlLCBlbGVtZW50KSA9PiB7XG4gICAgICAgICAgZWxlbWVudC5odG1sKHRlbXBsYXRlKTtcbiAgICAgICAgICAkY29tcGlsZShlbGVtZW50LmNvbnRlbnRzKCkpKHNjb3BlKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KVxuICBdKTtcblxuICBoYXd0aW9QbHVnaW5Mb2FkZXIuYWRkTW9kdWxlKHBsdWdpbk5hbWUpO1xufVxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL2luY2x1ZGVzLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cInByb2ZpbGVzUGx1Z2luLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cInByb2ZpbGVzSGVscGVycy50c1wiLz5cblxubW9kdWxlIFByb2ZpbGVzIHtcblxuICBtb2R1bGUuY29udHJvbGxlcignUHJvZmlsZXMuQXNzaWduUHJvZmlsZXNDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJyR0ZW1wbGF0ZUNhY2hlJywgJ3Byb2ZpbGVzJywgJ2NvbnRhaW5lcnMnLCAnYmxvY2tVSScsICdqc3lhbWwnLCAoJHNjb3BlLCAkbG9jYXRpb24sICR0ZW1wbGF0ZUNhY2hlLCBwcm9maWxlczogUHJvZmlsZXMsIGNvbnRhaW5lcnM6IENvbnRhaW5lcnMsIGJsb2NrVUksIHlhbWwpID0+IHtcbiAgICAkc2NvcGUudGFicyA9IGNyZWF0ZVByb2ZpbGVzU3ViTmF2QmFycygkc2NvcGUubmFtZXNwYWNlLCAkc2NvcGUucHJvamVjdElkKTtcbiAgICAvLyBBc3NvY2lhdGUgdGhpcyBjb250cm9sbGVyIHNjb3BlIHRvIHRoZSBGb3JnZVByb2plY3RTZXJ2aWNlXG4gICAgRm9yZ2UudXBkYXRlRm9yZ2VQcm9qZWN0KCRzY29wZSk7XG4gICAgJHNjb3BlLmdpdFJlc3RVcmwgPSBwYXRoID0+IFdpa2kuZ2l0UmVzdFVSTCgkc2NvcGUsIHBhdGgpO1xuXG4gICAgJHNjb3BlLnByb2ZpbGVzID0gcHJvZmlsZXM7XG4gICAgJHNjb3BlLmNvbnRhaW5lcnMgPSBjb250YWluZXJzO1xuICAgICRzY29wZS5zZWxlY3RhYmxlID0gdHJ1ZTtcbiAgICAkc2NvcGUucHJvZmlsZUdyb3VwcyA9IChwcm9maWxlOiBQcm9maWxlKSA9PiBwcm9maWxlLnRhZ3MubGVuZ3RoID4gMCA/IHByb2ZpbGUudGFnc1swXSA6ICcnO1xuXG4gICAgbGV0IHNhdmluZzpudW1iZXIgPSAwO1xuICAgICRzY29wZS5zYXZpbmcgPSAoKSA9PiBzYXZpbmcgPiAwO1xuXG4gICAgbGV0IGJsb2NrVGFibGUgPSBibG9ja1VJLmluc3RhbmNlcy5nZXQoJ2Jsb2NrVGFibGUnKTtcblxuICAgICRzY29wZS5hc3NpZ25Qcm9maWxlcyA9ICgpID0+IHtcbiAgICAgIGxldCB3aWtpID0gbmV3IFdpa2kuR2l0V2lraVJlcG9zaXRvcnkoJHNjb3BlKTtcbiAgICAgIC8vIFRPRE86IHVzZSBQYXR0ZXJuRmx5IG5vdGlmaWNhdGlvbnNcbiAgICAgIGxldCBzdWNjZXNzID0gcmVzcG9uc2UgPT4ge1xuICAgICAgICBXaWtpLm9uQ29tcGxldGUocmVzcG9uc2UpO1xuICAgICAgICBDb3JlLm5vdGlmaWNhdGlvbignc3VjY2VzcycsIHJlc3BvbnNlLmZpbGUgKyAnIHNhdmVkIScpO1xuICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgfTtcbiAgICAgIGxldCBmYWlsdXJlID0gcmVzcG9uc2UgPT4ge1xuICAgICAgICBDb3JlLm5vdGlmaWNhdGlvbignZXJyb3InLCByZXNwb25zZSk7XG4gICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICB9O1xuICAgICAgbGV0IGNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICBpZiAoLS1zYXZpbmcgPT09IDApIHtcbiAgICAgICAgICBibG9ja1RhYmxlLm1lc3NhZ2UoJ1JlZnJlc2hpbmcgLi4uJyk7XG4gICAgICAgICAgY29udGFpbmVycy5sb2FkKHdpa2ksICRzY29wZS5icmFuY2gpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgYmxvY2tUYWJsZS5zdG9wKCk7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aChVcmxIZWxwZXJzLmpvaW4oJy93b3Jrc3BhY2VzJywgJHNjb3BlLm5hbWVzcGFjZSwgJ3Byb2plY3RzJywgJHNjb3BlLnByb2plY3RJZCwgJ3Byb2ZpbGVzJywgJ2NvbnRhaW5lcnMnKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBibG9ja1RhYmxlLnN0YXJ0KFwiU2F2aW5nIC4uLlwiKTtcbiAgICAgIGNvbnRhaW5lcnMuY2FydC5mb3JFYWNoKGNvbnRhaW5lciA9PiB7XG4gICAgICAgIHNhdmluZysrO1xuICAgICAgICB3aWtpLnB1dFBhZ2UoJHNjb3BlLmJyYW5jaCwgY29udGFpbmVyLnBhdGgsIGFzc2lnblByb2ZpbGVzKGNvbnRhaW5lciwgcHJvZmlsZXMuY2FydCksICdBc3NpZ24gcHJvZmlsZXMnLCBzdWNjZXNzLCBmYWlsdXJlKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBsZXQgYXNzaWduUHJvZmlsZXMgPSAoY29udGFpbmVyOiBDb250YWluZXIsIHByb2ZpbGVzOiBQcm9maWxlW10pOiBzdHJpbmcgPT4geWFtbC5zYWZlRHVtcCh7XG4gICAgICBjb250YWluZXI6IHtcbiAgICAgICAgcHJvZmlsZXMgICAgICAgIDogcHJvZmlsZXMubWFwKHByb2ZpbGUgPT4gcHJvZmlsZS5pZCkuam9pbignICcpLFxuICAgICAgICAnY29udGFpbmVyLXR5cGUnOiBjb250YWluZXIudHlwZXMuam9pbignICcpXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAkc2NvcGUucmVmcmVzaENvbnRhaW5lcnMgPSAoKSA9PiBjb250YWluZXJzLmxvYWQobmV3IFdpa2kuR2l0V2lraVJlcG9zaXRvcnkoJHNjb3BlKSwgJHNjb3BlLmJyYW5jaCk7XG4gICAgJHNjb3BlLnJlZnJlc2hQcm9maWxlcyA9ICgpID0+IHtcbiAgICAgIGlmICghcHJvZmlsZXMubG9hZGluZykge1xuICAgICAgICBwcm9maWxlcy5sb2FkKG5ldyBXaWtpLkdpdFdpa2lSZXBvc2l0b3J5KCRzY29wZSksICRzY29wZS5icmFuY2gpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoIShjb250YWluZXJzLmxvYWRlZCB8fCBjb250YWluZXJzLmxvYWRpbmcpKSB7XG4gICAgICAkc2NvcGUucmVmcmVzaENvbnRhaW5lcnMoKTtcbiAgICB9XG4gIH1dKVxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9pbmNsdWRlcy50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJwcm9maWxlc1BsdWdpbi50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJwcm9maWxlc0hlbHBlcnMudHNcIi8+XG5cbm1vZHVsZSBQcm9maWxlcyB7XG5cbiAgaW1wb3J0IEt1YmVybmV0ZXNNb2RlbFNlcnZpY2UgPSBLdWJlcm5ldGVzLkt1YmVybmV0ZXNNb2RlbFNlcnZpY2U7XG5cbiAgbW9kdWxlLmNvbnRyb2xsZXIoJ1Byb2ZpbGVzLkNvbnRhaW5lckxpc3RDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckbG9jYXRpb24nLCAnJHRlbXBsYXRlQ2FjaGUnLCAncHJvZmlsZXMnLCAnY29udGFpbmVycycsICdLdWJlcm5ldGVzTW9kZWwnLFxuICAgICAgKCRzY29wZSwgJGxvY2F0aW9uLCAkdGVtcGxhdGVDYWNoZSwgcHJvZmlsZXM6IFByb2ZpbGVzLCBjb250YWluZXJzOiBDb250YWluZXJzLCBrdWJlcm5ldGVzOiBLdWJlcm5ldGVzTW9kZWxTZXJ2aWNlKSA9PiB7XG5cbiAgICAkc2NvcGUudmlld1Byb2ZpbGUgPSBwcm9maWxlID0+ICRsb2NhdGlvbi5wYXRoKFdpa2kudmlld0xpbmsoJHNjb3BlLnByb2plY3RJZCwgJHNjb3BlLmJyYW5jaCwgcHJvZmlsZS5wYXRoLCAkbG9jYXRpb24pKTtcbiAgICAkc2NvcGUucHJvZmlsZXMgPSBwcm9maWxlcztcbiAgICAkc2NvcGUuY29udGFpbmVycyA9IGNvbnRhaW5lcnM7XG5cbiAgICAkc2NvcGUudGFibGVDb25maWcgPSB7XG4gICAgICBkYXRhOiAnY29udGFpbmVycy5kYXRhJyxcbiAgICAgIHNob3dTZWxlY3Rpb25DaGVja2JveDogJHNjb3BlLnNlbGVjdGFibGUgfHwgZmFsc2UsXG4gICAgICBlbmFibGVSb3dDbGlja1NlbGVjdGlvbjogJHNjb3BlLnNlbGVjdGFibGUgfHwgZmFsc2UsXG4gICAgICBtdWx0aVNlbGVjdDogdHJ1ZSxcbiAgICAgIHNlbGVjdGVkSXRlbXM6ICRzY29wZS5zZWxlY3RhYmxlID8gY29udGFpbmVycy5jYXJ0IDogW10sXG4gICAgICBmaWx0ZXJPcHRpb25zOiB7XG4gICAgICAgIGZpbHRlclRleHQ6ICRsb2NhdGlvbi5zZWFyY2goKVsncSddIHx8ICcnXG4gICAgICB9LFxuICAgICAgY29sdW1uRGVmczogW1xuICAgICAgICB7IGZpZWxkOiAnbmFtZScsXG4gICAgICAgICAgZGlzcGxheU5hbWU6ICdOYW1lJyxcbiAgICAgICAgICBjZWxsVGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgnY29udGFpbmVyTmFtZS5odG1sJylcbiAgICAgICAgfSxcbiAgICAgICAgeyBmaWVsZDogJ3BvZHMnLFxuICAgICAgICAgIGRpc3BsYXlOYW1lOiAnUG9kcycsXG4gICAgICAgICAgY2VsbFRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2NvbnRhaW5lclBvZHMuaHRtbCcpXG4gICAgICAgIH0sXG4gICAgICAgIHsgZmllbGQ6ICd0eXBlcycsXG4gICAgICAgICAgZGlzcGxheU5hbWU6ICdUeXBlcycsXG4gICAgICAgICAgY2VsbFRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2NvbnRhaW5lclR5cGVzLmh0bWwnKVxuICAgICAgICB9LFxuICAgICAgICB7IGZpZWxkOiAncHJvZmlsZXMnLFxuICAgICAgICAgIGRpc3BsYXlOYW1lOiAnUHJvZmlsZXMnLFxuICAgICAgICAgIGNlbGxUZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCdjb250YWluZXJQcm9maWxlcy5odG1sJylcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH07XG5cbiAgICAkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbigncHJvZmlsZXMuZGF0YScsIHByb2ZpbGVzID0+XG4gICAgICBjb250YWluZXJzLmRhdGEuZm9yRWFjaCgoY29udGFpbmVyOkNvbnRhaW5lcikgPT5cbiAgICAgICAgcHJvZmlsZXMuZm9yRWFjaCgocHJvZmlsZTpQcm9maWxlKSA9PiB7XG4gICAgICAgICAgbGV0IGkgPSBfLmluZGV4T2YoY29udGFpbmVyLnByb2ZpbGVzLCBwcm9maWxlLmlkKTtcbiAgICAgICAgICBpZiAoaSA+PSAwKSB7XG4gICAgICAgICAgICBjb250YWluZXIucHJvZmlsZXNbaV0gPSBwcm9maWxlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIClcbiAgICApO1xuXG4gICAgLy8gTmVjZXNzYXJ5IHN5bmMgYXMgdWktc2VsZWN0IGNoYW5nZXMgdGhlIHNlbGVjdGlvbiBhcnJheSByZWZlcmVuY2UgOihcbiAgICAkc2NvcGUuJHdhdGNoKCdjb250YWluZXJzLmNhcnQnLCBjb250YWluZXJzID0+IHtcbiAgICAgICRzY29wZS50YWJsZUNvbmZpZy5zZWxlY3RlZEl0ZW1zID0gY29udGFpbmVycztcbiAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdoYXd0aW8uZGF0YXRhYmxlLmNvbnRhaW5lcnMuZGF0YScpO1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLiRvbigna3ViZXJuZXRlc01vZGVsVXBkYXRlZCcsICgpID0+XG4gICAgICBfLmZpbHRlcihjb250YWluZXJzLmRhdGEsIChjb250YWluZXI6Q29udGFpbmVyKSA9PiAhY29udGFpbmVyLmRlcGxveW1lbnQpXG4gICAgICAgIC5mb3JFYWNoKChjb250YWluZXI6Q29udGFpbmVyKSA9PiB7XG4gICAgICAgICAgY29udGFpbmVyLmRlcGxveW1lbnQgPSBrdWJlcm5ldGVzLmdldERlcGxveW1lbnQoJHNjb3BlLm5hbWVzcGFjZSB8fCBLdWJlcm5ldGVzLmN1cnJlbnRLdWJlcm5ldGVzTmFtZXNwYWNlKCksIGNvbnRhaW5lci5uYW1lKTtcbiAgICAgICAgICBjb250YWluZXIuaWNvbnMucHVzaCg8SWNvbj4ge1xuICAgICAgICAgICAgdHlwZTogJ2ltZycsXG4gICAgICAgICAgICBzcmMgOiBjb250YWluZXIuZGVwbG95bWVudC4kaWNvblVybFxuICAgICAgICAgIH0pO1xuICAgIH0pKTtcblxuICAgIGlmICghKGNvbnRhaW5lcnMubG9hZGVkIHx8IGNvbnRhaW5lcnMubG9hZGluZykpIHtcbiAgICAgICRzY29wZS5yZWZyZXNoKCk7XG4gICAgfVxuICB9XSk7XG5cbiAgbW9kdWxlLmZpbHRlcigna3ViZXJuZXRlc1BhZ2VMaW5rJywgKCkgPT4gKGVudGl0eSwgcGF0aDEsIHBhdGgyKSA9PiBVcmxIZWxwZXJzLmpvaW4oS3ViZXJuZXRlcy5lbnRpdHlQYWdlTGluayhlbnRpdHkpLCBwYXRoMSwgcGF0aDIpKTtcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vaW5jbHVkZXMudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicHJvZmlsZXNQbHVnaW4udHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicHJvZmlsZXNIZWxwZXJzLnRzXCIvPlxuXG5tb2R1bGUgUHJvZmlsZXMge1xuXG4gIGltcG9ydCBLdWJlcm5ldGVzTW9kZWxTZXJ2aWNlID0gS3ViZXJuZXRlcy5LdWJlcm5ldGVzTW9kZWxTZXJ2aWNlO1xuICBpbXBvcnQgSURlZmVycmVkID0gYW5ndWxhci5JRGVmZXJyZWQ7XG4gIGltcG9ydCBJUHJvbWlzZSA9IGFuZ3VsYXIuSVByb21pc2U7XG5cbiAgZXhwb3J0IGludGVyZmFjZSBJY29uIHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIHR5cGU6ICBzdHJpbmc7XG4gICAgc3JjOiAgIHN0cmluZztcbiAgfVxuXG4gIGxldCBpY29ucyA9IHtcbiAgICBjYW1lbDogICAgICAgJ2NhbWVsJyxcbiAgICBqZW5raW5zZmlsZTogJ2plbmtpbnMnLFxuICAgIGthcmFmOiAgICAgICAna2FyYWYnXG4gIH07XG5cbiAgZXhwb3J0IGludGVyZmFjZSBDb250YWluZXIge1xuICAgIG5hbWU6ICAgICBzdHJpbmc7XG4gICAgcGF0aDogICAgIHN0cmluZztcbiAgICBkZXBsb3ltZW50PzogYW55O1xuICAgIHByb2ZpbGVzOiAoUHJvZmlsZXxzdHJpbmcpW107XG4gICAgdHlwZXM6ICAgIHN0cmluZ1tdO1xuICAgIGljb25zPzogICBJY29uW107XG4gIH1cblxuICBleHBvcnQgY2xhc3MgQ29udGFpbmVycyB7XG4gICAgbG9hZGVkOiBib29sZWFuICAgICAgICAgID0gZmFsc2U7XG4gICAgbG9hZGluZzogYm9vbGVhbiAgICAgICAgID0gZmFsc2U7XG4gICAgcHJpdmF0ZSByZXF1ZXN0czogbnVtYmVyID0gMDtcbiAgICBkYXRhOiBDb250YWluZXJbXSAgICAgICAgPSBbXTtcbiAgICBjYXJ0OiBDb250YWluZXJbXSAgICAgICAgPSBbXTtcbiAgICBwcml2YXRlIHByb2ZpbGVzOiBQcm9maWxlcztcbiAgICBwcml2YXRlIGt1YmVybmV0ZXM6IEt1YmVybmV0ZXNNb2RlbFNlcnZpY2U7XG4gICAgcHJpdmF0ZSAkcTogbmcuSVFTZXJ2aWNlO1xuICAgIHByaXZhdGUgeWFtbDtcblxuICAgIGNvbnN0cnVjdG9yKHByb2ZpbGVzOiBQcm9maWxlcywga3ViZXJuZXRlczogS3ViZXJuZXRlc01vZGVsU2VydmljZSwgJHE6IG5nLklRU2VydmljZSwgeWFtbCkge1xuICAgICAgdGhpcy5wcm9maWxlcyAgID0gcHJvZmlsZXM7XG4gICAgICB0aGlzLmt1YmVybmV0ZXMgPSBrdWJlcm5ldGVzO1xuICAgICAgdGhpcy4kcSAgICAgICAgID0gJHE7XG4gICAgICB0aGlzLnlhbWwgICAgICAgPSB5YW1sO1xuICAgIH1cblxuICAgIGxvYWQgPSAod2lraTpXaWtpLkdpdFdpa2lSZXBvc2l0b3J5LCBicmFuY2g6c3RyaW5nLCBuYW1lc3BhY2U/OnN0cmluZyk6SVByb21pc2U8dm9pZD4gPT4ge1xuICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMucmVxdWVzdHMrKztcbiAgICAgIGxldCBkYXRhOkNvbnRhaW5lcltdID0gW107XG4gICAgICBsZXQgZGVmZXJyZWQgPSB0aGlzLiRxLmRlZmVyPHZvaWQ+KCk7XG4gICAgICAvLyBMZXRzIGxpc3QgYWxsIHRoZSBjb250YWluZXJzLCBhbmQgbG9hZCB0aGUgY29udGFpbmVyIGNvbmZpZ3NcbiAgICAgIHdpa2kuZ2V0UGFnZShicmFuY2gsICdjb25maWdzL2NvbnRhaW5lcnMnLCBudWxsLCBwYWdlID0+IHtcbiAgICAgICAgXy5mb3JFYWNoKHBhZ2UuY2hpbGRyZW4sIGNoaWxkID0+IHtcbiAgICAgICAgICBpZiAoIWNoaWxkLmRpcmVjdG9yeSAmJiBfLmVuZHNXaXRoKGNoaWxkLm5hbWUsICcueWFtbCcpKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RzKys7XG4gICAgICAgICAgICB3aWtpLmdldFBhZ2UoYnJhbmNoLCBjaGlsZC5wYXRoLCBudWxsLCBwYWdlID0+IHtcbiAgICAgICAgICAgICAgbGV0IHByb3BlcnRpZXMgPSB0aGlzLnlhbWwuc2FmZUxvYWQocGFnZS50ZXh0KTtcbiAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHBhZ2UubmFtZS5yZXBsYWNlKC8ueWFtbC8sICcnKTtcbiAgICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IDxDb250YWluZXI+IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgIHBhdGg6IHBhZ2UucGF0aCxcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBpbXBsZW1lbnQgYSBtb3JlIHJvYnVzdCBtYXBwaW5nIGJldHdlZW4gdGhlIGNvbnRhaW5lciBwcm9qZWN0IGFuZCB0aGUgY29ycmVzcG9uZGluZyBkZXBsb3ltZW50IHVzaW5nIHRoZSBncm91cCBhbmQgcHJvamVjdCBsYWJlbHNcbiAgICAgICAgICAgICAgICBkZXBsb3ltZW50OiB0aGlzLmt1YmVybmV0ZXMuZ2V0RGVwbG95bWVudChuYW1lc3BhY2UgfHwgS3ViZXJuZXRlcy5jdXJyZW50S3ViZXJuZXRlc05hbWVzcGFjZSgpLG5hbWUpLFxuICAgICAgICAgICAgICAgIC8vIFdlIGNvdWxkIGxvYWQgdGhlIHByb2ZpbGVzIGlmIG5vdCBhbHJlYWR5IGxvYWRlZCBhbmQgc3luYyB0aGUgY29udGFpbmVycyBkYXRhIGlmIG5lZWRlZFxuICAgICAgICAgICAgICAgIHByb2ZpbGVzOiBfLm1hcChwcm9wZXJ0aWVzLmNvbnRhaW5lci5wcm9maWxlcy5zcGxpdCgnICcpLCAocHJvZmlsZTpzdHJpbmcpID0+IDxQcm9maWxlfHN0cmluZz5fLmZpbmQodGhpcy5wcm9maWxlcy5kYXRhLCB7aWQ6IHByb2ZpbGV9KSB8fCBwcm9maWxlKSxcbiAgICAgICAgICAgICAgICB0eXBlczogcHJvcGVydGllcy5jb250YWluZXJbJ2NvbnRhaW5lci10eXBlJ10uc3BsaXQoJyAnKSxcbiAgICAgICAgICAgICAgICBpY29uczogcHJvcGVydGllcy5jb250YWluZXJbJ2NvbnRhaW5lci10eXBlJ10uc3BsaXQoJyAnKS5tYXAodHlwZSA9PiA8SWNvbj4ge1xuICAgICAgICAgICAgICAgICAgdGl0bGU6IHR5cGUsXG4gICAgICAgICAgICAgICAgICB0eXBlOiAnaW1nJyxcbiAgICAgICAgICAgICAgICAgIHNyYzogJ2ltZy9pY29ucy8nICsgKHR5cGUudG9Mb3dlckNhc2UoKSBpbiBpY29ucyA/IGljb25zW3R5cGUudG9Mb3dlckNhc2UoKV0gOiAnamF2YScpICsgJy5zdmcnXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAvLyBhZGQgdGhlIGljb25zIGZyb20gdGhlIHJ1bnRpbWUgaW5mb1xuICAgICAgICAgICAgICBpZiAoY29udGFpbmVyLmRlcGxveW1lbnQpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuaWNvbnMucHVzaCg8SWNvbj4ge1xuICAgICAgICAgICAgICAgICAgdHlwZTogJ2ltZycsXG4gICAgICAgICAgICAgICAgICBzcmMgOiBjb250YWluZXIuZGVwbG95bWVudC4kaWNvblVybFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRhdGEucHVzaChjb250YWluZXIpO1xuICAgICAgICAgICAgICB0aGlzLmNvbXBsZXRlKGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb21wbGV0ZShkYXRhKTtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBjb21wbGV0ZSA9IChkYXRhOkNvbnRhaW5lcltdKTp2b2lkID0+IHtcbiAgICAgIGlmICgtLXRoaXMucmVxdWVzdHMgPT09IDApIHtcbiAgICAgICAgdGhpcy5kYXRhLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuZGF0YS5wdXNoKC4uLiBkYXRhKTtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMubG9hZGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgbW9kdWxlLnNlcnZpY2UoJ2NvbnRhaW5lcnMnLCBbJ3Byb2ZpbGVzJywgJ0t1YmVybmV0ZXNNb2RlbCcsICckcScsICdqc3lhbWwnLCBDb250YWluZXJzXSk7XG5cbiAgbW9kdWxlLmNvbnRyb2xsZXIoJ1Byb2ZpbGVzLkNvbnRhaW5lcnNDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckbG9jYXRpb24nLCAnY29udGFpbmVycycsICdibG9ja1VJJyxcbiAgICAgICgkc2NvcGUsICRsb2NhdGlvbiwgY29udGFpbmVyczogQ29udGFpbmVycywgYmxvY2tVSSkgPT4ge1xuICAgICRzY29wZS50YWJzID0gY3JlYXRlUHJvZmlsZXNTdWJOYXZCYXJzKCRzY29wZS5uYW1lc3BhY2UsICRzY29wZS5wcm9qZWN0SWQpO1xuICAgIC8vIEFzc29jaWF0ZSB0aGlzIGNvbnRyb2xsZXIgc2NvcGUgdG8gdGhlIEZvcmdlUHJvamVjdFNlcnZpY2VcbiAgICBGb3JnZS51cGRhdGVGb3JnZVByb2plY3QoJHNjb3BlKTtcblxuICAgICRzY29wZS5jb250YWluZXJzID0gY29udGFpbmVycztcbiAgICAkc2NvcGUuc2VsZWN0YWJsZSA9IHRydWU7XG5cbiAgICBsZXQgc2F2aW5nOm51bWJlciA9IDA7XG4gICAgJHNjb3BlLnNhdmluZyA9ICgpID0+IHNhdmluZyA+IDA7XG5cbiAgICBsZXQgYmxvY2tUYWJsZSA9IGJsb2NrVUkuaW5zdGFuY2VzLmdldCgnYmxvY2tUYWJsZScpO1xuXG4gICAgJHNjb3BlLmNyZWF0ZUNvbnRhaW5lcnMgPSAoKSA9PiAkbG9jYXRpb24ucGF0aChVcmxIZWxwZXJzLmpvaW4oJy93b3Jrc3BhY2VzJywgJHNjb3BlLm5hbWVzcGFjZSwgJ3Byb2plY3RzJywgJHNjb3BlLnByb2plY3RJZCwgJ3Byb2ZpbGVzJywgJ2NvbnRhaW5lcnMnLCAnZGVwbG95UHJvZmlsZXMnKSk7XG5cbiAgICAkc2NvcGUuYXNzaWduUHJvZmlsZXMgPSAoKSA9PiAkbG9jYXRpb24ucGF0aChVcmxIZWxwZXJzLmpvaW4oJy93b3Jrc3BhY2VzJywgJHNjb3BlLm5hbWVzcGFjZSwgJ3Byb2plY3RzJywgJHNjb3BlLnByb2plY3RJZCwgJ3Byb2ZpbGVzJywgJ2NvbnRhaW5lcnMnLCAnYXNzaWduUHJvZmlsZXMnKSk7XG5cbiAgICAkc2NvcGUuZGVsZXRlQ29udGFpbmVycyA9ICgpID0+IHtcbiAgICAgIGxldCB3aWtpID0gbmV3IFdpa2kuR2l0V2lraVJlcG9zaXRvcnkoJHNjb3BlKTtcbiAgICAgIC8vIFRPRE86IHVzZSBQYXR0ZXJuRmx5IG5vdGlmaWNhdGlvbnNcbiAgICAgIGxldCBzdWNjZXNzID0gKHJlc3BvbnNlLCBjb250YWluZXIpID0+IHtcbiAgICAgICAgV2lraS5vbkNvbXBsZXRlKHJlc3BvbnNlKTtcbiAgICAgICAgQ29yZS5ub3RpZmljYXRpb24oJ3N1Y2Nlc3MnLCBjb250YWluZXIgKyAnIGRlbGV0ZWQhJyk7XG4gICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICB9O1xuICAgICAgbGV0IGZhaWx1cmUgPSByZXNwb25zZSA9PiB7XG4gICAgICAgIENvcmUubm90aWZpY2F0aW9uKCdlcnJvcicsIHJlc3BvbnNlKTtcbiAgICAgICAgY29tcGxldGUoKTtcbiAgICAgIH07XG4gICAgICBsZXQgY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgIGlmICgtLXNhdmluZyA9PT0gMCkge1xuICAgICAgICAgIGJsb2NrVGFibGUubWVzc2FnZSgnUmVmcmVzaGluZyAuLi4nKTtcbiAgICAgICAgICBjb250YWluZXJzLmxvYWQod2lraSwgJHNjb3BlLmJyYW5jaCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBibG9ja1RhYmxlLnN0b3AoKTtcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFVybEhlbHBlcnMuam9pbignL3dvcmtzcGFjZXMnLCAkc2NvcGUubmFtZXNwYWNlLCAncHJvamVjdHMnLCAkc2NvcGUucHJvamVjdElkLCAncHJvZmlsZXMnLCAnY29udGFpbmVycycpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGJsb2NrVGFibGUuc3RhcnQoXCJTYXZpbmcgLi4uXCIpO1xuICAgICAgY29udGFpbmVycy5jYXJ0LmZvckVhY2goY29udGFpbmVyID0+IHtcbiAgICAgICAgc2F2aW5nKys7XG4gICAgICAgIHdpa2kucmVtb3ZlUGFnZSgkc2NvcGUuYnJhbmNoLCBjb250YWluZXIucGF0aCwgJ0RlbGV0ZSBjb250YWluZXInLCAocmVzcG9uc2UpID0+IHN1Y2Nlc3MocmVzcG9uc2UsIGNvbnRhaW5lci5uYW1lKS8qLCBmYWlsdXJlKi8pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5yZWZyZXNoID0gKCkgPT4gY29udGFpbmVycy5sb2FkKG5ldyBXaWtpLkdpdFdpa2lSZXBvc2l0b3J5KCRzY29wZSksICRzY29wZS5icmFuY2gsICRzY29wZS5uYW1lc3BhY2UpO1xuICB9XSlcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vaW5jbHVkZXMudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicHJvZmlsZXNQbHVnaW4udHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicHJvZmlsZXNIZWxwZXJzLnRzXCIvPlxuXG5tb2R1bGUgUHJvZmlsZXMge1xuXG4gIG1vZHVsZS5jb250cm9sbGVyKCdQcm9maWxlcy5EZXBsb3lQcm9maWxlc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnJHRlbXBsYXRlQ2FjaGUnLCAncHJvZmlsZXMnLCAnY29udGFpbmVycycsICdibG9ja1VJJywgJ2pzeWFtbCcsICgkc2NvcGUsICRsb2NhdGlvbiwgJHRlbXBsYXRlQ2FjaGUsIHByb2ZpbGVzOiBQcm9maWxlcywgY29udGFpbmVyczogQ29udGFpbmVycywgYmxvY2tVSSwgeWFtbCkgPT4ge1xuICAgICRzY29wZS50YWJzID0gY3JlYXRlUHJvZmlsZXNTdWJOYXZCYXJzKCRzY29wZS5uYW1lc3BhY2UsICRzY29wZS5wcm9qZWN0SWQpO1xuICAgIC8vIEFzc29jaWF0ZSB0aGlzIGNvbnRyb2xsZXIgc2NvcGUgdG8gdGhlIEZvcmdlUHJvamVjdFNlcnZpY2VcbiAgICBGb3JnZS51cGRhdGVGb3JnZVByb2plY3QoJHNjb3BlKTtcbiAgICAkc2NvcGUuZ2l0UmVzdFVybCA9IHBhdGggPT4gV2lraS5naXRSZXN0VVJMKCRzY29wZSwgcGF0aCk7XG5cbiAgICAkc2NvcGUucHJvZmlsZXMgPSBwcm9maWxlcztcbiAgICAkc2NvcGUuY29udGFpbmVycyA9IGNvbnRhaW5lcnM7XG4gICAgJHNjb3BlLnNlbGVjdCA9IHtcbiAgICAgIG5hbWVzOiBbXVxuICAgIH07XG4gICAgJHNjb3BlLnNlbGVjdGFibGUgPSBmYWxzZTtcbiAgICAkc2NvcGUucHJvZmlsZUdyb3VwcyA9IChwcm9maWxlOiBQcm9maWxlKSA9PiBwcm9maWxlLnRhZ3MubGVuZ3RoID4gMCA/IHByb2ZpbGUudGFnc1swXSA6ICcnO1xuXG4gICAgbGV0IHNhdmluZzpudW1iZXIgPSAwO1xuICAgICRzY29wZS5zYXZpbmcgPSAoKSA9PiBzYXZpbmcgPiAwO1xuXG4gICAgbGV0IGJsb2NrVGFibGUgPSBibG9ja1VJLmluc3RhbmNlcy5nZXQoJ2Jsb2NrVGFibGUnKTtcblxuICAgICRzY29wZS5kZXBsb3lQcm9maWxlcyA9ICgpID0+IHtcbiAgICAgIGxldCB3aWtpID0gbmV3IFdpa2kuR2l0V2lraVJlcG9zaXRvcnkoJHNjb3BlKTtcbiAgICAgIC8vIFRPRE86IHVzZSBQYXR0ZXJuRmx5IG5vdGlmaWNhdGlvbnNcbiAgICAgIGxldCBzdWNjZXNzID0gcmVzcG9uc2UgPT4ge1xuICAgICAgICBXaWtpLm9uQ29tcGxldGUocmVzcG9uc2UpO1xuICAgICAgICBDb3JlLm5vdGlmaWNhdGlvbignc3VjY2VzcycsIHJlc3BvbnNlLmZpbGUgKyAnIHNhdmVkIScpO1xuICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgfTtcbiAgICAgIGxldCBmYWlsdXJlID0gcmVzcG9uc2UgPT4ge1xuICAgICAgICBDb3JlLm5vdGlmaWNhdGlvbignZXJyb3InLCByZXNwb25zZSk7XG4gICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICB9O1xuICAgICAgbGV0IGNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICBpZiAoLS1zYXZpbmcgPT09IDApIHtcbiAgICAgICAgICBibG9ja1RhYmxlLm1lc3NhZ2UoJ1JlZnJlc2hpbmcgLi4uJyk7XG4gICAgICAgICAgY29udGFpbmVycy5sb2FkKHdpa2ksICRzY29wZS5icmFuY2gpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgYmxvY2tUYWJsZS5zdG9wKCk7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aChVcmxIZWxwZXJzLmpvaW4oJy93b3Jrc3BhY2VzJywgJHNjb3BlLm5hbWVzcGFjZSwgJ3Byb2plY3RzJywgJHNjb3BlLnByb2plY3RJZCwgJ3Byb2ZpbGVzJywgJ2NvbnRhaW5lcnMnKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBibG9ja1RhYmxlLnN0YXJ0KFwiU2F2aW5nIC4uLlwiKTtcbiAgICAgIHNhdmluZysrO1xuICAgICAgJHNjb3BlLnNlbGVjdC5uYW1lcy5mb3JFYWNoKG5hbWUgPT5cbiAgICAgICAgd2lraS5wdXRQYWdlKCRzY29wZS5icmFuY2gsICdjb25maWdzL2NvbnRhaW5lcnMvJyArIG5hbWUgKyAnLnlhbWwnLCBkZXBsb3lQcm9maWxlcyhuYW1lLCBwcm9maWxlcy5jYXJ0KSwgJ0RlcGxveSBwcm9maWxlcyBpbnRvICcgKyBuYW1lLCBzdWNjZXNzLCBmYWlsdXJlKSk7XG4gICAgfTtcblxuICAgIGxldCBkZXBsb3lQcm9maWxlcyA9IChjb250YWluZXI6IHN0cmluZywgcHJvZmlsZXM6IFByb2ZpbGVbXSk6IHN0cmluZyA9PiB5YW1sLnNhZmVEdW1wKHtcbiAgICAgIGNvbnRhaW5lcjoge1xuICAgICAgICBwcm9maWxlcyAgICAgICAgOiBwcm9maWxlcy5tYXAocHJvZmlsZSA9PiBwcm9maWxlLmlkKS5qb2luKCcgJyksXG4gICAgICAgICdjb250YWluZXItdHlwZSc6ICdrYXJhZiBqZW5raW5zZmlsZSdcbiAgICAgIH1cbiAgICB9KTtcblxuICAgICRzY29wZS5leGlzdGluZ0NvbnRhaW5lcnMgPSBuYW1lcyA9PiBfLmludGVyc2VjdGlvbihuYW1lcywgXy5wbHVjayhjb250YWluZXJzLmRhdGEsICduYW1lJykpO1xuXG4gICAgJHNjb3BlLnJlZnJlc2hDb250YWluZXJzID0gKCkgPT4gY29udGFpbmVycy5sb2FkKG5ldyBXaWtpLkdpdFdpa2lSZXBvc2l0b3J5KCRzY29wZSksICRzY29wZS5icmFuY2gpO1xuICAgICRzY29wZS5yZWZyZXNoUHJvZmlsZXMgPSAoKSA9PiB7XG4gICAgICBpZiAoIXByb2ZpbGVzLmxvYWRpbmcpIHtcbiAgICAgICAgcHJvZmlsZXMubG9hZChuZXcgV2lraS5HaXRXaWtpUmVwb3NpdG9yeSgkc2NvcGUpLCAkc2NvcGUuYnJhbmNoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKCEoY29udGFpbmVycy5sb2FkZWQgfHwgY29udGFpbmVycy5sb2FkaW5nKSkge1xuICAgICAgJHNjb3BlLnJlZnJlc2hDb250YWluZXJzKCk7XG4gICAgfVxuICB9XSlcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vaW5jbHVkZXMudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicHJvZmlsZXNQbHVnaW4udHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicHJvZmlsZXNIZWxwZXJzLnRzXCIvPlxuXG5tb2R1bGUgUHJvZmlsZXMge1xuXG4gIGV4cG9ydCBpbnRlcmZhY2UgUHJvZmlsZSB7XG4gICAgaWQ6ICAgICAgICAgIHN0cmluZztcbiAgICBwYXRoOiAgICAgICAgc3RyaW5nO1xuICAgIG5hbWU6ICAgICAgICBzdHJpbmc7XG4gICAgdGFncz86ICAgICAgIHN0cmluZ1tdO1xuICAgIHN1bW1hcnk/OiAgICBzdHJpbmc7XG4gICAgc3VtbWFyeVVybD86IHN0cmluZztcbiAgICBpY29uPzogICAgICAgc3RyaW5nO1xuICAgIGljb25Vcmw/OiAgICBzdHJpbmc7XG4gIH1cblxuICBleHBvcnQgY2xhc3MgUHJvZmlsZXMge1xuICAgIGxvYWRlZDpib29sZWFuID0gZmFsc2U7XG4gICAgbG9hZGluZzpib29sZWFuID0gZmFsc2U7XG4gICAgZGF0YTpQcm9maWxlW10gPSBbXTtcbiAgICBjYXJ0OlByb2ZpbGVbXSA9IFtdO1xuICAgIHByaXZhdGUgcmVxdWVzdHM6bnVtYmVyID0gMDtcblxuICAgIGxvYWQgPSAod2lraTpXaWtpLkdpdFdpa2lSZXBvc2l0b3J5LCBicmFuY2g6c3RyaW5nLCBwYXRoOnN0cmluZyA9ICdwcm9maWxlcycpOnZvaWQgPT4ge1xuICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuZGF0YS5sZW5ndGggPSAwO1xuICAgICAgdGhpcy5yZXF1ZXN0cyA9IDA7XG4gICAgICB0aGlzLmZpbmRQcm9maWxlcyh3aWtpLCBicmFuY2gsIHBhdGgpO1xuICAgIH07XG5cbiAgICBwcml2YXRlIGZpbmRQcm9maWxlcyA9ICh3aWtpOldpa2kuR2l0V2lraVJlcG9zaXRvcnksIGJyYW5jaDpzdHJpbmcsIHBhdGg6c3RyaW5nKTp2b2lkID0+IHtcbiAgICAgIHRoaXMucmVxdWVzdHMrKztcbiAgICAgIC8vIHdlIG5lZWQgdG8gcmVjdXJzaXZlbHkgdHJhdmVyc2UgdGhlIHByb2ZpbGVzIGRpciB0byBsb29rIGZvciBwcm9maWxlc1xuICAgICAgd2lraS5nZXRQYWdlKGJyYW5jaCwgcGF0aCwgbnVsbCwgZGF0YSA9PiB7XG4gICAgICAgIGlmKGRhdGEuY2hpbGRyZW4pIHtcbiAgICAgICAgICBfLmZvckVhY2goZGF0YS5jaGlsZHJlbiwgdmFsdWUgPT4ge1xuICAgICAgICAgICAgaWYodmFsdWUuZGlyZWN0b3J5ICYmIF8uZW5kc1dpdGgodmFsdWUubmFtZSwgJy5wcm9maWxlJykpIHtcbiAgICAgICAgICAgICAgdGhpcy5sb2FkUHJvZmlsZSh3aWtpLCBicmFuY2gsIHZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuZGlyZWN0b3J5KSB7XG4gICAgICAgICAgICAgIHRoaXMuZmluZFByb2ZpbGVzKHdpa2ksIGJyYW5jaCwgdmFsdWUucGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb21wbGV0ZSgpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgbG9hZFByb2ZpbGUgPSAod2lraTpXaWtpLkdpdFdpa2lSZXBvc2l0b3J5LCBicmFuY2g6c3RyaW5nLCB2YWx1ZTphbnkpOnZvaWQgPT4ge1xuICAgICAgdmFyIGluZm8gPSAvXnByb2ZpbGVzXFwvKCg/Oi4rKVxcLykqKC4rKS5wcm9maWxlJC8uZXhlYyh2YWx1ZS5wYXRoKTtcbiAgICAgIHZhciBwcm9maWxlID0gPFByb2ZpbGU+e1xuICAgICAgICBpZDogICAoaW5mb1sxXSA/IGluZm9bMV0ucmVwbGFjZSgvXFwvL2csICctJykgOiAnJykgKyBpbmZvWzJdLFxuICAgICAgICBuYW1lOiBpbmZvWzJdLFxuICAgICAgICBwYXRoOiB2YWx1ZS5wYXRoLFxuICAgICAgICB0YWdzOiBpbmZvWzFdID8gaW5mb1sxXS5zbGljZSgwLCAtMSkuc3BsaXQoJy8nKSA6IFtdXG4gICAgICB9O1xuXG4gICAgICB0aGlzLnJlcXVlc3RzKys7XG4gICAgICB3aWtpLmdldFBhZ2UoYnJhbmNoLCB2YWx1ZS5wYXRoLCBudWxsLCBkYXRhID0+IHtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgZGF0YS5jaGlsZHJlbikge1xuICAgICAgICAgIGxldCBuYW1lID0gY2hpbGQubmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgIGlmIChuYW1lID09ICdSRUFETUUuTUQnIHx8IG5hbWUgPT0gJ1NVTU1BUlkuTUQnKSB7XG4gICAgICAgICAgICBwcm9maWxlLnN1bW1hcnlVcmwgPSBjaGlsZC5wYXRoO1xuICAgICAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAnSUNPTi5TVkcnKSB7XG4gICAgICAgICAgICBwcm9maWxlLmljb25VcmwgPSBjaGlsZC5wYXRoO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBSZXBsYWNlIHRoZSBleGlzdGluZyBwcm9maWxlIHdpdGggdGhlIG5ldyBsb2FkZWQgb25lXG4gICAgICAgIHRoaXMuZGF0YS5zcGxpY2UoXy5zb3J0ZWRJbmRleCh0aGlzLmRhdGEsIHByb2ZpbGUsICdpZCcpLCAwLCBwcm9maWxlKTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBwcm9maWxlcyBzZWxlY3Rpb24gaW4gY2FzZSBpdCBjb250YWlucyB0aGlzIHByb2ZpbGVcbiAgICAgICAgbGV0IGkgPSBfLmZpbmRJbmRleCh0aGlzLmNhcnQsIHtpZDogcHJvZmlsZS5pZH0pO1xuICAgICAgICBpZiAoaSA+PSAwKSB7XG4gICAgICAgICAgdGhpcy5jYXJ0W2ldID0gcHJvZmlsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY29tcGxldGUoKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBwcml2YXRlIGNvbXBsZXRlID0gKCk6dm9pZCA9PiB7XG4gICAgICBpZiAoLS10aGlzLnJlcXVlc3RzID09PSAwKSB7XG4gICAgICAgIFNlbGVjdGlvbkhlbHBlcnMuc3luY0dyb3VwU2VsZWN0aW9uKHRoaXMuY2FydCwgdGhpcy5kYXRhLCAnaWQnKTtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMubG9hZGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgY2xhc3MgUHJvZmlsZVZpZXcge1xuICAgIG9wZW46ICBib29sZWFuO1xuICAgIGZvcmNlOiBib29sZWFuO1xuICAgIHNjb3BlOiBhbnk7XG5cbiAgICBjb25zdHJ1Y3RvciAoc2NvcGU6IGFueSkge1xuICAgICAgdGhpcy5zY29wZSA9IHNjb3BlO1xuICAgIH1cblxuICAgIGdldCBvcGVuT3JTaW5nbGUoKTpib29sZWFuIHtcbiAgICAgIGxldCBzY29wZSA9IHRoaXMuc2NvcGU7XG4gICAgICBpZiAoc2NvcGUuZmlsdGVyZWRQcm9maWxlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZvcmNlICYmICghc2NvcGUubG9hZGluZygpIHx8IHNjb3BlLnByb2ZpbGVzLmxlbmd0aCA+IDEpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZm9yY2UgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLm9wZW47XG4gICAgfVxuXG4gICAgc2V0IG9wZW5PclNpbmdsZShvcGVuOmJvb2xlYW4pIHtcbiAgICAgIGlmICh0aGlzLnNjb3BlLmZpbHRlcmVkUHJvZmlsZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHRoaXMuZm9yY2UgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5vcGVuID0gb3BlbjtcbiAgICB9XG4gIH1cblxuICBjbGFzcyBQcm9maWxlVmlld3Mge1xuICAgIHNlbGVjdGVkVGFnczpzdHJpbmdbXSA9IFtdO1xuICAgIHByb2ZpbGVWaWV3czpPYmplY3QgICA9IHt9O1xuICB9XG5cbiAgbW9kdWxlLnNlcnZpY2UoJ3Byb2ZpbGVzJywgUHJvZmlsZXMpO1xuICBtb2R1bGUuc2VydmljZSgncHJvZmlsZVZpZXdzJywgUHJvZmlsZVZpZXdzKTtcblxuICAvLyBFeHBvc2UganMteWFtbCBhcyBjb25zdGFudCBmb3IgaW5qZWN0aW9uXG4gIG1vZHVsZS5jb25zdGFudCgnanN5YW1sJywganN5YW1sKTtcblxuICBtb2R1bGUuZmlsdGVyKCdmaWx0ZXJDb2xsZWN0aW9uJywgKCkgPT4gKGNvbGxlY3Rpb24sIHRleHQpID0+XG4gICAgQ29yZS5pc0JsYW5rKHRleHQpXG4gICAgICA/IGNvbGxlY3Rpb25cbiAgICAgIDogXy5maWx0ZXIoY29sbGVjdGlvbiwgaXRlbSA9PiBGaWx0ZXJIZWxwZXJzLnNlYXJjaE9iamVjdChpdGVtLCB0ZXh0KSkpO1xuXG4gIG1vZHVsZS5jb250cm9sbGVyKCdQcm9maWxlcy5Qcm9maWxlc0NvbnRyb2xsZXInLFxuICAgICAgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ21hcmtlZCcsICckc2NlJywgJ3Byb2ZpbGVzJywgJ3Byb2ZpbGVWaWV3cycsXG4gICAgICAgKCRzY29wZSwgJGxvY2F0aW9uLCBtYXJrZWQsICRzY2UsIHByb2ZpbGVzOiBQcm9maWxlcywgcHJvZmlsZVZpZXdzOiBQcm9maWxlVmlld3MpID0+IHtcbiAgICAkc2NvcGUudGFicyA9IGNyZWF0ZVByb2ZpbGVzU3ViTmF2QmFycygkc2NvcGUubmFtZXNwYWNlLCAkc2NvcGUucHJvamVjdElkKTtcbiAgICAvLyBBc3NvY2lhdGUgdGhpcyBjb250cm9sbGVyIHNjb3BlIHRvIHRoZSBGb3JnZVByb2plY3RTZXJ2aWNlXG4gICAgRm9yZ2UudXBkYXRlRm9yZ2VQcm9qZWN0KCRzY29wZSk7XG4gICAgJHNjb3BlLmdpdFJlc3RVcmwgPSBwYXRoID0+IFdpa2kuZ2l0UmVzdFVSTCgkc2NvcGUsIHBhdGgpO1xuXG4gICAgJHNjb3BlLnByb2ZpbGVzID0gcHJvZmlsZXMuZGF0YTtcbiAgICAkc2NvcGUuc2VsZWN0aW9uID0gcHJvZmlsZXMuY2FydDtcblxuICAgICRzY29wZS5zZWxlY3RlZFRhZ3MgPSBwcm9maWxlVmlld3Muc2VsZWN0ZWRUYWdzO1xuICAgICRzY29wZS5wcm9maWxlVmlld3MgPSBwcm9maWxlVmlld3MucHJvZmlsZVZpZXdzO1xuXG4gICAgU2VsZWN0aW9uSGVscGVycy5kZWNvcmF0ZSgkc2NvcGUpO1xuICAgICRzY29wZS5pc0JsYW5rID0gQ29yZS5pc0JsYW5rO1xuICAgICRzY29wZS5sb2FkaW5nID0gKCkgPT4gcHJvZmlsZXMubG9hZGluZztcbiAgICAkc2NvcGUud2lraUxpbmsgPSBwYXRoID0+IFdpa2kudmlld0xpbmsoJHNjb3BlLnByb2plY3RJZCwgJHNjb3BlLmJyYW5jaCwgcGF0aCwgJGxvY2F0aW9uKTtcblxuICAgIGxldCB3aWtpID0gbmV3IFdpa2kuR2l0V2lraVJlcG9zaXRvcnkoJHNjb3BlKTtcblxuICAgICRzY29wZS5sb2FkU3VtbWFyeSA9IChwcm9maWxlOiBQcm9maWxlKSA9PiB7XG4gICAgICBpZiAocHJvZmlsZS5zdW1tYXJ5VXJsKSB7XG4gICAgICAgIGxldCByZW5kZXJlciA9IG5ldyBtYXJrZWQuUmVuZGVyZXIoKTtcbiAgICAgICAgLy8gQWRhcHQgdGhlIHJlbGF0aXZlIGltYWdlIFVSTHMgdG8gcmV0cmlldmUgY29udGVudCBmcm9tIHRoZSBGb3JnZSBBUElcbiAgICAgICAgcmVuZGVyZXIuaW1hZ2UgPSAoaHJlZjogc3RyaW5nLCB0aXRsZTogc3RyaW5nLCB0ZXh0OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICBsZXQgdXJpID0gbmV3IFVSSShocmVmKTtcbiAgICAgICAgICBpZiAodXJpLmlzKCdyZWxhdGl2ZScpKSB7XG4gICAgICAgICAgICBpZiAoXy5zdGFydHNXaXRoKHVyaS5wYXRoKCksICcvJykpIHtcbiAgICAgICAgICAgICAgdXJpLnNlZ21lbnQoWydwcm9maWxlcycsIC4uLnVyaS5zZWdtZW50KCldKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHVyaSA9IHVyaS5hYnNvbHV0ZVRvKFVybEhlbHBlcnMuam9pbihwcm9maWxlLnBhdGgsICcvJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gR2V0IHRoZSBpbWFnZSBVUkwgZm9yIHRoZSBGb3JnZSBSRVNUIEFQSVxuICAgICAgICAgICAgbGV0IHNyYyA9IFdpa2kuZ2l0UmVzdFVSTCgkc2NvcGUsIHVyaS5ub3JtYWxpemUoKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIC8vIGFuZCB1c2UgVVJMLmNyZWF0ZU9iamVjdFVSTCB2aWEgYW5ndWxhci1pbWctaHR0cC1zcmMgdG8gZ2V0IGFuIFVSTCBmb3IgdGhlIGltYWdlIEJMT0JcbiAgICAgICAgICAgIHJldHVybiAnPGltZyBzcmM9XCJpbWcvbG9hZGVyLnN2Z1wiIGh0dHAtc3JjPVwiJyArIHNyYyArICdcIiBhbHQ9XCInICsgKHRpdGxlID8gdGl0bGUgOiB0ZXh0KSArICdcIiAvPic7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNpbXBseSByZXR1cm4gdGhlIGltZyB0YWcgd2l0aCB0aGUgb3JpZ2luYWwgbG9jYXRpb25cbiAgICAgICAgICAgIHJldHVybiAnPGltZyBzcmM9XCInICsgaHJlZiArICdcIiBhbHQ9XCInICsgKHRpdGxlID8gdGl0bGUgOiB0ZXh0KSArICdcIiAvPic7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHdpa2kuZ2V0UGFnZSgkc2NvcGUuYnJhbmNoLCBwcm9maWxlLnN1bW1hcnlVcmwsIG51bGwsXG4gICAgICAgICAgICBkYXRhID0+IHByb2ZpbGUuc3VtbWFyeSA9IG1hcmtlZChkYXRhLnRleHQsIHtyZW5kZXJlcjogcmVuZGVyZXJ9KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9maWxlLnN1bW1hcnkgPSAnPGVtPm5vIHN1bW1hcnk8L2VtPic7XG4gICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5hc3NpZ25Qcm9maWxlcyA9ICgpID0+ICRsb2NhdGlvbi5wYXRoKFVybEhlbHBlcnMuam9pbignL3dvcmtzcGFjZXMnLCAkc2NvcGUubmFtZXNwYWNlLCAncHJvamVjdHMnLCAkc2NvcGUucHJvamVjdElkLCAncHJvZmlsZXMnLCAnY29udGFpbmVycycsICdhc3NpZ25Qcm9maWxlcycpKTtcblxuICAgICRzY29wZS5kZXBsb3lQcm9maWxlcyA9ICgpID0+ICRsb2NhdGlvbi5wYXRoKFVybEhlbHBlcnMuam9pbignL3dvcmtzcGFjZXMnLCAkc2NvcGUubmFtZXNwYWNlLCAncHJvamVjdHMnLCAkc2NvcGUucHJvamVjdElkLCAncHJvZmlsZXMnLCAnY29udGFpbmVycycsICdkZXBsb3lQcm9maWxlcycpKTtcblxuICAgIGxldCB1cGRhdGVQcm9maWxlVmlld3MgPSBwcm9maWxlcyA9PiBfLnJlZHVjZShwcm9maWxlcywgKHByb2ZpbGVWaWV3czogUHJvZmlsZVZpZXdzLCBwcm9maWxlOiBQcm9maWxlKSA9PiB7XG4gICAgICBpZiAoIV8uaGFzKHByb2ZpbGVWaWV3cywgcHJvZmlsZS5pZCkpIHtcbiAgICAgICAgcHJvZmlsZVZpZXdzW3Byb2ZpbGUuaWRdID0gbmV3IFByb2ZpbGVWaWV3KCRzY29wZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9maWxlVmlld3NbcHJvZmlsZS5pZF0uc2NvcGUgPSAkc2NvcGU7XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJvZmlsZVZpZXdzO1xuICAgIH0sICRzY29wZS5wcm9maWxlVmlld3MpO1xuXG4gICAgXy5rZXlzKCRzY29wZS5wcm9maWxlVmlld3MpLmZvckVhY2goa2V5ID0+IGRlbGV0ZSAkc2NvcGUucHJvZmlsZVZpZXdzW2tleV0pO1xuICAgICRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKCdwcm9maWxlcycsIHVwZGF0ZVByb2ZpbGVWaWV3cyk7XG5cbiAgICAkc2NvcGUucmVmcmVzaCA9ICgpID0+IHByb2ZpbGVzLmxvYWQod2lraSwgJHNjb3BlLmJyYW5jaCk7XG5cbiAgICBpZiAoIShwcm9maWxlcy5sb2FkZWQgfHwgcHJvZmlsZXMubG9hZGluZykpIHtcbiAgICAgICRzY29wZS5yZWZyZXNoKCk7XG4gICAgfVxuICB9XSlcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vaW5jbHVkZXMudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicHJvZmlsZXNQbHVnaW4udHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicHJvZmlsZXNIZWxwZXJzLnRzXCIvPlxuXG5tb2R1bGUgUHJvZmlsZXMge1xuXG4gIG1vZHVsZS5jb250cm9sbGVyKCdQcm9maWxlcy5TZXR0aW5nc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICdqc3lhbWwnLCAoJHNjb3BlLCB5YW1sKSA9PiB7XG4gICAgICAkc2NvcGUudGFicyA9IGNyZWF0ZVByb2ZpbGVzU3ViTmF2QmFycygkc2NvcGUubmFtZXNwYWNlLCAkc2NvcGUucHJvamVjdElkKTtcbiAgICAgIC8vIEFzc29jaWF0ZSB0aGlzIGNvbnRyb2xsZXIgc2NvcGUgdG8gdGhlIEZvcmdlUHJvamVjdFNlcnZpY2VcbiAgICAgIEZvcmdlLnVwZGF0ZUZvcmdlUHJvamVjdCgkc2NvcGUpO1xuXG4gICAgICBjb25zdCB3aWtpUmVwb3NpdG9yeSA9IG5ldyBXaWtpLkdpdFdpa2lSZXBvc2l0b3J5KCRzY29wZSk7XG4gIFxuICAgICAgLy8gV2UgdXNlICRzY29wZS5sb2FkaW5nIHRvIHJlZmVyZW5jZSBjb3VudCBsb2FkaW5nIG9wZXJhdGlvbnMgc28gdGhhdCB3ZSBrbm93IHdoZW4gYWxsIHRoZSBkYXRhXG4gICAgICAvLyBmb3IgdGhpcyB2aWV3IGhhcyBiZWVuIGZldGNoZWQuXG4gICAgICAkc2NvcGUubG9hZGluZyA9IDA7XG5cbiAgICAgICRzY29wZS5jb25maWcgPSB7XG4gICAgICAgIHN0eWxlOiBIYXd0aW9Gb3Jtcy5Gb3JtU3R5bGUuU1RBTkRBUkQsXG4gICAgICAgIG1vZGU6IEhhd3Rpb0Zvcm1zLkZvcm1Nb2RlLlZJRVcsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAnZ2l0LmdpdFJlbW90ZVVyaVBhdHRlcm4nOiB7XG4gICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnR2l0IHJlbW90ZSBVUkkgcGF0dGVybiBmb3IgYWxsIGNvbnRhaW5lcnMsIG5hbWUgaXMgdGhlIG5hbWUgb2YgdGhlIGNvbnRhaW5lciwgZS5nLiByb290J1xuICAgICAgICAgIH0sXG4gICAgICAgICAgJ2dpdC5nb2dzVXNlcm5hbWUnOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnZ2l0LmdvZ3NQYXNzd29yZCc6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgJ21hdmVuLmdyb3VwSWQnOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnbWF2ZW4udmVyc2lvbic6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZydcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgICRzY29wZS5yZWZyZXNoID0gKCkgPT4ge1xuICAgICAgICAkc2NvcGUubG9hZGluZysrO1xuICAgICAgICB3aWtpUmVwb3NpdG9yeS5nZXRQYWdlKCRzY29wZS5icmFuY2gsICdmYWJyaWM4LXByb2ZpbGVzLnlhbWwnLCBudWxsLCBkYXRhID0+IHtcbiAgICAgICAgICAkc2NvcGUubG9hZGluZy0tO1xuICAgICAgICAgICRzY29wZS5zZXR0aW5ncyA9IGRhdGEudGV4dDtcbiAgICAgICAgICAkc2NvcGUucHJvcGVydGllcyA9IHlhbWwuc2FmZUxvYWQoZGF0YS50ZXh0KTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUuJHdhdGNoKCdsb2FkaW5nJywgdmFsdWUgPT4gJHNjb3BlLmNvbmZpZy5tb2RlID0gdmFsdWUgPiAwXG4gICAgICAgID8gSGF3dGlvRm9ybXMuRm9ybU1vZGUuVklFV1xuICAgICAgICA6IEhhd3Rpb0Zvcm1zLkZvcm1Nb2RlLkVESVQpO1xuXG4gICAgICAkc2NvcGUuc2F2ZSA9ICgpID0+IHtcbiAgICAgICAgLy8gdGhhdCBzaG91bGQgaWRlYWxseSBwcmVzZXJ2ZSBjb21tZW50cyBpbiB0aGUgZXhpc3RpbmcgZmlsZVxuICAgICAgICBjb25zdCBlZGl0ID0geWFtbC5zYWZlRHVtcCgkc2NvcGUucHJvcGVydGllcyk7XG4gICAgICAgIGlmIChlZGl0ICE9ICRzY29wZS5zZXR0aW5ncykge1xuICAgICAgICAgICRzY29wZS5sb2FkaW5nKys7XG4gICAgICAgICAgLy8gVE9ETzogdXNlIFBhdHRlcm5GbHkgbm90aWZpY2F0aW9uc1xuICAgICAgICAgIHdpa2lSZXBvc2l0b3J5LnB1dFBhZ2UoJHNjb3BlLmJyYW5jaCwgJ2ZhYnJpYzgtcHJvZmlsZXMueWFtbCcsIGVkaXQsICdVcGRhdGUgcHJvZmlsZXMgc2V0dGluZ3MnLFxuICAgICAgICAgICAgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICBXaWtpLm9uQ29tcGxldGUocmVzcG9uc2UpO1xuICAgICAgICAgICAgICBDb3JlLm5vdGlmaWNhdGlvbignc3VjY2VzcycsIHJlc3BvbnNlLmZpbGUgKyAnIHNhdmVkIScpO1xuICAgICAgICAgICAgICAkc2NvcGUubG9hZGluZy0tO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgQ29yZS5ub3RpZmljYXRpb24oJ2Vycm9yJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAkc2NvcGUubG9hZGluZy0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgICRzY29wZS5yZWZyZXNoKCk7XG4gICAgfVxuICBdKTtcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=

angular.module("hawtio-profiles-templates", []).run(["$templateCache", function($templateCache) {$templateCache.put("plugins/profiles/html/assignProfiles.html","<div ng-controller=\"Profiles.AssignProfilesController\">\n\n  <div class=\"row\">\n    <div template-cache-include=\"plugins/kubernetes/html/tabs.html\"></div>\n  </div>\n\n  <h2>Assign profile(s) to container(s)</h2>\n\n  <div class=\"row\">\n    <form class=\"form-horizontal\">\n      <div class=\"form-group has-feedback\" ng-class=\"profiles.cart.length > 0 ? \'has-success\' : \'has-error\'\">\n        <label class=\"control-label col-sm-2\">Profile(s)</label>\n        <div class=\"col-sm-9\">\n          <div class=\"input-group\">\n            <ui-select multiple sortable=\"true\" ng-model=\"profiles.cart\" theme=\"bootstrap\" aria-describedby=\"selectProfilesStatus\">\n              <ui-select-match placeholder=\"Select profiles...\">\n                <img ng-if=\"$item.iconUrl\" width=\"16px\" height=\"16px\"\n                     class=\"profile-logo\" style=\"max-width: 16px; max-height: 16px\"\n                     src=\"img/loader.svg\"\n                     http-src=\"{{gitRestUrl($item.iconUrl)}}\" media-type=\"image/svg+xml\" />\n                <img ng-if=\"!$item.iconUrl\" width=\"16px\" height=\"16px\"\n                     class=\"profile-logo\" style=\"max-width: 16px; max-height: 16px\"\n                     src=\"img/fabric8_icon.svg\" />\n                {{$item.id}}\n              </ui-select-match>\n              <ui-select-choices group-by=\"profileGroups\" repeat=\"profile in (profiles.data | filter: $select.search) track by profile.id\">\n                <img ng-if=\"profile.iconUrl\"\n                     class=\"profile-logo\" style=\"max-width: 32px; max-height: 32px\"\n                     src=\"img/loader.svg\"\n                     http-src=\"{{gitRestUrl(profile.iconUrl)}}\" media-type=\"image/svg+xml\" />\n                <img ng-if=\"!profile.iconUrl\"\n                     class=\"profile-logo\" style=\"max-width: 32px; max-height: 32px\"\n                     src=\"img/fabric8_icon.svg\" />\n                <span ng-bind-html=\"profile.id | highlight: $select.search\"></span>\n              </ui-select-choices>\n              <ui-select-no-choice>\n                <a ng-click=\"refreshProfiles()\">No profile is available. Click to refresh available profiles.</a>\n              </ui-select-no-choice>\n            </ui-select>\n            <span class=\"glyphicon form-control-feedback\" ng-class=\"profiles.cart.length > 0 ? \'glyphicon-ok\' : \'glyphicon-remove\'\" aria-hidden=\"true\"></span>\n            <span id=\"selectProfilesStatus\" class=\"sr-only\">{{profiles.cart.length > 0 ? \'(success)\' : \'(error)\'}}</span>\n            <span class=\"input-group-addon\">\n              <span class=\"fa fa-refresh\" ng-click=\"refreshProfiles()\" ng-class=\"{\'fa-spin\': profiles.loading}\"></span>\n            </span>\n          </div>\n          <span ng-show=\"profiles.cart.length == 0\" class=\"help-block\">At least one profile is required</span>\n        </div>\n      </div>\n      <div class=\"form-group has-feedback\" ng-class=\"containers.cart.length > 0 ? \'has-success\' : \'has-error\'\">\n        <label class=\"control-label col-sm-2\">Container(s)</label>\n        <div class=\"col-sm-9\">\n          <div class=\"input-group\">\n            <ui-select multiple sortable=\"true\" ng-model=\"containers.cart\" theme=\"bootstrap\" aria-describedby=\"selectContainersStatus\">\n              <ui-select-match placeholder=\"Select containers...\">{{$item.name}}</ui-select-match>\n              <ui-select-choices repeat=\"container in (containers.data | filter: $select.search)\">\n                <div ng-bind-html=\"container.name | highlight: $select.search\"></div>\n              </ui-select-choices>\n              <ui-select-no-choice>\n                No container is available! Click on the refresh button\n              </ui-select-no-choice>\n            </ui-select>\n            <span class=\"glyphicon form-control-feedback\" ng-class=\"containers.cart.length > 0 ? \'glyphicon-ok\' : \'glyphicon-remove\'\" aria-hidden=\"true\"></span>\n            <span id=\"selectContainersStatus\" class=\"sr-only\">{{containers.cart.length > 0 ? \'(success)\' : \'(error)\'}}</span>\n            <span class=\"input-group-addon\">\n              <span class=\"fa fa-refresh\" ng-click=\"refreshContainers()\" ng-class=\"{\'fa-spin\': containers.loading}\"></span>\n            </span>\n          </div>\n          <span ng-show=\"containers.cart.length == 0\" class=\"help-block\">At least one container must be selected</span>\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <div class=\"col-sm-offset-2 col-sm-9\">\n          <button class=\"btn btn-primary pull-right\" ng-disabled=\"profiles.cart.length == 0 || containers.cart.length == 0 || containers.loading || saving()\" ng-click=\"assignProfiles()\"><i class=\"fa fa-cloud-upload\"></i> Assign</button>\n        </div>\n      </div>\n    </form>\n  </div>\n\n  <h2>Containers <i ng-show=\"containers.loading\" class=\"fa fa-refresh fa-spin\"></i> <span class=\"badge\">{{containers.cart.length + \'/\' + containers.data.length}}</span></h2>\n\n  <div class=\"row\" block-ui=\"blockTable\">\n    <div ng-include=\"\'plugins/profiles/html/containerList.html\'\"></div>\n  </div>\n\n</div>\n");
$templateCache.put("plugins/profiles/html/containerList.html","<div ng-controller=\"Profiles.ContainerListController\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <table class=\"table table-bordered table-striped\" hawtio-simple-table=\"tableConfig\"></table>\n    </div>\n  </div>\n</div>\n\n<script type=\"text/ng-template\" id=\"containerName.html\">\n  <div class=\"ngCellText nowrap\">\n    <a ng-if=\"row.entity.deployment\" href=\"\" title=\"View details for {{row.entity.name}}\"\n       ng-href=\"{{row.entity.deployment | kubernetesPageLink}}\">\n      {{row.entity.name}}\n    </a>\n    <span ng-if=\"!row.entity.deployment\">{{row.entity.name}}</span>\n  </div>\n</script>\n\n<script type=\"text/ng-template\" id=\"containerPods.html\">\n  <div class=\"ngCellText nowrap\">\n    <i ng-if=\"!row.entity.deployment || row.entity.deployment.$pods.length === 0\" class=\"fa fa-power-off\"></i>\n    <ul class=\"plain-list\">\n      <li ng-repeat=\"pod in row.entity.deployment.$pods\">\n        <i ng-class=\"pod.$statusCss\"></i>\n        <a href=\"\" title=\"View details for {{pod.metadata.name}}\"\n           ng-href=\"{{pod | kubernetesPageLink}}\">\n          {{pod.metadata.name}}\n        </a>\n        <span ng-show=\"pod.$jolokiaUrl && pod.$ready\" ng-controller=\"Kubernetes.ConnectController\">\n          <!--\n            Redirects to the OpenShift JVM plugin for the corresponding pod\n            Requires to use the \'serve-site\' task for local development\n          -->\n          <a class=\"clickable\"\n             ng-click=\"doConnect(pod)\"\n             title=\"Open a new window and connect to this container\">\n            <i class=\"fa fa-sign-in\"></i>\n          </a>\n        </span>\n        <span ng-show=\"pod.status.phase === \'Running\'\" ng-controller=\"Kubernetes.TermController\">\n          <span ng-repeat=\"container in pod.spec.containers\" ng-show=\"canConnectTo(container)\">\n            <a href=\"\" ng-href=\"{{pod | kubernetesPageLink:\'term\':container.name}}\">\n              <i class=\"fa fa-television clickable\" title=\"Open up a terminal to {{pod.metadata.name}}:{{container.name}}\"></i>\n            </a>\n          </span>\n        </span>\n        <span ng-show=\"pod.status.phase === \'Running\'\" ng-controller=\"Kubernetes.PodLogLinkController\">\n          <span ng-repeat=\"container in pod.spec.containers\">\n            <a href=\"\" ng-href=\"{{pod | kubernetesPageLink:\'log\':container.name}}\">\n              <i class=\"fa fa-file-text clickable\" title=\"Open up the log for {{pod.metadata.name}}:{{container.name}}\"></i>\n            </a>\n          </span>\n        </span>\n      </li>\n    </ul>\n  </div>\n</script>\n\n<script type=\"text/ng-template\" id=\"containerTypes.html\">\n  <div class=\"ngCellText nowrap\">\n    <ul class=\"plain-list\">\n      <li class=\"inline-block\" ng-repeat=\"icon in row.entity.icons\">\n        <hawtio-icon config=\"icon\"/>\n      </li>\n    </ul>\n  </div>\n</script>\n\n<script type=\"text/ng-template\" id=\"containerProfiles.html\">\n  <div class=\"ngCellText nowrap\">\n    <ul class=\"plain-list\">\n      <li class=\"inline-block\" ng-repeat=\"profile in row.entity.profiles\">\n        <button ng-if=\"profile.id\" class=\"btn btn-link\" ng-click=\"$parent.$parent.$parent.$parent.viewProfile(profile);$event.stopPropagation();\">{{profile.id}} <i class=\"fa fa-files-o\"></i></button>\n        <span ng-if=\"!profile.id\" class=\"text-muted\">\n          {{profile}}\n          <i ng-if=\"$parent.$parent.$parent.$parent.profiles.loading\" class=\"fa fa-refresh fa-spin\"></i>\n          <i ng-if=\"$parent.$parent.$parent.$parent.profiles.loaded\" class=\"fa fa-chain-broken\"></i>\n        </span>\n      </li>\n    </ul>\n  </div>\n</script>");
$templateCache.put("plugins/profiles/html/containers.html","<div ng-controller=\"Profiles.ContainersController\">\n\n  <div class=\"row\">\n    <div template-cache-include=\"plugins/kubernetes/html/tabs.html\"></div>\n  </div>\n\n  <button class=\"btn btn-primary pull-right\" ng-disabled=\"containers.loading\" ng-click=\"refresh()\">\n    <i class=\"fa fa-refresh\" ng-class=\"{\'fa-spin\': containers.loading}\"></i> Refresh\n  </button>\n\n  <h2>Containers <i ng-show=\"containers.loading\" class=\"fa fa-refresh fa-spin\"></i> <span class=\"badge\" ng-show=\"containers.data.length > 0\">{{containers.length}}</span></h2>\n\n  <div class=\"row\" block-ui=\"blockTable\">\n    <div ng-include=\"\'plugins/profiles/html/containerList.html\'\"></div>\n  </div>\n\n  <div class=\"row pull-right\">\n    <button class=\"btn btn-link\"\n            type=\"button\"\n            ng-disabled=\"containers.loading || saving()\"\n            ng-click=\"createContainers()\"\n            title=\"Create new container(s) from a set of profiles\">\n      Create <i class=\"fa fa-cubes\"></i>\n    </button>\n    <button class=\"btn btn-link\"\n            type=\"button\"\n            ng-disabled=\"!containers.cart.length || containers.loading || saving()\"\n            ng-click=\"assignProfiles()\"\n            title=\"Modify the selected container(s) by changing the set of profiles\">\n      Assign profiles <i class=\"fa fa-magic\"></i>\n    </button>\n    <button class=\"btn btn-danger\"\n            type=\"button\"\n            ng-disabled=\"!containers.cart.length || containers.loading || saving()\"\n            ng-click=\"deleteContainers()\"\n            title=\"Delete the selected container(s)\">\n      Delete <i class=\"fa fa-times-circle\"></i>\n    </button>\n  </div>\n\n</div>");
$templateCache.put("plugins/profiles/html/deployProfiles.html","<div ng-controller=\"Profiles.DeployProfilesController\">\n\n  <div class=\"row\">\n    <div template-cache-include=\"plugins/kubernetes/html/tabs.html\"></div>\n  </div>\n\n  <h2>Deploy profile(s) into new container(s)</h2>\n\n  <div class=\"row\">\n    <form class=\"form-horizontal\">\n      <div class=\"form-group has-feedback\" ng-class=\"profiles.cart.length > 0 ? \'has-success\' : \'has-error\'\">\n        <label class=\"control-label col-sm-2\">Profile(s)</label>\n        <div class=\"col-sm-9\">\n          <div class=\"input-group\">\n            <ui-select multiple sortable=\"true\" ng-model=\"profiles.cart\" theme=\"bootstrap\" aria-describedby=\"selectProfilesStatus\">\n              <ui-select-match placeholder=\"Select profiles...\">\n                <img ng-if=\"$item.iconUrl\" width=\"16px\" height=\"16px\"\n                     class=\"profile-logo\" style=\"max-width: 16px; max-height: 16px\"\n                     src=\"img/loader.svg\"\n                     http-src=\"{{gitRestUrl($item.iconUrl)}}\" media-type=\"image/svg+xml\" />\n                <img ng-if=\"!$item.iconUrl\" width=\"16px\" height=\"16px\"\n                     class=\"profile-logo\" style=\"max-width: 16px; max-height: 16px\"\n                     src=\"img/fabric8_icon.svg\" />\n                {{$item.id}}\n              </ui-select-match>\n              <ui-select-choices group-by=\"profileGroups\" repeat=\"profile in (profiles.data | filter: $select.search) track by profile.id\">\n                <img ng-if=\"profile.iconUrl\"\n                     class=\"profile-logo\" style=\"max-width: 32px; max-height: 32px\"\n                     src=\"img/loader.svg\"\n                     http-src=\"{{gitRestUrl(profile.iconUrl)}}\" media-type=\"image/svg+xml\" />\n                <img ng-if=\"!profile.iconUrl\"\n                     class=\"profile-logo\" style=\"max-width: 32px; max-height: 32px\"\n                     src=\"img/fabric8_icon.svg\" />\n                <span ng-bind-html=\"profile.id | highlight: $select.search\"></span>\n              </ui-select-choices>\n              <ui-select-no-choice>\n                <a ng-click=\"refreshProfiles()\">No profile is available. Click to refresh available profiles.</a>\n              </ui-select-no-choice>\n            </ui-select>\n            <span class=\"glyphicon form-control-feedback\" ng-class=\"profiles.cart.length > 0 ? \'glyphicon-ok\' : \'glyphicon-remove\'\" aria-hidden=\"true\"></span>\n            <span id=\"selectProfilesStatus\" class=\"sr-only\">{{profiles.cart.length > 0 ? \'(success)\' : \'(error)\'}}</span>\n            <span class=\"input-group-addon\">\n              <span class=\"fa fa-refresh\" ng-click=\"refreshProfiles()\" ng-class=\"{\'fa-spin\': profiles.loading}\"></span>\n            </span>\n          </div>\n          <span ng-show=\"profiles.cart.length == 0\" class=\"help-block\">At least one profile is required</span>\n        </div>\n      </div>\n      <div class=\"form-group has-feedback\" ng-class=\"(status = select.names.length > 0 ? ((existing = existingContainers(select.names)).length > 0 ? \'has-warning\' : \'has-success\') : \'has-error\')\">\n        <label class=\"control-label col-sm-2\">Name(s)</label>\n        <div class=\"col-sm-9\">\n          <ui-select multiple tagging tagging-label=\"false\" tagging-tokens=\"ENTER|SPACE\" ng-model=\"select.names\" theme=\"bootstrap\" aria-describedby=\"selectNamesStatus\">\n            <ui-select-match placeholder=\"Enter names...\">\n              <span ng-if=\"existing.indexOf($item) >= 0\" class=\"glyphicon glyphicon-alert\" ng-class=\"{\'text-warning\': $selectMultiple.activeMatchIndex !== $index}\" aria-hidden=\"true\"></span>\n              <span ng-class=\"{\'text-warning\': existing.indexOf($item) >= 0 && $selectMultiple.activeMatchIndex !== $index}\">{{$item}}</span>\n            </ui-select-match>\n            <ui-select-choices repeat=\"item in []\"></ui-select-choices>\n          </ui-select>\n          <span class=\"glyphicon form-control-feedback\" ng-class=\"select.names.length > 0 ? (existing.length > 0 ? \'glyphicon-warning-sign\' : \'glyphicon-ok\') : \'glyphicon-remove\'\" aria-hidden=\"true\"></span>\n          <span id=\"selectNamesStatus\" class=\"sr-only\">{{select.names.length > 0 ? \'(success)\' : \'(error)\'}}</span>\n          <span ng-show=\"select.names.length == 0\" class=\"help-block\">At least one container name is required</span>\n          <span ng-show=\"select.names.length != 0 && existing.length > 0\" class=\"help-block\">Some container profiles will be overwritten</span>\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <div class=\"col-sm-offset-2 col-sm-9\">\n          <button class=\"btn btn-primary pull-right\" ng-disabled=\"profiles.cart.length == 0 || select.names.length == 0 || containers.loading || saving()\" ng-click=\"deployProfiles()\"><i class=\"fa fa-cloud-upload\"></i> Deploy</button>\n        </div>\n      </div>\n    </form>\n  </div>\n\n  <h2>Existing containers <i ng-show=\"containers.loading\" class=\"fa fa-refresh fa-spin\"></i> <span class=\"badge\">{{containers.data.length}}</span></h2>\n\n  <div class=\"row\" block-ui=\"blockTable\">\n    <div ng-include=\"\'plugins/profiles/html/containerList.html\'\"></div>\n  </div>\n\n</div>\n");
$templateCache.put("plugins/profiles/html/profileSummary.html","<div class=\"row\">\n  <div class=\"col-md-2\">\n    <a ng-href=\"{{wikiLink(profile.path)}}\">Details...</a>\n    <!-- ideally angular-img-http-src would reuse the same BLOB for the same URLs though\n         it seems it creates a new one each time -->\n    <!-- TODO: use the fileExtensionTypeRegistry service to retrieve the MIME type -->\n    <img class=\"profile-logo\" ng-if=\"profile.iconUrl\" src=\"img/loader.svg\" http-src=\"{{gitRestUrl(profile.iconUrl)}}\" media-type=\"image/svg+xml\" />\n    <img class=\"profile-logo\" ng-if=\"!profile.iconUrl\" src=\"img/fabric8_icon.svg\" />\n  </div>\n\n  <div class=\"col-md-10\">\n    <i ng-hide=\"profile.summary\" class=\"fa fa-refresh fa-spin\"></i>\n    <!-- We need to use compile directive so that the http-src directive from angular-img-http-src applied -->\n    <div class=\"profile-summary\" ng-show=\"profile.summary\" compile=\"profile.summary\"></div>\n  </div>\n</div>");
$templateCache.put("plugins/profiles/html/profiles.html","<div ng-controller=\"Profiles.ProfilesController\">\n\n  <div class=\"row\">\n    <div template-cache-include=\"plugins/kubernetes/html/tabs.html\"></div>\n  </div>\n\n  <button class=\"btn btn-primary pull-right\" ng-disabled=\"loading()\" ng-click=\"refresh()\">\n    <i class=\"fa fa-refresh\" ng-class=\"{\'fa-spin\': loading()}\"></i> Refresh\n  </button>\n\n  <h2 class=\"inline-block\">\n    Profiles\n    <i ng-show=\"loading()\" class=\"fa fa-refresh fa-spin\"></i>\n    <span class=\"badge\" ng-show=\"profiles.length > 0\">{{selectedTags.length > 0 || !isBlank(searchFilter) ? (filteredProfiles = (profiles | selectedTags:\'tags\':selectedTags | filterCollection:searchFilter)).length + \' / \' + profiles.length : (filteredProfiles = profiles).length}}</span>\n    <hawtio-filter ng-model=\"searchFilter\"\n                   css-class=\"search-input\"\n                   placeholder=\"Search...\"\n                   save-as=\"profiles-search-filter\">\n    </hawtio-filter>\n  </h2>\n\n  <div>\n    <div class=\"row-fluid\">\n      <div class=\"col-md-8\">\n        <accordion close-others=\"false\">\n          <accordion-group ng-init=\"profileView = profileViews[profile.id]\" is-open=\"profileView.openOrSingle\" ng-repeat=\"profile in filteredProfiles\">\n            <accordion-heading>\n              <div class=\"pull-left\">\n                <i class=\"glyphicon\" ng-class=\"{\'glyphicon-chevron-down\': profileView.openOrSingle, \'glyphicon-chevron-right\': !profileView.openOrSingle}\"></i>\n              </div>\n              <div class=\"pull-right\">\n                <!-- See https://github.com/angular-ui/bootstrap/issues/3299 -->\n                <hawtio-tag-list tags=\"profile.tags\" selected=\"selectedTags\"\n                                 ng-click=\"$event.stopPropagation();$event.preventDefault();\"></hawtio-tag-list>\n                <input type=\"checkbox\" ng-checked=\"isInGroup(selection, profile)\"\n                       ng-click=\"toggleSelectionFromGroup(selection, profile);$event.stopPropagation();\">\n              </div>\n              <div class=\"ellipsis\">\n                {{profile.id}}\n              </div>\n            </accordion-heading>\n            <div ng-if=\"profileView.openOrSingle\" ng-include=\"\'plugins/profiles/html/profileSummary.html\'\" onload=\"loadSummary(profile)\"></div>\n          </accordion-group>\n        </accordion>\n      </div>\n\n      <div class=\"col-md-4\">\n        <div class=\"panel panel-default\">\n          <div class=\"panel-heading\">\n            <h3 class=\"panel-title\"><i class=\"fa fa-cart-arrow-down\"></i> Selection</h3>\n          </div>\n          <div class=\"panel-body\">\n            <div ng-hide=\"selection.length > 0\">\n              <em class=\"text-muted\">Select profiles...</em>\n            </div>\n            <ul class=\"plain-list\">\n              <li class=\"inline-block\" style=\"max-width: 100%\" ng-repeat=\"profile in selection\">\n                <span type=\"button\" style=\"max-width: 100%\" class=\"btn btn-default btn-xs ellipsis\">\n                  <span type=\"button\" class=\"close\" aria-label=\"Close\" ng-click=\"toggleSelectionFromGroup(selection, profile)\"><span aria-hidden=\"true\">&times;</span>\n                  </span>\n                  <img ng-if=\"profile.iconUrl\" width=\"16px\" height=\"16px\"\n                       class=\"profile-logo\" style=\"max-width: 16px; max-height: 16px\"\n                       src=\"img/loader.svg\"\n                       http-src=\"{{gitRestUrl(profile.iconUrl)}}\" media-type=\"image/svg+xml\" />\n                  <img ng-if=\"!profile.iconUrl\" width=\"16px\" height=\"16px\"\n                       class=\"profile-logo\" style=\"max-width: 16px; max-height: 16px\"\n                       src=\"img/fabric8_icon.svg\" />\n                  <span>\n                    {{profile.id}}\n                  </span>\n                </span>\n                <small><i ng-if=\"!$last\" class=\"fa fa-plus text-muted\"></i></small>\n                <span ng-if=\"$last\" type=\"button\" class=\"glyphicon glyphicon-trash text-muted\" ng-click=\"selection.length = 0\" aria-hidden=\"true\"></span>\n              </li>\n            </ul>\n            <div class=\"pull-right\">\n              <button class=\"btn btn-link\"\n                      type=\"button\"\n                      ng-disabled=\"!selection.length\"\n                      ng-click=\"deployProfiles()\"\n                      title=\"Deploy the selected profile(s) into new container(s)\">\n                Deploy <i class=\"fa fa-cubes\"></i>\n              </button>\n              <button class=\"btn btn-link\"\n                      type=\"button\"\n                      ng-disabled=\"!selection.length\"\n                      ng-click=\"assignProfiles()\"\n                      title=\"Assign the selected profile(s) to existing container(s)\">\n                Assign <i class=\"fa fa-magic\"></i>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"panel panel-default\">\n          <div class=\"panel-heading\">\n            <h3 class=\"panel-title\"><i class=\"fa fa-tags\"></i> Tags</h3>\n          </div>\n          <div class=\"panel-body\">\n            <hawtio-tag-filter class=\"tag-filter\"\n                               tags=\"tags\"\n                               selected=\"selectedTags\"\n                               collection=\"profiles\"\n                               collection-property=\"tags\">\n            </hawtio-tag-filter>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>");
$templateCache.put("plugins/profiles/html/settings.html","<div ng-controller=\"Profiles.SettingsController\">\n\n  <div class=\"row\">\n    <div template-cache-include=\"plugins/kubernetes/html/tabs.html\"></div>\n  </div>\n\n  <button class=\"btn btn-primary pull-right\" ng-disabled=\"loading != 0\" ng-click=\"refresh()\">\n    <i class=\"fa fa-refresh\" ng-class=\"{\'fa-spin\': loading != 0}\"></i> Refresh\n  </button>\n\n  <h2>Settings <i ng-hide=\"loading == 0\" class=\"fa fa-refresh fa-spin\"></i></h2>\n\n  <div>\n    Settings for building containers from Fabric8 profiles repository\n  </div>\n\n  <div class=\"row\">\n    <button class=\"btn btn-primary pull-right\"\n            title=\"Saves changes to profiles settings\"\n            ng-disabled=\"loading != 0\"\n            ng-click=\"save()\">\n        Save Changes\n    </button>\n  </div>\n\n  <div hawtio-form-2=\"config\" entity=\"properties\"></div>\n\n</div>");}]); hawtioPluginLoader.addModule("hawtio-profiles-templates");