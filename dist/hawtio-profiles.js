

var Profiles;
(function (Profiles) {
    function createProfilesSubNavBars(namespace, projectId) {
        return Developer.activateCurrent([
            {
                href: UrlHelpers.join(HawtioCore.documentBase(), '/workspaces', namespace, 'projects', projectId, 'profiles'),
                label: 'Profiles',
                title: 'Profiles'
            },
            {
                href: UrlHelpers.join(HawtioCore.documentBase(), '/workspaces', namespace, 'projects', projectId, 'profiles', 'containers'),
                label: 'Containers',
                title: 'Containers',
                isActive: function (item, path) { return _.startsWith(path, item.href); }
            },
            {
                href: UrlHelpers.join(HawtioCore.documentBase(), '/workspaces', namespace, 'projects', projectId, 'profiles', 'settings'),
                label: 'Settings',
                title: 'Settings'
            }
        ]);
    }
    Profiles.createProfilesSubNavBars = createProfilesSubNavBars;
    function parseProperties(content) {
        return content.split('\n').reduce(function (properties, line) {
            var property = /^([^#=]+)=(.*)$/.exec(line.trim());
            if (property) {
                properties[property[1].trim()] = property[2].trim();
            }
            return properties;
        }, {});
    }
    Profiles.parseProperties = parseProperties;
})(Profiles || (Profiles = {}));

var Profiles;
(function (Profiles) {
    Profiles.pluginName = 'profiles';
    Profiles.log = Logger.get(Profiles.pluginName);
    Profiles.templatePath = 'plugins/' + Profiles.pluginName + '/html/';
    Profiles.module = angular.module(Profiles.pluginName, ['hawtio-core', 'hawtio-ui', 'hawtio-forms', 'blockUI', 'ui.select', 'ngSanitize']);
    Profiles.module.config(['$routeProvider', 'blockUIConfig', function ($routeProvider, blockUIConfig) {
            blockUIConfig.autoBlock = false;
            blockUIConfig.delay = 0;
            var join = UrlHelpers.join;
            var route = Developer.createTabRoutingFunction(Profiles.templatePath);
            var base = '/workspaces/:namespace/projects/:projectId/profiles';
            Developer.customProjectSubTabFactories.push(function (context) {
                if (context.$scope) {
                    Forge.updateForgeProject(context.$scope);
                }
                return [{
                        isValid: function () { return context.projectLink && Developer.forgeReadyLink() && Forge.forgeProject().hasPerspective('fabric8-profiles'); },
                        href: join(context.projectLink, 'profiles'),
                        class: 'fa fa-code-fork',
                        label: 'Profiles',
                        title: 'Browse the profiles of this project',
                        isActive: function (subTab, path) { return _.startsWith(path, join(context.projectLink, 'profiles')); }
                    }];
            });
            $routeProvider
                .when(base, route('profiles.html', false))
                .when(join(base, 'containers', 'assignProfiles'), route('assignProfiles.html', false))
                .when(join(base, 'containers', 'deployProfiles'), route('deployProfiles.html', false))
                .when(join(base, 'containers'), route('containers.html', false))
                .when(join(base, 'settings'), route('settings.html', false));
        }]);
    Profiles.module.directive('templateCacheInclude', ['$compile', '$templateCache', function ($compile, $templateCache) { return ({
            restrict: 'A',
            priority: 400,
            compile: function (element, attrs) {
                var templateName = attrs.templateCacheInclude;
                var template = $templateCache.get(templateName);
                return function (scope, element) {
                    element.html(template);
                    $compile(element.contents())(scope);
                };
            }
        }); }
    ]);
    hawtioPluginLoader.addModule(Profiles.pluginName);
})(Profiles || (Profiles = {}));

var Profiles;
(function (Profiles) {
    Profiles.module.controller('Profiles.AssignProfilesController', ['$scope', '$location', '$templateCache', 'profiles', 'containers', 'blockUI', function ($scope, $location, $templateCache, profiles, containers, blockUI) {
            $scope.tabs = Profiles.createProfilesSubNavBars($scope.namespace, $scope.projectId);
            Forge.updateForgeProject($scope);
            $scope.gitRestUrl = function (path) { return Wiki.gitRestURL($scope, path); };
            $scope.profiles = profiles;
            $scope.containers = containers;
            $scope.selectable = true;
            $scope.profileGroups = function (profile) { return profile.tags.length > 0 ? profile.tags[0] : ''; };
            var saving = 0;
            $scope.saving = function () { return saving > 0; };
            var blockTable = blockUI.instances.get('blockTable');
            $scope.assignProfiles = function () {
                var wiki = new Wiki.GitWikiRepository($scope);
                var success = function (response) {
                    Wiki.onComplete(response);
                    Core.notification('success', response.file + ' saved!');
                    complete();
                };
                var failure = function (response) {
                    Core.notification('error', response);
                    complete();
                };
                var complete = function () {
                    if (--saving === 0) {
                        blockTable.message('Refreshing ...');
                        containers.load(wiki, $scope.branch).then(function () {
                            blockTable.stop();
                            $location.path(UrlHelpers.join('/workspaces', $scope.namespace, 'projects', $scope.projectId, 'profiles', 'containers'));
                        });
                    }
                };
                blockTable.start("Saving ...");
                containers.cart.forEach(function (container) {
                    saving++;
                    wiki.putPage($scope.branch, container.path, assignProfiles(container, profiles.cart), 'Assign profiles', success, failure);
                });
            };
            var assignProfiles = function (container, profiles) {
                return container.text.replace(/^(profiles)=(.*)$/m, function (match, key, value) { return key + '=' + profiles.map(function (profile) { return profile.id; }).join(' '); });
            };
            $scope.refreshContainers = function () { return containers.load(new Wiki.GitWikiRepository($scope), $scope.branch); };
            $scope.refreshProfiles = function () {
                if (!profiles.loading) {
                    profiles.load(new Wiki.GitWikiRepository($scope), $scope.branch);
                }
            };
            if (!(containers.loaded || containers.loading)) {
                $scope.refreshContainers();
            }
        }]);
})(Profiles || (Profiles = {}));

var Profiles;
(function (Profiles) {
    Profiles.module.controller('Profiles.ContainerListController', ['$scope', '$location', '$templateCache', 'profiles', 'containers', 'KubernetesModel',
        function ($scope, $location, $templateCache, profiles, containers, kubernetes) {
            $scope.viewProfile = function (profile) { return $location.path(Wiki.viewLink($scope.projectId, $scope.branch, profile.path, $location)); };
            $scope.profiles = profiles;
            $scope.containers = containers;
            $scope.tableConfig = {
                data: 'containers.data',
                showSelectionCheckbox: $scope.selectable || false,
                enableRowClickSelection: $scope.selectable || false,
                multiSelect: true,
                selectedItems: $scope.selectable ? containers.cart : [],
                filterOptions: {
                    filterText: $location.search()['q'] || ''
                },
                columnDefs: [
                    { field: 'name',
                        displayName: 'Name',
                        cellTemplate: $templateCache.get('containerName.html')
                    },
                    { field: 'pods',
                        displayName: 'Pods',
                        cellTemplate: $templateCache.get('containerPods.html')
                    },
                    { field: 'types',
                        displayName: 'Types',
                        cellTemplate: $templateCache.get('containerTypes.html')
                    },
                    { field: 'profiles',
                        displayName: 'Profiles',
                        cellTemplate: $templateCache.get('containerProfiles.html')
                    }
                ]
            };
            $scope.$watchCollection('profiles.data', function (profiles) {
                return containers.data.forEach(function (container) {
                    return profiles.forEach(function (profile) {
                        var i = _.indexOf(container.profiles, profile.id);
                        if (i >= 0) {
                            container.profiles[i] = profile;
                        }
                    });
                });
            });
            $scope.$watch('containers.cart', function (containers) {
                $scope.tableConfig.selectedItems = containers;
                $scope.$broadcast('hawtio.datatable.containers.data');
            });
            $scope.$on('kubernetesModelUpdated', function () {
                return _.filter(containers.data, function (container) { return !container.deployment; })
                    .forEach(function (container) { return container.deployment = kubernetes.getDeployment($scope.namespace || Kubernetes.currentKubernetesNamespace(), container.name); });
            });
            if (!(containers.loaded || containers.loading)) {
                $scope.refresh();
            }
        }]);
    Profiles.module.filter('kubernetesPageLink', function () { return function (entity, path1, path2) { return UrlHelpers.join(Kubernetes.entityPageLink(entity), path1, path2); }; });
})(Profiles || (Profiles = {}));

var Profiles;
(function (Profiles) {
    var icons = {
        camel: 'camel',
        jenkinsfile: 'jenkins',
        karaf: 'karaf'
    };
    var Containers = (function () {
        function Containers(profiles, kubernetes, $q) {
            var _this = this;
            this.loaded = false;
            this.loading = false;
            this.requests = 0;
            this.data = [];
            this.cart = [];
            this.load = function (wiki, branch, namespace) {
                _this.loading = true;
                _this.requests++;
                var data = [];
                var deferred = _this.$q.defer();
                wiki.getPage(branch, 'configs/containers', null, function (page) {
                    _.forEach(page.children, function (child) {
                        if (!child.directory && _.endsWith(child.name, '.cfg')) {
                            _this.requests++;
                            wiki.getPage(branch, child.path, null, function (page) {
                                var properties = Profiles.parseProperties(page.text);
                                var name = page.name.replace(/.cfg$/, '');
                                var container = {
                                    name: name,
                                    path: page.path,
                                    text: page.text,
                                    deployment: _this.kubernetes.getDeployment(namespace || Kubernetes.currentKubernetesNamespace(), name),
                                    profiles: _.map(properties['profiles'].split(' '), function (profile) { return _.find(_this.profiles.data, { id: profile }) || profile; }),
                                    types: properties['container-type'].split(' '),
                                    icons: properties['container-type'].split(' ').map(function (type) { return {
                                        title: type,
                                        type: 'img',
                                        src: 'img/icons/' + (type.toLowerCase() in icons ? icons[type.toLowerCase()] : 'java') + '.svg'
                                    }; })
                                };
                                if (container.deployment) {
                                    container.icons.push({
                                        type: 'img',
                                        src: container.deployment.$iconUrl
                                    });
                                }
                                data.push(container);
                                _this.complete(data);
                            });
                        }
                    });
                    _this.complete(data);
                    deferred.resolve();
                });
                return deferred.promise;
            };
            this.complete = function (data) {
                if (--_this.requests === 0) {
                    _this.data.length = 0;
                    (_a = _this.data).push.apply(_a, data);
                    _this.loading = false;
                    _this.loaded = true;
                }
                var _a;
            };
            this.profiles = profiles;
            this.kubernetes = kubernetes;
            this.$q = $q;
        }
        return Containers;
    }());
    Profiles.Containers = Containers;
    Profiles.module.service('containers', ['profiles', 'KubernetesModel', '$q', Containers]);
    Profiles.module.controller('Profiles.ContainersController', ['$scope', '$location', 'containers', 'blockUI',
        function ($scope, $location, containers, blockUI) {
            $scope.tabs = Profiles.createProfilesSubNavBars($scope.namespace, $scope.projectId);
            Forge.updateForgeProject($scope);
            $scope.containers = containers;
            $scope.selectable = true;
            var saving = 0;
            $scope.saving = function () { return saving > 0; };
            var blockTable = blockUI.instances.get('blockTable');
            $scope.createContainers = function () { return $location.path(UrlHelpers.join('/workspaces', $scope.namespace, 'projects', $scope.projectId, 'profiles', 'containers', 'deployProfiles')); };
            $scope.assignProfiles = function () { return $location.path(UrlHelpers.join('/workspaces', $scope.namespace, 'projects', $scope.projectId, 'profiles', 'containers', 'assignProfiles')); };
            $scope.deleteContainers = function () {
                var wiki = new Wiki.GitWikiRepository($scope);
                var success = function (response, container) {
                    Wiki.onComplete(response);
                    Core.notification('success', container + ' deleted!');
                    complete();
                };
                var failure = function (response) {
                    Core.notification('error', response);
                    complete();
                };
                var complete = function () {
                    if (--saving === 0) {
                        blockTable.message('Refreshing ...');
                        containers.load(wiki, $scope.branch).then(function () {
                            blockTable.stop();
                            $location.path(UrlHelpers.join('/workspaces', $scope.namespace, 'projects', $scope.projectId, 'profiles', 'containers'));
                        });
                    }
                };
                blockTable.start("Saving ...");
                containers.cart.forEach(function (container) {
                    saving++;
                    wiki.removePage($scope.branch, container.path, 'Delete container', function (response) { return success(response, container.name); });
                });
            };
            $scope.refresh = function () { return containers.load(new Wiki.GitWikiRepository($scope), $scope.branch, $scope.namespace); };
        }]);
})(Profiles || (Profiles = {}));

var Profiles;
(function (Profiles) {
    Profiles.module.controller('Profiles.DeployProfilesController', ['$scope', '$location', '$templateCache', 'profiles', 'containers', 'blockUI', function ($scope, $location, $templateCache, profiles, containers, blockUI) {
            $scope.tabs = Profiles.createProfilesSubNavBars($scope.namespace, $scope.projectId);
            Forge.updateForgeProject($scope);
            $scope.gitRestUrl = function (path) { return Wiki.gitRestURL($scope, path); };
            $scope.profiles = profiles;
            $scope.containers = containers;
            $scope.select = {
                names: []
            };
            $scope.selectable = false;
            $scope.profileGroups = function (profile) { return profile.tags.length > 0 ? profile.tags[0] : ''; };
            var saving = 0;
            $scope.saving = function () { return saving > 0; };
            var blockTable = blockUI.instances.get('blockTable');
            $scope.deployProfiles = function () {
                var wiki = new Wiki.GitWikiRepository($scope);
                var success = function (response) {
                    Wiki.onComplete(response);
                    Core.notification('success', response.file + ' saved!');
                    complete();
                };
                var failure = function (response) {
                    Core.notification('error', response);
                    complete();
                };
                var complete = function () {
                    if (--saving === 0) {
                        blockTable.message('Refreshing ...');
                        containers.load(wiki, $scope.branch).then(function () {
                            blockTable.stop();
                            $location.path(UrlHelpers.join('/workspaces', $scope.namespace, 'projects', $scope.projectId, 'profiles', 'containers'));
                        });
                    }
                };
                blockTable.start("Saving ...");
                saving++;
                $scope.select.names.forEach(function (name) {
                    return wiki.putPage($scope.branch, 'configs/containers/' + name + '.cfg', deployProfiles(name, profiles.cart), 'Deploy profiles into ' + name, success, failure);
                });
            };
            var deployProfiles = function (container, profiles) {
                return profiles.reduce(function (profiles, profile) { return profiles + profile.id + ' '; }, 'profiles=')
                    .concat('\n')
                    .concat('container-type=karaf jenkinsfile');
            };
            $scope.existingContainers = function (names) { return _.intersection(names, _.pluck(containers.data, 'name')); };
            $scope.refreshContainers = function () { return containers.load(new Wiki.GitWikiRepository($scope), $scope.branch); };
            $scope.refreshProfiles = function () {
                if (!profiles.loading) {
                    profiles.load(new Wiki.GitWikiRepository($scope), $scope.branch);
                }
            };
            if (!(containers.loaded || containers.loading)) {
                $scope.refreshContainers();
            }
        }]);
})(Profiles || (Profiles = {}));

var Profiles;
(function (Profiles_1) {
    var Profiles = (function () {
        function Profiles() {
            var _this = this;
            this.loaded = false;
            this.loading = false;
            this.data = [];
            this.cart = [];
            this.requests = 0;
            this.load = function (wiki, branch, path) {
                if (path === void 0) { path = 'profiles'; }
                _this.loading = true;
                _this.data.length = 0;
                _this.requests = 0;
                _this.findProfiles(wiki, branch, path);
            };
            this.findProfiles = function (wiki, branch, path) {
                _this.requests++;
                wiki.getPage(branch, path, null, function (data) {
                    if (data.children) {
                        _.forEach(data.children, function (value) {
                            if (value.directory && _.endsWith(value.name, '.profile')) {
                                _this.loadProfile(wiki, branch, value);
                            }
                            else if (value.directory) {
                                _this.findProfiles(wiki, branch, value.path);
                            }
                        });
                    }
                    _this.complete();
                });
            };
            this.loadProfile = function (wiki, branch, value) {
                var info = /^profiles\/((?:.+)\/)*(.+).profile$/.exec(value.path);
                var profile = {
                    id: (info[1] ? info[1].replace(/\//g, '-') : '') + info[2],
                    name: info[2],
                    path: value.path,
                    tags: info[1] ? info[1].slice(0, -1).split('/') : []
                };
                _this.requests++;
                wiki.getPage(branch, value.path, null, function (data) {
                    for (var _i = 0, _a = data.children; _i < _a.length; _i++) {
                        var child = _a[_i];
                        var name_1 = child.name.toUpperCase();
                        if (name_1 == 'README.MD' || name_1 == 'SUMMARY.MD') {
                            profile.summaryUrl = child.path;
                        }
                        else if (name_1 == 'ICON.SVG') {
                            profile.iconUrl = child.path;
                        }
                    }
                    _this.data.splice(_.sortedIndex(_this.data, profile, 'id'), 0, profile);
                    var i = _.findIndex(_this.cart, { id: profile.id });
                    if (i >= 0) {
                        _this.cart[i] = profile;
                    }
                    _this.complete();
                });
            };
            this.complete = function () {
                if (--_this.requests === 0) {
                    SelectionHelpers.syncGroupSelection(_this.cart, _this.data, 'id');
                    _this.loading = false;
                    _this.loaded = true;
                }
            };
        }
        return Profiles;
    }());
    Profiles_1.Profiles = Profiles;
    var ProfileView = (function () {
        function ProfileView(scope) {
            this.scope = scope;
        }
        Object.defineProperty(ProfileView.prototype, "openOrSingle", {
            get: function () {
                var scope = this.scope;
                if (scope.filteredProfiles.length === 1) {
                    if (!this.force && (!scope.loading() || scope.profiles.length > 1)) {
                        return true;
                    }
                }
                else {
                    this.force = false;
                }
                return this.open;
            },
            set: function (open) {
                if (this.scope.filteredProfiles.length === 1) {
                    this.force = true;
                }
                this.open = open;
            },
            enumerable: true,
            configurable: true
        });
        return ProfileView;
    }());
    var ProfileViews = (function () {
        function ProfileViews() {
            this.selectedTags = [];
            this.profileViews = {};
        }
        return ProfileViews;
    }());
    Profiles_1.module.service('profiles', Profiles);
    Profiles_1.module.service('profileViews', ProfileViews);
    Profiles_1.module.constant('jsyaml', jsyaml);
    Profiles_1.module.filter('filterCollection', function () { return function (collection, text) {
        return Core.isBlank(text)
            ? collection
            : _.filter(collection, function (item) { return FilterHelpers.searchObject(item, text); });
    }; });
    Profiles_1.module.controller('Profiles.ProfilesController', ['$scope', '$location', 'marked', '$sce', 'profiles', 'profileViews',
        function ($scope, $location, marked, $sce, profiles, profileViews) {
            $scope.tabs = Profiles_1.createProfilesSubNavBars($scope.namespace, $scope.projectId);
            Forge.updateForgeProject($scope);
            $scope.gitRestUrl = function (path) { return Wiki.gitRestURL($scope, path); };
            $scope.profiles = profiles.data;
            $scope.selection = profiles.cart;
            $scope.selectedTags = profileViews.selectedTags;
            $scope.profileViews = profileViews.profileViews;
            SelectionHelpers.decorate($scope);
            $scope.isBlank = Core.isBlank;
            $scope.loading = function () { return profiles.loading; };
            $scope.wikiLink = function (path) { return Wiki.viewLink($scope.projectId, $scope.branch, path, $location); };
            var wiki = new Wiki.GitWikiRepository($scope);
            $scope.loadSummary = function (profile) {
                if (profile.summaryUrl) {
                    var renderer_1 = new marked.Renderer();
                    renderer_1.image = function (href, title, text) {
                        var uri = new URI(href);
                        if (uri.is('relative')) {
                            if (_.startsWith(uri.path(), '/')) {
                                uri.segment(['profiles'].concat(uri.segment()));
                            }
                            else {
                                uri = uri.absoluteTo(UrlHelpers.join(profile.path, '/'));
                            }
                            var src = Wiki.gitRestURL($scope, uri.normalize().toString());
                            return '<img src="img/loader.svg" http-src="' + src + '" alt="' + (title ? title : text) + '" />';
                        }
                        else {
                            return '<img src="' + href + '" alt="' + (title ? title : text) + '" />';
                        }
                    };
                    wiki.getPage($scope.branch, profile.summaryUrl, null, function (data) { return profile.summary = marked(data.text, { renderer: renderer_1 }); });
                }
                else {
                    profile.summary = '<em>no summary</em>';
                }
            };
            $scope.assignProfiles = function () { return $location.path(UrlHelpers.join('/workspaces', $scope.namespace, 'projects', $scope.projectId, 'profiles', 'containers', 'assignProfiles')); };
            $scope.deployProfiles = function () { return $location.path(UrlHelpers.join('/workspaces', $scope.namespace, 'projects', $scope.projectId, 'profiles', 'containers', 'deployProfiles')); };
            var updateProfileViews = function (profiles) { return _.reduce(profiles, function (profileViews, profile) {
                if (!_.has(profileViews, profile.id)) {
                    profileViews[profile.id] = new ProfileView($scope);
                }
                else {
                    profileViews[profile.id].scope = $scope;
                }
                return profileViews;
            }, $scope.profileViews); };
            _.keys($scope.profileViews).forEach(function (key) { return delete $scope.profileViews[key]; });
            $scope.$watchCollection('profiles', updateProfileViews);
            $scope.refresh = function () { return profiles.load(wiki, $scope.branch); };
            if (!(profiles.loaded || profiles.loading)) {
                $scope.refresh();
            }
        }]);
})(Profiles || (Profiles = {}));

var Profiles;
(function (Profiles) {
    Profiles.module.controller('Profiles.SettingsController', ['$scope', function ($scope) {
            $scope.tabs = Profiles.createProfilesSubNavBars($scope.namespace, $scope.projectId);
            Forge.updateForgeProject($scope);
            var wikiRepository = new Wiki.GitWikiRepository($scope);
            $scope.loading = 0;
            $scope.config = {
                style: HawtioForms.FormStyle.STANDARD,
                mode: HawtioForms.FormMode.VIEW,
                properties: {
                    gitRemoteUriPattern: {
                        type: 'string',
                        description: 'Git remote URI pattern for all containers, name is the name of the container, e.g. root'
                    },
                    gogsUsername: {
                        type: 'string'
                    },
                    gogsPassword: {
                        type: 'password'
                    },
                    groupId: {
                        type: 'string'
                    },
                    version: {
                        type: 'string'
                    }
                }
            };
            $scope.refresh = function () {
                $scope.loading++;
                wikiRepository.getPage($scope.branch, 'fabric8-profiles.cfg', null, function (data) {
                    $scope.loading--;
                    $scope.settings = data.text;
                    $scope.properties = Profiles.parseProperties(data.text);
                });
            };
            $scope.$watch('loading', function (value) { return $scope.config.mode = value > 0
                ? HawtioForms.FormMode.VIEW
                : HawtioForms.FormMode.EDIT; });
            $scope.save = function () {
                var edit = apply($scope.properties, $scope.settings);
                if (edit != $scope.settings) {
                    $scope.loading++;
                    wikiRepository.putPage($scope.branch, 'fabric8-profiles.cfg', edit, 'Update profiles settings', function (response) {
                        Wiki.onComplete(response);
                        Core.notification('success', response.file + ' saved!');
                        $scope.loading--;
                    }, function (response) {
                        Core.notification('error', response);
                        $scope.loading--;
                    });
                }
            };
            var apply = function (properties, settings) {
                return settings.replace(/^([^#=]+)=(.*)$/gm, function (match, key, value) { return key + '=' + properties[key] || value; });
            };
            $scope.refresh();
        }
    ]);
})(Profiles || (Profiles = {}));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluY2x1ZGVzLmpzIiwicHJvZmlsZXMvdHMvcHJvZmlsZXNIZWxwZXJzLnRzIiwicHJvZmlsZXMvdHMvcHJvZmlsZXNQbHVnaW4udHMiLCJwcm9maWxlcy90cy9hc3NpZ25Qcm9maWxlcy50cyIsInByb2ZpbGVzL3RzL2NvbnRhaW5lckxpc3QudHMiLCJwcm9maWxlcy90cy9jb250YWluZXJzLnRzIiwicHJvZmlsZXMvdHMvZGVwbG95UHJvZmlsZXMudHMiLCJwcm9maWxlcy90cy9wcm9maWxlcy50cyIsInByb2ZpbGVzL3RzL3NldHRpbmdzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUNJQSxJQUFPLFFBQVEsQ0FnQ2Q7QUFoQ0QsV0FBTyxRQUFRLEVBQUMsQ0FBQztJQUVmLGtDQUF5QyxTQUFnQixFQUFFLFNBQWdCO1FBQ3pFLE1BQU0sQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDO1lBQy9CO2dCQUNFLElBQUksRUFBRSxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxZQUFZLEVBQUUsRUFBRSxhQUFhLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsVUFBVSxDQUFDO2dCQUM3RyxLQUFLLEVBQUUsVUFBVTtnQkFDakIsS0FBSyxFQUFFLFVBQVU7YUFDbEI7WUFDRDtnQkFDRSxJQUFJLEVBQUUsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBWSxFQUFFLEVBQUUsYUFBYSxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxZQUFZLENBQUM7Z0JBQzNILEtBQUssRUFBRSxZQUFZO2dCQUNuQixLQUFLLEVBQUUsWUFBWTtnQkFDbkIsUUFBUSxFQUFFLFVBQUMsSUFBSSxFQUFFLElBQUksSUFBSyxPQUFBLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBN0IsQ0FBNkI7YUFDeEQ7WUFDRDtnQkFDRSxJQUFJLEVBQUUsVUFB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LENBQUMsQ0FBQztnQkFDckQsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO29CQUM1QixNQUFNLENBQUMsT0FBTyxFQUFFLENBQUM7b0JBRWpCLGNBQWMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxzQkFBc0IsRUFBRSxJQUFJLEVBQUUsMEJBQTBCLEVBQzVGLFVBQUEsUUFBUTt3QkFDTixJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO3dCQUMxQixJQUFJLENBQUMsWUFBWSxDQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQyxDQUFDO3dCQUN4RCxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUM7b0JBQ25CLENBQUMsRUFDRCxVQUFBLFFBQVE7d0JBQ04sSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUM7d0JBQ3JDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztvQkFDbkIsQ0FBQyxDQUNGLENBQUM7Z0JBQ0osQ0FBQztZQUNILENBQUMsQ0FBQztZQUVGLElBQUksS0FBSyxHQUFHLFVBQUMsVUFBYyxFQUFFLFFBQWU7Z0JBQzFDLE9BQUEsUUFBUSxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsRUFBRSxVQUFDLEtBQUssRUFBRSxHQUFHLEVBQUUsS0FBSyxJQUFLLE9BQUEsR0FBRyxHQUFHLEdBQUcsR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDLElBQUksS0FBSyxFQUFwQyxDQUFvQyxDQUFDO1lBQWxHLENBQWtHLENBQUM7WUFFckcsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ25CLENBQUM7S0FDRixDQUFDLENBQUM7QUFDTCxDQUFDLEVBMUVNLFFBQVEsS0FBUixRQUFRLFFBMEVkIiwiZmlsZSI6ImNvbXBpbGVkLmpzIiwic291cmNlc0NvbnRlbnQiOltudWxsLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vaW5jbHVkZXMudHNcIi8+XG5cbi8qKlxuICogQG1vZHVsZSBQcm9maWxlc1xuICovXG5tb2R1bGUgUHJvZmlsZXMge1xuXG4gIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9maWxlc1N1Yk5hdkJhcnMobmFtZXNwYWNlOnN0cmluZywgcHJvamVjdElkOnN0cmluZykge1xuICAgIHJldHVybiBEZXZlbG9wZXIuYWN0aXZhdGVDdXJyZW50KFtcbiAgICAgIHtcbiAgICAgICAgaHJlZjogVXJsSGVscGVycy5qb2luKEhhd3Rpb0NvcmUuZG9jdW1lbnRCYXNlKCksICcvd29ya3NwYWNlcycsIG5hbWVzcGFjZSwgJ3Byb2plY3RzJywgcHJvamVjdElkLCAncHJvZmlsZXMnKSxcbiAgICAgICAgbGFiZWw6ICdQcm9maWxlcycsXG4gICAgICAgIHRpdGxlOiAnUHJvZmlsZXMnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBocmVmOiBVcmxIZWxwZXJzLmpvaW4oSGF3dGlvQ29yZS5kb2N1bWVudEJhc2UoKSwgJy93b3Jrc3BhY2VzJywgbmFtZXNwYWNlLCAncHJvamVjdHMnLCBwcm9qZWN0SWQsICdwcm9maWxlcycsICdjb250YWluZXJzJyksXG4gICAgICAgIGxhYmVsOiAnQ29udGFpbmVycycsXG4gICAgICAgIHRpdGxlOiAnQ29udGFpbmVycycsXG4gICAgICAgIGlzQWN0aXZlOiAoaXRlbSwgcGF0aCkgPT4gXy5zdGFydHNXaXRoKHBhdGgsIGl0ZW0uaHJlZilcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGhyZWY6IFVybEhlbHBlcnMuam9pbihIYXd0aW9Db3JlLmRvY3VtZW50QmFzZSgpLCAnL3dvcmtzcGFjZXMnLCBuYW1lc3BhY2UsICdwcm9qZWN0cycsIHByb2plY3RJZCwgJ3Byb2ZpbGVzJywgJ3NldHRpbmdzJyksXG4gICAgICAgIGxhYmVsOiAnU2V0dGluZ3MnLFxuICAgICAgICB0aXRsZTogJ1NldHRpbmdzJ1xuICAgICAgfVxuICAgIF0pO1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHJvcGVydGllcyhjb250ZW50OnN0cmluZyk6YW55IHtcbiAgICByZXR1cm4gY29udGVudC5zcGxpdCgnXFxuJykucmVkdWNlKChwcm9wZXJ0aWVzLCBsaW5lKSA9PiB7XG4gICAgICB2YXIgcHJvcGVydHkgPSAvXihbXiM9XSspPSguKikkLy5leGVjKGxpbmUudHJpbSgpKTtcbiAgICAgIGlmIChwcm9wZXJ0eSkge1xuICAgICAgICBwcm9wZXJ0aWVzW3Byb3BlcnR5WzFdLnRyaW0oKV0gPSBwcm9wZXJ0eVsyXS50cmltKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJvcGVydGllcztcbiAgICB9LCB7fSk7XG4gIH1cbn1cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9pbmNsdWRlcy50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJwcm9maWxlc0hlbHBlcnMudHNcIi8+XG5cbi8qKlxuICogQG1vZHVsZSBQcm9maWxlc1xuICogQG1haW4gUHJvZmlsZXNcbiAqL1xubW9kdWxlIFByb2ZpbGVzIHtcblxuICBleHBvcnQgdmFyIHBsdWdpbk5hbWUgPSAncHJvZmlsZXMnO1xuICBleHBvcnQgdmFyIGxvZzpMb2dnaW5nLkxvZ2dlciA9IExvZ2dlci5nZXQocGx1Z2luTmFtZSk7XG4gIGV4cG9ydCB2YXIgdGVtcGxhdGVQYXRoID0gJ3BsdWdpbnMvJyArIHBsdWdpbk5hbWUgKyAnL2h0bWwvJztcblxuICBleHBvcnQgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKHBsdWdpbk5hbWUsIFsnaGF3dGlvLWNvcmUnLCAnaGF3dGlvLXVpJywgJ2hhd3Rpby1mb3JtcycsICdibG9ja1VJJywgJ3VpLnNlbGVjdCcsICduZ1Nhbml0aXplJ10pO1xuXG4gIG1vZHVsZS5jb25maWcoWyckcm91dGVQcm92aWRlcicsICdibG9ja1VJQ29uZmlnJywgKCRyb3V0ZVByb3ZpZGVyOm5nLnJvdXRlLklSb3V0ZVByb3ZpZGVyLCBibG9ja1VJQ29uZmlnKSA9PiB7XG4gICAgYmxvY2tVSUNvbmZpZy5hdXRvQmxvY2sgPSBmYWxzZTtcbiAgICBibG9ja1VJQ29uZmlnLmRlbGF5ID0gMDtcblxuICAgIHZhciBqb2luID0gVXJsSGVscGVycy5qb2luO1xuICAgIHZhciByb3V0ZSA9IERldmVsb3Blci5jcmVhdGVUYWJSb3V0aW5nRnVuY3Rpb24odGVtcGxhdGVQYXRoKTtcbiAgICB2YXIgYmFzZSA9ICcvd29ya3NwYWNlcy86bmFtZXNwYWNlL3Byb2plY3RzLzpwcm9qZWN0SWQvcHJvZmlsZXMnO1xuXG4gICAgLy8gQWRkIGEgdGFiL2xpbmsgdG8gdGhlIHByb2ZpbGVzIHZpZXcgb24gdGhlIGxlZnQuLlxuICAgIERldmVsb3Blci5jdXN0b21Qcm9qZWN0U3ViVGFiRmFjdG9yaWVzLnB1c2goY29udGV4dCA9PiB7XG4gICAgICBpZihjb250ZXh0LiRzY29wZSkge1xuICAgICAgICBGb3JnZS51cGRhdGVGb3JnZVByb2plY3QoY29udGV4dC4kc2NvcGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIGlzVmFsaWQ6ICgpID0+IGNvbnRleHQucHJvamVjdExpbmsgJiYgRGV2ZWxvcGVyLmZvcmdlUmVhZHlMaW5rKCkgJiYgRm9yZ2UuZm9yZ2VQcm9qZWN0KCkuaGFzUGVyc3BlY3RpdmUoJ2ZhYnJpYzgtcHJvZmlsZXMnKSxcbiAgICAgICAgaHJlZjogam9pbihjb250ZXh0LnByb2plY3RMaW5rLCAncHJvZmlsZXMnKSxcbiAgICAgICAgY2xhc3M6ICdmYSBmYS1jb2RlLWZvcmsnLFxuICAgICAgICBsYWJlbDogJ1Byb2ZpbGVzJyxcbiAgICAgICAgdGl0bGU6ICdCcm93c2UgdGhlIHByb2ZpbGVzIG9mIHRoaXMgcHJvamVjdCcsXG4gICAgICAgIGlzQWN0aXZlOiAoc3ViVGFiLCBwYXRoKSA9PiBfLnN0YXJ0c1dpdGgocGF0aCwgam9pbihjb250ZXh0LnByb2plY3RMaW5rLCAncHJvZmlsZXMnKSlcbiAgICAgIH1dXG4gICAgfSk7XG5cbiAgICAkcm91dGVQcm92aWRlclxuICAgICAgLndoZW4oYmFzZSwgcm91dGUoJ3Byb2ZpbGVzLmh0bWwnLCBmYWxzZSkpXG4gICAgICAud2hlbihqb2luKGJhc2UsICdjb250YWluZXJzJywgJ2Fzc2lnblByb2ZpbGVzJyksIHJvdXRlKCdhc3NpZ25Qcm9maWxlcy5odG1sJywgZmFsc2UpKVxuICAgICAgLndoZW4oam9pbihiYXNlLCAnY29udGFpbmVycycsICdkZXBsb3lQcm9maWxlcycpLCByb3V0ZSgnZGVwbG95UHJvZmlsZXMuaHRtbCcsIGZhbHNlKSlcbiAgICAgIC53aGVuKGpvaW4oYmFzZSwgJ2NvbnRhaW5lcnMnKSwgcm91dGUoJ2NvbnRhaW5lcnMuaHRtbCcsIGZhbHNlKSlcbiAgICAgIC53aGVuKGpvaW4oYmFzZSwgJ3NldHRpbmdzJyksIHJvdXRlKCdzZXR0aW5ncy5odG1sJywgZmFsc2UpKTtcbiAgfV0pO1xuXG4gIC8vIERpcmVjdGl2ZSB0aGF0IGF2b2lkcyByZW5kZXJpbmcgZ2xpdGNoZXMgd2hlbiB1c2luZyBuZy1pbmNsdWRlIGFuZCBieXBhc3NlcyBpdHMgY29tcGxleGl0eVxuICAvLyBhcyB3ZSB1c2UgZ3VscC1hbmd1bGFyLXRlbXBsYXRlY2FjaGUgdG8gcmVnaXN0ZXIgQW5ndWxhckpTIHRlbXBsYXRlcyBpbiB0aGUgJHRlbXBsYXRlQ2FjaGUuXG4gIG1vZHVsZS5kaXJlY3RpdmUoJ3RlbXBsYXRlQ2FjaGVJbmNsdWRlJywgWyckY29tcGlsZScsICckdGVtcGxhdGVDYWNoZScsICgkY29tcGlsZSwgJHRlbXBsYXRlQ2FjaGUpID0+ICh7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgcHJpb3JpdHk6IDQwMCxcbiAgICAgIGNvbXBpbGU6IChlbGVtZW50LCBhdHRycykgPT4ge1xuICAgICAgICB2YXIgdGVtcGxhdGVOYW1lID0gYXR0cnMudGVtcGxhdGVDYWNoZUluY2x1ZGU7XG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9ICR0ZW1wbGF0ZUNhY2hlLmdldCh0ZW1wbGF0ZU5hbWUpO1xuICAgICAgICByZXR1cm4gKHNjb3BlLCBlbGVtZW50KSA9PiB7XG4gICAgICAgICAgZWxlbWVudC5odG1sKHRlbXBsYXRlKTtcbiAgICAgICAgICAkY29tcGlsZShlbGVtZW50LmNvbnRlbnRzKCkpKHNjb3BlKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KVxuICBdKTtcblxuICBoYXd0aW9QbHVnaW5Mb2FkZXIuYWRkTW9kdWxlKHBsdWdpbk5hbWUpO1xufVxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL2luY2x1ZGVzLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cInByb2ZpbGVzUGx1Z2luLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cInByb2ZpbGVzSGVscGVycy50c1wiLz5cblxubW9kdWxlIFByb2ZpbGVzIHtcblxuICBtb2R1bGUuY29udHJvbGxlcignUHJvZmlsZXMuQXNzaWduUHJvZmlsZXNDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJyR0ZW1wbGF0ZUNhY2hlJywgJ3Byb2ZpbGVzJywgJ2NvbnRhaW5lcnMnLCAnYmxvY2tVSScsICgkc2NvcGUsICRsb2NhdGlvbiwgJHRlbXBsYXRlQ2FjaGUsIHByb2ZpbGVzOiBQcm9maWxlcywgY29udGFpbmVyczogQ29udGFpbmVycywgYmxvY2tVSSkgPT4ge1xuICAgICRzY29wZS50YWJzID0gY3JlYXRlUHJvZmlsZXNTdWJOYXZCYXJzKCRzY29wZS5uYW1lc3BhY2UsICRzY29wZS5wcm9qZWN0SWQpO1xuICAgIC8vIEFzc29jaWF0ZSB0aGlzIGNvbnRyb2xsZXIgc2NvcGUgdG8gdGhlIEZvcmdlUHJvamVjdFNlcnZpY2VcbiAgICBGb3JnZS51cGRhdGVGb3JnZVByb2plY3QoJHNjb3BlKTtcbiAgICAkc2NvcGUuZ2l0UmVzdFVybCA9IHBhdGggPT4gV2lraS5naXRSZXN0VVJMKCRzY29wZSwgcGF0aCk7XG5cbiAgICAkc2NvcGUucHJvZmlsZXMgPSBwcm9maWxlcztcbiAgICAkc2NvcGUuY29udGFpbmVycyA9IGNvbnRhaW5lcnM7XG4gICAgJHNjb3BlLnNlbGVjdGFibGUgPSB0cnVlO1xuICAgICRzY29wZS5wcm9maWxlR3JvdXBzID0gKHByb2ZpbGU6IFByb2ZpbGUpID0+IHByb2ZpbGUudGFncy5sZW5ndGggPiAwID8gcHJvZmlsZS50YWdzWzBdIDogJyc7XG5cbiAgICBsZXQgc2F2aW5nOm51bWJlciA9IDA7XG4gICAgJHNjb3BlLnNhdmluZyA9ICgpID0+IHNhdmluZyA+IDA7XG5cbiAgICBsZXQgYmxvY2tUYWJsZSA9IGJsb2NrVUkuaW5zdGFuY2VzLmdldCgnYmxvY2tUYWJsZScpO1xuXG4gICAgJHNjb3BlLmFzc2lnblByb2ZpbGVzID0gKCkgPT4ge1xuICAgICAgbGV0IHdpa2kgPSBuZXcgV2lraS5HaXRXaWtpUmVwb3NpdG9yeSgkc2NvcGUpO1xuICAgICAgLy8gVE9ETzogdXNlIFBhdHRlcm5GbHkgbm90aWZpY2F0aW9uc1xuICAgICAgbGV0IHN1Y2Nlc3MgPSByZXNwb25zZSA9PiB7XG4gICAgICAgIFdpa2kub25Db21wbGV0ZShyZXNwb25zZSk7XG4gICAgICAgIENvcmUubm90aWZpY2F0aW9uKCdzdWNjZXNzJywgcmVzcG9uc2UuZmlsZSArICcgc2F2ZWQhJyk7XG4gICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICB9O1xuICAgICAgbGV0IGZhaWx1cmUgPSByZXNwb25zZSA9PiB7XG4gICAgICAgIENvcmUubm90aWZpY2F0aW9uKCdlcnJvcicsIHJlc3BvbnNlKTtcbiAgICAgICAgY29tcGxldGUoKTtcbiAgICAgIH07XG4gICAgICBsZXQgY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgIGlmICgtLXNhdmluZyA9PT0gMCkge1xuICAgICAgICAgIGJsb2NrVGFibGUubWVzc2FnZSgnUmVmcmVzaGluZyAuLi4nKTtcbiAgICAgICAgICBjb250YWluZXJzLmxvYWQod2lraSwgJHNjb3BlLmJyYW5jaCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBibG9ja1RhYmxlLnN0b3AoKTtcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFVybEhlbHBlcnMuam9pbignL3dvcmtzcGFjZXMnLCAkc2NvcGUubmFtZXNwYWNlLCAncHJvamVjdHMnLCAkc2NvcGUucHJvamVjdElkLCAncHJvZmlsZXMnLCAnY29udGFpbmVycycpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGJsb2NrVGFibGUuc3RhcnQoXCJTYXZpbmcgLi4uXCIpO1xuICAgICAgY29udGFpbmVycy5jYXJ0LmZvckVhY2goY29udGFpbmVyID0+IHtcbiAgICAgICAgc2F2aW5nKys7XG4gICAgICAgIHdpa2kucHV0UGFnZSgkc2NvcGUuYnJhbmNoLCBjb250YWluZXIucGF0aCwgYXNzaWduUHJvZmlsZXMoY29udGFpbmVyLCBwcm9maWxlcy5jYXJ0KSwgJ0Fzc2lnbiBwcm9maWxlcycsIHN1Y2Nlc3MsIGZhaWx1cmUpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGxldCBhc3NpZ25Qcm9maWxlcyA9IChjb250YWluZXI6IENvbnRhaW5lciwgcHJvZmlsZXM6IFByb2ZpbGVbXSk6c3RyaW5nID0+XG4gICAgICAgIGNvbnRhaW5lci50ZXh0LnJlcGxhY2UoL14ocHJvZmlsZXMpPSguKikkL20sXG4gICAgICAgICAgICAobWF0Y2gsIGtleSwgdmFsdWUpID0+IGtleSArICc9JyArIHByb2ZpbGVzLm1hcChwcm9maWxlID0+IHByb2ZpbGUuaWQpLmpvaW4oJyAnKSk7XG5cbiAgICAkc2NvcGUucmVmcmVzaENvbnRhaW5lcnMgPSAoKSA9PiBjb250YWluZXJzLmxvYWQobmV3IFdpa2kuR2l0V2lraVJlcG9zaXRvcnkoJHNjb3BlKSwgJHNjb3BlLmJyYW5jaCk7XG4gICAgJHNjb3BlLnJlZnJlc2hQcm9maWxlcyA9ICgpID0+IHtcbiAgICAgIGlmICghcHJvZmlsZXMubG9hZGluZykge1xuICAgICAgICBwcm9maWxlcy5sb2FkKG5ldyBXaWtpLkdpdFdpa2lSZXBvc2l0b3J5KCRzY29wZSksICRzY29wZS5icmFuY2gpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoIShjb250YWluZXJzLmxvYWRlZCB8fCBjb250YWluZXJzLmxvYWRpbmcpKSB7XG4gICAgICAkc2NvcGUucmVmcmVzaENvbnRhaW5lcnMoKTtcbiAgICB9XG4gIH1dKVxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9pbmNsdWRlcy50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJwcm9maWxlc1BsdWdpbi50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJwcm9maWxlc0hlbHBlcnMudHNcIi8+XG5cbm1vZHVsZSBQcm9maWxlcyB7XG5cbiAgaW1wb3J0IEt1YmVybmV0ZXNNb2RlbFNlcnZpY2UgPSBLdWJlcm5ldGVzLkt1YmVybmV0ZXNNb2RlbFNlcnZpY2U7XG5cbiAgbW9kdWxlLmNvbnRyb2xsZXIoJ1Byb2ZpbGVzLkNvbnRhaW5lckxpc3RDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckbG9jYXRpb24nLCAnJHRlbXBsYXRlQ2FjaGUnLCAncHJvZmlsZXMnLCAnY29udGFpbmVycycsICdLdWJlcm5ldGVzTW9kZWwnLFxuICAgICAgKCRzY29wZSwgJGxvY2F0aW9uLCAkdGVtcGxhdGVDYWNoZSwgcHJvZmlsZXM6IFByb2ZpbGVzLCBjb250YWluZXJzOiBDb250YWluZXJzLCBrdWJlcm5ldGVzOiBLdWJlcm5ldGVzTW9kZWxTZXJ2aWNlKSA9PiB7XG5cbiAgICAkc2NvcGUudmlld1Byb2ZpbGUgPSBwcm9maWxlID0+ICRsb2NhdGlvbi5wYXRoKFdpa2kudmlld0xpbmsoJHNjb3BlLnByb2plY3RJZCwgJHNjb3BlLmJyYW5jaCwgcHJvZmlsZS5wYXRoLCAkbG9jYXRpb24pKTtcbiAgICAkc2NvcGUucHJvZmlsZXMgPSBwcm9maWxlcztcbiAgICAkc2NvcGUuY29udGFpbmVycyA9IGNvbnRhaW5lcnM7XG5cbiAgICAkc2NvcGUudGFibGVDb25maWcgPSB7XG4gICAgICBkYXRhOiAnY29udGFpbmVycy5kYXRhJyxcbiAgICAgIHNob3dTZWxlY3Rpb25DaGVja2JveDogJHNjb3BlLnNlbGVjdGFibGUgfHwgZmFsc2UsXG4gICAgICBlbmFibGVSb3dDbGlja1NlbGVjdGlvbjogJHNjb3BlLnNlbGVjdGFibGUgfHwgZmFsc2UsXG4gICAgICBtdWx0aVNlbGVjdDogdHJ1ZSxcbiAgICAgIHNlbGVjdGVkSXRlbXM6ICRzY29wZS5zZWxlY3RhYmxlID8gY29udGFpbmVycy5jYXJ0IDogW10sXG4gICAgICBmaWx0ZXJPcHRpb25zOiB7XG4gICAgICAgIGZpbHRlclRleHQ6ICRsb2NhdGlvbi5zZWFyY2goKVsncSddIHx8ICcnXG4gICAgICB9LFxuICAgICAgY29sdW1uRGVmczogW1xuICAgICAgICB7IGZpZWxkOiAnbmFtZScsXG4gICAgICAgICAgZGlzcGxheU5hbWU6ICdOYW1lJyxcbiAgICAgICAgICBjZWxsVGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgnY29udGFpbmVyTmFtZS5odG1sJylcbiAgICAgICAgfSxcbiAgICAgICAgeyBmaWVsZDogJ3BvZHMnLFxuICAgICAgICAgIGRpc3BsYXlOYW1lOiAnUG9kcycsXG4gICAgICAgICAgY2VsbFRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2NvbnRhaW5lclBvZHMuaHRtbCcpXG4gICAgICAgIH0sXG4gICAgICAgIHsgZmllbGQ6ICd0eXBlcycsXG4gICAgICAgICAgZGlzcGxheU5hbWU6ICdUeXBlcycsXG4gICAgICAgICAgY2VsbFRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2NvbnRhaW5lclR5cGVzLmh0bWwnKVxuICAgICAgICB9LFxuICAgICAgICB7IGZpZWxkOiAncHJvZmlsZXMnLFxuICAgICAgICAgIGRpc3BsYXlOYW1lOiAnUHJvZmlsZXMnLFxuICAgICAgICAgIGNlbGxUZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCdjb250YWluZXJQcm9maWxlcy5odG1sJylcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH07XG5cbiAgICAkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbigncHJvZmlsZXMuZGF0YScsIHByb2ZpbGVzID0+XG4gICAgICBjb250YWluZXJzLmRhdGEuZm9yRWFjaCgoY29udGFpbmVyOkNvbnRhaW5lcikgPT5cbiAgICAgICAgcHJvZmlsZXMuZm9yRWFjaCgocHJvZmlsZTpQcm9maWxlKSA9PiB7XG4gICAgICAgICAgbGV0IGkgPSBfLmluZGV4T2YoY29udGFpbmVyLnByb2ZpbGVzLCBwcm9maWxlLmlkKTtcbiAgICAgICAgICBpZiAoaSA+PSAwKSB7XG4gICAgICAgICAgICBjb250YWluZXIucHJvZmlsZXNbaV0gPSBwcm9maWxlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIClcbiAgICApO1xuXG4gICAgLy8gTmVjZXNzYXJ5IHN5bmMgYXMgdWktc2VsZWN0IGNoYW5nZXMgdGhlIHNlbGVjdGlvbiBhcnJheSByZWZlcmVuY2UgOihcbiAgICAkc2NvcGUuJHdhdGNoKCdjb250YWluZXJzLmNhcnQnLCBjb250YWluZXJzID0+IHtcbiAgICAgICRzY29wZS50YWJsZUNvbmZpZy5zZWxlY3RlZEl0ZW1zID0gY29udGFpbmVycztcbiAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdoYXd0aW8uZGF0YXRhYmxlLmNvbnRhaW5lcnMuZGF0YScpO1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLiRvbigna3ViZXJuZXRlc01vZGVsVXBkYXRlZCcsICgpID0+XG4gICAgICBfLmZpbHRlcihjb250YWluZXJzLmRhdGEsIChjb250YWluZXI6Q29udGFpbmVyKSA9PiAhY29udGFpbmVyLmRlcGxveW1lbnQpXG4gICAgICAgIC5mb3JFYWNoKChjb250YWluZXI6Q29udGFpbmVyKSA9PiBjb250YWluZXIuZGVwbG95bWVudCA9IGt1YmVybmV0ZXMuZ2V0RGVwbG95bWVudCgkc2NvcGUubmFtZXNwYWNlIHx8IEt1YmVybmV0ZXMuY3VycmVudEt1YmVybmV0ZXNOYW1lc3BhY2UoKSwgY29udGFpbmVyLm5hbWUpKSk7XG5cbiAgICBpZiAoIShjb250YWluZXJzLmxvYWRlZCB8fCBjb250YWluZXJzLmxvYWRpbmcpKSB7XG4gICAgICAkc2NvcGUucmVmcmVzaCgpO1xuICAgIH1cbiAgfV0pO1xuXG4gIG1vZHVsZS5maWx0ZXIoJ2t1YmVybmV0ZXNQYWdlTGluaycsICgpID0+IChlbnRpdHksIHBhdGgxLCBwYXRoMikgPT4gVXJsSGVscGVycy5qb2luKEt1YmVybmV0ZXMuZW50aXR5UGFnZUxpbmsoZW50aXR5KSwgcGF0aDEsIHBhdGgyKSk7XG59IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL2luY2x1ZGVzLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cInByb2ZpbGVzUGx1Z2luLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cInByb2ZpbGVzSGVscGVycy50c1wiLz5cblxubW9kdWxlIFByb2ZpbGVzIHtcblxuICBpbXBvcnQgS3ViZXJuZXRlc01vZGVsU2VydmljZSA9IEt1YmVybmV0ZXMuS3ViZXJuZXRlc01vZGVsU2VydmljZTtcbiAgaW1wb3J0IElEZWZlcnJlZCA9IGFuZ3VsYXIuSURlZmVycmVkO1xuICBpbXBvcnQgSVByb21pc2UgPSBhbmd1bGFyLklQcm9taXNlO1xuXG4gIGV4cG9ydCBpbnRlcmZhY2UgSWNvbiB7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICB0eXBlOiAgc3RyaW5nO1xuICAgIHNyYzogICBzdHJpbmc7XG4gIH1cblxuICBsZXQgaWNvbnMgPSB7XG4gICAgY2FtZWw6ICAgICAgICdjYW1lbCcsXG4gICAgamVua2luc2ZpbGU6ICdqZW5raW5zJyxcbiAgICBrYXJhZjogICAgICAgJ2thcmFmJ1xuICB9O1xuXG4gIGV4cG9ydCBpbnRlcmZhY2UgQ29udGFpbmVyIHtcbiAgICBuYW1lOiAgICAgc3RyaW5nO1xuICAgIHBhdGg6ICAgICBzdHJpbmc7XG4gICAgdGV4dD86ICAgIHN0cmluZztcbiAgICBkZXBsb3ltZW50PzogYW55O1xuICAgIHByb2ZpbGVzOiAoUHJvZmlsZXxzdHJpbmcpW107XG4gICAgdHlwZXM6ICAgIHN0cmluZ1tdO1xuICAgIGljb25zPzogICBJY29uW107XG4gIH1cblxuICBleHBvcnQgY2xhc3MgQ29udGFpbmVycyB7XG4gICAgbG9hZGVkOmJvb2xlYW4gPSBmYWxzZTtcbiAgICBsb2FkaW5nOmJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIHJlcXVlc3RzOiBudW1iZXIgPSAwO1xuICAgIGRhdGE6Q29udGFpbmVyW10gPSBbXTtcbiAgICBjYXJ0OkNvbnRhaW5lcltdID0gW107XG4gICAgcHJpdmF0ZSBwcm9maWxlczpQcm9maWxlcztcbiAgICBwcml2YXRlIGt1YmVybmV0ZXM6S3ViZXJuZXRlc01vZGVsU2VydmljZTtcbiAgICBwcml2YXRlICRxOm5nLklRU2VydmljZTtcblxuICAgIGNvbnN0cnVjdG9yKHByb2ZpbGVzOiBQcm9maWxlcywga3ViZXJuZXRlczogS3ViZXJuZXRlc01vZGVsU2VydmljZSwgJHE6IG5nLklRU2VydmljZSkge1xuICAgICAgdGhpcy5wcm9maWxlcyA9IHByb2ZpbGVzO1xuICAgICAgdGhpcy5rdWJlcm5ldGVzID0ga3ViZXJuZXRlcztcbiAgICAgIHRoaXMuJHEgPSAkcTtcbiAgICB9XG5cbiAgICBsb2FkID0gKHdpa2k6V2lraS5HaXRXaWtpUmVwb3NpdG9yeSwgYnJhbmNoOnN0cmluZywgbmFtZXNwYWNlPzpzdHJpbmcpOklQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7XG4gICAgICB0aGlzLnJlcXVlc3RzKys7XG4gICAgICBsZXQgZGF0YTpDb250YWluZXJbXSA9IFtdO1xuICAgICAgbGV0IGRlZmVycmVkID0gdGhpcy4kcS5kZWZlcjx2b2lkPigpO1xuICAgICAgLy8gTGV0cyBsaXN0IGFsbCB0aGUgY29udGFpbmVycywgYW5kIGxvYWQgdGhlIGNvbnRhaW5lciBjb25maWdzXG4gICAgICB3aWtpLmdldFBhZ2UoYnJhbmNoLCAnY29uZmlncy9jb250YWluZXJzJywgbnVsbCwgcGFnZSA9PiB7XG4gICAgICAgIF8uZm9yRWFjaChwYWdlLmNoaWxkcmVuLCBjaGlsZCA9PiB7XG4gICAgICAgICAgaWYgKCFjaGlsZC5kaXJlY3RvcnkgJiYgXy5lbmRzV2l0aChjaGlsZC5uYW1lLCAnLmNmZycpKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RzKys7XG4gICAgICAgICAgICB3aWtpLmdldFBhZ2UoYnJhbmNoLCBjaGlsZC5wYXRoLCBudWxsLCBwYWdlID0+IHtcbiAgICAgICAgICAgICAgbGV0IHByb3BlcnRpZXMgPSBwYXJzZVByb3BlcnRpZXMocGFnZS50ZXh0KTtcbiAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHBhZ2UubmFtZS5yZXBsYWNlKC8uY2ZnJC8sICcnKTtcbiAgICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IDxDb250YWluZXI+IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgIHBhdGg6IHBhZ2UucGF0aCxcbiAgICAgICAgICAgICAgICB0ZXh0OiBwYWdlLnRleHQsXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogaW1wbGVtZW50IGEgbW9yZSByb2J1c3QgbWFwcGluZyBiZXR3ZWVuIHRoZSBjb250YWluZXIgcHJvamVjdCBhbmQgdGhlIGNvcnJlc3BvbmRpbmcgZGVwbG95bWVudCB1c2luZyB0aGUgZ3JvdXAgYW5kIHByb2plY3QgbGFiZWxzXG4gICAgICAgICAgICAgICAgZGVwbG95bWVudDogdGhpcy5rdWJlcm5ldGVzLmdldERlcGxveW1lbnQobmFtZXNwYWNlIHx8IEt1YmVybmV0ZXMuY3VycmVudEt1YmVybmV0ZXNOYW1lc3BhY2UoKSxuYW1lKSxcbiAgICAgICAgICAgICAgICAvLyBXZSBjb3VsZCBsb2FkIHRoZSBwcm9maWxlcyBpZiBub3QgYWxyZWFkeSBsb2FkZWQgYW5kIHN5bmMgdGhlIGNvbnRhaW5lcnMgZGF0YSBpZiBuZWVkZWRcbiAgICAgICAgICAgICAgICBwcm9maWxlczogXy5tYXAocHJvcGVydGllc1sncHJvZmlsZXMnXS5zcGxpdCgnICcpLCAocHJvZmlsZTpzdHJpbmcpID0+IDxQcm9maWxlfHN0cmluZz5fLmZpbmQodGhpcy5wcm9maWxlcy5kYXRhLCB7aWQ6IHByb2ZpbGV9KSB8fCBwcm9maWxlKSxcbiAgICAgICAgICAgICAgICB0eXBlczogcHJvcGVydGllc1snY29udGFpbmVyLXR5cGUnXS5zcGxpdCgnICcpLFxuICAgICAgICAgICAgICAgIGljb25zOiBwcm9wZXJ0aWVzWydjb250YWluZXItdHlwZSddLnNwbGl0KCcgJykubWFwKHR5cGUgPT4gPEljb24+IHtcbiAgICAgICAgICAgICAgICAgIHRpdGxlOiB0eXBlLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ2ltZycsXG4gICAgICAgICAgICAgICAgICBzcmM6ICdpbWcvaWNvbnMvJyArICh0eXBlLnRvTG93ZXJDYXNlKCkgaW4gaWNvbnMgPyBpY29uc1t0eXBlLnRvTG93ZXJDYXNlKCldIDogJ2phdmEnKSArICcuc3ZnJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgLy8gYWRkIHRoZSBpY29ucyBmcm9tIHRoZSBydW50aW1lIGluZm9cbiAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5kZXBsb3ltZW50KSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmljb25zLnB1c2goPEljb24+IHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbWcnLFxuICAgICAgICAgICAgICAgICAgc3JjIDogY29udGFpbmVyLmRlcGxveW1lbnQuJGljb25VcmxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBkYXRhLnB1c2goY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgdGhpcy5jb21wbGV0ZShkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29tcGxldGUoZGF0YSk7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcblxuICAgIHByaXZhdGUgY29tcGxldGUgPSAoZGF0YTpDb250YWluZXJbXSk6dm9pZCA9PiB7XG4gICAgICBpZiAoLS10aGlzLnJlcXVlc3RzID09PSAwKSB7XG4gICAgICAgIHRoaXMuZGF0YS5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmRhdGEucHVzaCguLi4gZGF0YSk7XG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxvYWRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIG1vZHVsZS5zZXJ2aWNlKCdjb250YWluZXJzJywgWydwcm9maWxlcycsICdLdWJlcm5ldGVzTW9kZWwnLCAnJHEnLCBDb250YWluZXJzXSk7XG5cbiAgbW9kdWxlLmNvbnRyb2xsZXIoJ1Byb2ZpbGVzLkNvbnRhaW5lcnNDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckbG9jYXRpb24nLCAnY29udGFpbmVycycsICdibG9ja1VJJyxcbiAgICAgICgkc2NvcGUsICRsb2NhdGlvbiwgY29udGFpbmVyczogQ29udGFpbmVycywgYmxvY2tVSSkgPT4ge1xuICAgICRzY29wZS50YWJzID0gY3JlYXRlUHJvZmlsZXNTdWJOYXZCYXJzKCRzY29wZS5uYW1lc3BhY2UsICRzY29wZS5wcm9qZWN0SWQpO1xuICAgIC8vIEFzc29jaWF0ZSB0aGlzIGNvbnRyb2xsZXIgc2NvcGUgdG8gdGhlIEZvcmdlUHJvamVjdFNlcnZpY2VcbiAgICBGb3JnZS51cGRhdGVGb3JnZVByb2plY3QoJHNjb3BlKTtcblxuICAgICRzY29wZS5jb250YWluZXJzID0gY29udGFpbmVycztcbiAgICAkc2NvcGUuc2VsZWN0YWJsZSA9IHRydWU7XG5cbiAgICBsZXQgc2F2aW5nOm51bWJlciA9IDA7XG4gICAgJHNjb3BlLnNhdmluZyA9ICgpID0+IHNhdmluZyA+IDA7XG5cbiAgICBsZXQgYmxvY2tUYWJsZSA9IGJsb2NrVUkuaW5zdGFuY2VzLmdldCgnYmxvY2tUYWJsZScpO1xuXG4gICAgJHNjb3BlLmNyZWF0ZUNvbnRhaW5lcnMgPSAoKSA9PiAkbG9jYXRpb24ucGF0aChVcmxIZWxwZXJzLmpvaW4oJy93b3Jrc3BhY2VzJywgJHNjb3BlLm5hbWVzcGFjZSwgJ3Byb2plY3RzJywgJHNjb3BlLnByb2plY3RJZCwgJ3Byb2ZpbGVzJywgJ2NvbnRhaW5lcnMnLCAnZGVwbG95UHJvZmlsZXMnKSk7XG5cbiAgICAkc2NvcGUuYXNzaWduUHJvZmlsZXMgPSAoKSA9PiAkbG9jYXRpb24ucGF0aChVcmxIZWxwZXJzLmpvaW4oJy93b3Jrc3BhY2VzJywgJHNjb3BlLm5hbWVzcGFjZSwgJ3Byb2plY3RzJywgJHNjb3BlLnByb2plY3RJZCwgJ3Byb2ZpbGVzJywgJ2NvbnRhaW5lcnMnLCAnYXNzaWduUHJvZmlsZXMnKSk7XG5cbiAgICAkc2NvcGUuZGVsZXRlQ29udGFpbmVycyA9ICgpID0+IHtcbiAgICAgIGxldCB3aWtpID0gbmV3IFdpa2kuR2l0V2lraVJlcG9zaXRvcnkoJHNjb3BlKTtcbiAgICAgIC8vIFRPRE86IHVzZSBQYXR0ZXJuRmx5IG5vdGlmaWNhdGlvbnNcbiAgICAgIGxldCBzdWNjZXNzID0gKHJlc3BvbnNlLCBjb250YWluZXIpID0+IHtcbiAgICAgICAgV2lraS5vbkNvbXBsZXRlKHJlc3BvbnNlKTtcbiAgICAgICAgQ29yZS5ub3RpZmljYXRpb24oJ3N1Y2Nlc3MnLCBjb250YWluZXIgKyAnIGRlbGV0ZWQhJyk7XG4gICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICB9O1xuICAgICAgbGV0IGZhaWx1cmUgPSByZXNwb25zZSA9PiB7XG4gICAgICAgIENvcmUubm90aWZpY2F0aW9uKCdlcnJvcicsIHJlc3BvbnNlKTtcbiAgICAgICAgY29tcGxldGUoKTtcbiAgICAgIH07XG4gICAgICBsZXQgY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgIGlmICgtLXNhdmluZyA9PT0gMCkge1xuICAgICAgICAgIGJsb2NrVGFibGUubWVzc2FnZSgnUmVmcmVzaGluZyAuLi4nKTtcbiAgICAgICAgICBjb250YWluZXJzLmxvYWQod2lraSwgJHNjb3BlLmJyYW5jaCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBibG9ja1RhYmxlLnN0b3AoKTtcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFVybEhlbHBlcnMuam9pbignL3dvcmtzcGFjZXMnLCAkc2NvcGUubmFtZXNwYWNlLCAncHJvamVjdHMnLCAkc2NvcGUucHJvamVjdElkLCAncHJvZmlsZXMnLCAnY29udGFpbmVycycpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGJsb2NrVGFibGUuc3RhcnQoXCJTYXZpbmcgLi4uXCIpO1xuICAgICAgY29udGFpbmVycy5jYXJ0LmZvckVhY2goY29udGFpbmVyID0+IHtcbiAgICAgICAgc2F2aW5nKys7XG4gICAgICAgIHdpa2kucmVtb3ZlUGFnZSgkc2NvcGUuYnJhbmNoLCBjb250YWluZXIucGF0aCwgJ0RlbGV0ZSBjb250YWluZXInLCAocmVzcG9uc2UpID0+IHN1Y2Nlc3MocmVzcG9uc2UsIGNvbnRhaW5lci5uYW1lKS8qLCBmYWlsdXJlKi8pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5yZWZyZXNoID0gKCkgPT4gY29udGFpbmVycy5sb2FkKG5ldyBXaWtpLkdpdFdpa2lSZXBvc2l0b3J5KCRzY29wZSksICRzY29wZS5icmFuY2gsICRzY29wZS5uYW1lc3BhY2UpO1xuICB9XSlcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vaW5jbHVkZXMudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicHJvZmlsZXNQbHVnaW4udHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicHJvZmlsZXNIZWxwZXJzLnRzXCIvPlxuXG5tb2R1bGUgUHJvZmlsZXMge1xuXG4gIG1vZHVsZS5jb250cm9sbGVyKCdQcm9maWxlcy5EZXBsb3lQcm9maWxlc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnJHRlbXBsYXRlQ2FjaGUnLCAncHJvZmlsZXMnLCAnY29udGFpbmVycycsICdibG9ja1VJJywgKCRzY29wZSwgJGxvY2F0aW9uLCAkdGVtcGxhdGVDYWNoZSwgcHJvZmlsZXM6IFByb2ZpbGVzLCBjb250YWluZXJzOiBDb250YWluZXJzLCBibG9ja1VJKSA9PiB7XG4gICAgJHNjb3BlLnRhYnMgPSBjcmVhdGVQcm9maWxlc1N1Yk5hdkJhcnMoJHNjb3BlLm5hbWVzcGFjZSwgJHNjb3BlLnByb2plY3RJZCk7XG4gICAgLy8gQXNzb2NpYXRlIHRoaXMgY29udHJvbGxlciBzY29wZSB0byB0aGUgRm9yZ2VQcm9qZWN0U2VydmljZVxuICAgIEZvcmdlLnVwZGF0ZUZvcmdlUHJvamVjdCgkc2NvcGUpO1xuICAgICRzY29wZS5naXRSZXN0VXJsID0gcGF0aCA9PiBXaWtpLmdpdFJlc3RVUkwoJHNjb3BlLCBwYXRoKTtcblxuICAgICRzY29wZS5wcm9maWxlcyA9IHByb2ZpbGVzO1xuICAgICRzY29wZS5jb250YWluZXJzID0gY29udGFpbmVycztcbiAgICAkc2NvcGUuc2VsZWN0ID0ge1xuICAgICAgbmFtZXM6IFtdXG4gICAgfTtcbiAgICAkc2NvcGUuc2VsZWN0YWJsZSA9IGZhbHNlO1xuICAgICRzY29wZS5wcm9maWxlR3JvdXBzID0gKHByb2ZpbGU6IFByb2ZpbGUpID0+IHByb2ZpbGUudGFncy5sZW5ndGggPiAwID8gcHJvZmlsZS50YWdzWzBdIDogJyc7XG5cbiAgICBsZXQgc2F2aW5nOm51bWJlciA9IDA7XG4gICAgJHNjb3BlLnNhdmluZyA9ICgpID0+IHNhdmluZyA+IDA7XG5cbiAgICBsZXQgYmxvY2tUYWJsZSA9IGJsb2NrVUkuaW5zdGFuY2VzLmdldCgnYmxvY2tUYWJsZScpO1xuXG4gICAgJHNjb3BlLmRlcGxveVByb2ZpbGVzID0gKCkgPT4ge1xuICAgICAgbGV0IHdpa2kgPSBuZXcgV2lraS5HaXRXaWtpUmVwb3NpdG9yeSgkc2NvcGUpO1xuICAgICAgLy8gVE9ETzogdXNlIFBhdHRlcm5GbHkgbm90aWZpY2F0aW9uc1xuICAgICAgbGV0IHN1Y2Nlc3MgPSByZXNwb25zZSA9PiB7XG4gICAgICAgIFdpa2kub25Db21wbGV0ZShyZXNwb25zZSk7XG4gICAgICAgIENvcmUubm90aWZpY2F0aW9uKCdzdWNjZXNzJywgcmVzcG9uc2UuZmlsZSArICcgc2F2ZWQhJyk7XG4gICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICB9O1xuICAgICAgbGV0IGZhaWx1cmUgPSByZXNwb25zZSA9PiB7XG4gICAgICAgIENvcmUubm90aWZpY2F0aW9uKCdlcnJvcicsIHJlc3BvbnNlKTtcbiAgICAgICAgY29tcGxldGUoKTtcbiAgICAgIH07XG4gICAgICBsZXQgY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgIGlmICgtLXNhdmluZyA9PT0gMCkge1xuICAgICAgICAgIGJsb2NrVGFibGUubWVzc2FnZSgnUmVmcmVzaGluZyAuLi4nKTtcbiAgICAgICAgICBjb250YWluZXJzLmxvYWQod2lraSwgJHNjb3BlLmJyYW5jaCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBibG9ja1RhYmxlLnN0b3AoKTtcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFVybEhlbHBlcnMuam9pbignL3dvcmtzcGFjZXMnLCAkc2NvcGUubmFtZXNwYWNlLCAncHJvamVjdHMnLCAkc2NvcGUucHJvamVjdElkLCAncHJvZmlsZXMnLCAnY29udGFpbmVycycpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGJsb2NrVGFibGUuc3RhcnQoXCJTYXZpbmcgLi4uXCIpO1xuICAgICAgc2F2aW5nKys7XG4gICAgICAkc2NvcGUuc2VsZWN0Lm5hbWVzLmZvckVhY2gobmFtZSA9PlxuICAgICAgICB3aWtpLnB1dFBhZ2UoJHNjb3BlLmJyYW5jaCwgJ2NvbmZpZ3MvY29udGFpbmVycy8nICsgbmFtZSArICcuY2ZnJywgZGVwbG95UHJvZmlsZXMobmFtZSwgcHJvZmlsZXMuY2FydCksICdEZXBsb3kgcHJvZmlsZXMgaW50byAnICsgbmFtZSwgc3VjY2VzcywgZmFpbHVyZSkpO1xuICAgIH07XG5cbiAgICBsZXQgZGVwbG95UHJvZmlsZXMgPSAoY29udGFpbmVyOiBzdHJpbmcsIHByb2ZpbGVzOiBQcm9maWxlW10pOnN0cmluZyA9PlxuICAgICAgICBwcm9maWxlcy5yZWR1Y2UoKHByb2ZpbGVzOiBzdHJpbmcsIHByb2ZpbGU6IFByb2ZpbGUpID0+IHByb2ZpbGVzICsgcHJvZmlsZS5pZCArICcgJywgJ3Byb2ZpbGVzPScpXG4gICAgICAgICAgLmNvbmNhdCgnXFxuJylcbiAgICAgICAgICAuY29uY2F0KCdjb250YWluZXItdHlwZT1rYXJhZiBqZW5raW5zZmlsZScpO1xuXG4gICAgJHNjb3BlLmV4aXN0aW5nQ29udGFpbmVycyA9IG5hbWVzID0+IF8uaW50ZXJzZWN0aW9uKG5hbWVzLCBfLnBsdWNrKGNvbnRhaW5lcnMuZGF0YSwgJ25hbWUnKSk7XG5cbiAgICAkc2NvcGUucmVmcmVzaENvbnRhaW5lcnMgPSAoKSA9PiBjb250YWluZXJzLmxvYWQobmV3IFdpa2kuR2l0V2lraVJlcG9zaXRvcnkoJHNjb3BlKSwgJHNjb3BlLmJyYW5jaCk7XG4gICAgJHNjb3BlLnJlZnJlc2hQcm9maWxlcyA9ICgpID0+IHtcbiAgICAgIGlmICghcHJvZmlsZXMubG9hZGluZykge1xuICAgICAgICBwcm9maWxlcy5sb2FkKG5ldyBXaWtpLkdpdFdpa2lSZXBvc2l0b3J5KCRzY29wZSksICRzY29wZS5icmFuY2gpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoIShjb250YWluZXJzLmxvYWRlZCB8fCBjb250YWluZXJzLmxvYWRpbmcpKSB7XG4gICAgICAkc2NvcGUucmVmcmVzaENvbnRhaW5lcnMoKTtcbiAgICB9XG4gIH1dKVxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9pbmNsdWRlcy50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJwcm9maWxlc1BsdWdpbi50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJwcm9maWxlc0hlbHBlcnMudHNcIi8+XG5cbm1vZHVsZSBQcm9maWxlcyB7XG5cbiAgZXhwb3J0IGludGVyZmFjZSBQcm9maWxlIHtcbiAgICBpZDogICAgICAgICAgc3RyaW5nO1xuICAgIHBhdGg6ICAgICAgICBzdHJpbmc7XG4gICAgbmFtZTogICAgICAgIHN0cmluZztcbiAgICB0YWdzPzogICAgICAgc3RyaW5nW107XG4gICAgc3VtbWFyeT86ICAgIHN0cmluZztcbiAgICBzdW1tYXJ5VXJsPzogc3RyaW5nO1xuICAgIGljb24/OiAgICAgICBzdHJpbmc7XG4gICAgaWNvblVybD86ICAgIHN0cmluZztcbiAgfVxuXG4gIGV4cG9ydCBjbGFzcyBQcm9maWxlcyB7XG4gICAgbG9hZGVkOmJvb2xlYW4gPSBmYWxzZTtcbiAgICBsb2FkaW5nOmJvb2xlYW4gPSBmYWxzZTtcbiAgICBkYXRhOlByb2ZpbGVbXSA9IFtdO1xuICAgIGNhcnQ6UHJvZmlsZVtdID0gW107XG4gICAgcHJpdmF0ZSByZXF1ZXN0czpudW1iZXIgPSAwO1xuXG4gICAgbG9hZCA9ICh3aWtpOldpa2kuR2l0V2lraVJlcG9zaXRvcnksIGJyYW5jaDpzdHJpbmcsIHBhdGg6c3RyaW5nID0gJ3Byb2ZpbGVzJyk6dm9pZCA9PiB7XG4gICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgdGhpcy5kYXRhLmxlbmd0aCA9IDA7XG4gICAgICB0aGlzLnJlcXVlc3RzID0gMDtcbiAgICAgIHRoaXMuZmluZFByb2ZpbGVzKHdpa2ksIGJyYW5jaCwgcGF0aCk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgZmluZFByb2ZpbGVzID0gKHdpa2k6V2lraS5HaXRXaWtpUmVwb3NpdG9yeSwgYnJhbmNoOnN0cmluZywgcGF0aDpzdHJpbmcpOnZvaWQgPT4ge1xuICAgICAgdGhpcy5yZXF1ZXN0cysrO1xuICAgICAgLy8gd2UgbmVlZCB0byByZWN1cnNpdmVseSB0cmF2ZXJzZSB0aGUgcHJvZmlsZXMgZGlyIHRvIGxvb2sgZm9yIHByb2ZpbGVzXG4gICAgICB3aWtpLmdldFBhZ2UoYnJhbmNoLCBwYXRoLCBudWxsLCBkYXRhID0+IHtcbiAgICAgICAgaWYoZGF0YS5jaGlsZHJlbikge1xuICAgICAgICAgIF8uZm9yRWFjaChkYXRhLmNoaWxkcmVuLCB2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZih2YWx1ZS5kaXJlY3RvcnkgJiYgXy5lbmRzV2l0aCh2YWx1ZS5uYW1lLCAnLnByb2ZpbGUnKSkge1xuICAgICAgICAgICAgICB0aGlzLmxvYWRQcm9maWxlKHdpa2ksIGJyYW5jaCwgdmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5kaXJlY3RvcnkpIHtcbiAgICAgICAgICAgICAgdGhpcy5maW5kUHJvZmlsZXMod2lraSwgYnJhbmNoLCB2YWx1ZS5wYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbXBsZXRlKCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBsb2FkUHJvZmlsZSA9ICh3aWtpOldpa2kuR2l0V2lraVJlcG9zaXRvcnksIGJyYW5jaDpzdHJpbmcsIHZhbHVlOmFueSk6dm9pZCA9PiB7XG4gICAgICB2YXIgaW5mbyA9IC9ecHJvZmlsZXNcXC8oKD86LispXFwvKSooLispLnByb2ZpbGUkLy5leGVjKHZhbHVlLnBhdGgpO1xuICAgICAgdmFyIHByb2ZpbGUgPSA8UHJvZmlsZT57XG4gICAgICAgIGlkOiAgIChpbmZvWzFdID8gaW5mb1sxXS5yZXBsYWNlKC9cXC8vZywgJy0nKSA6ICcnKSArIGluZm9bMl0sXG4gICAgICAgIG5hbWU6IGluZm9bMl0sXG4gICAgICAgIHBhdGg6IHZhbHVlLnBhdGgsXG4gICAgICAgIHRhZ3M6IGluZm9bMV0gPyBpbmZvWzFdLnNsaWNlKDAsIC0xKS5zcGxpdCgnLycpIDogW11cbiAgICAgIH07XG5cbiAgICAgIHRoaXMucmVxdWVzdHMrKztcbiAgICAgIHdpa2kuZ2V0UGFnZShicmFuY2gsIHZhbHVlLnBhdGgsIG51bGwsIGRhdGEgPT4ge1xuICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBkYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgICAgbGV0IG5hbWUgPSBjaGlsZC5uYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgaWYgKG5hbWUgPT0gJ1JFQURNRS5NRCcgfHwgbmFtZSA9PSAnU1VNTUFSWS5NRCcpIHtcbiAgICAgICAgICAgIHByb2ZpbGUuc3VtbWFyeVVybCA9IGNoaWxkLnBhdGg7XG4gICAgICAgICAgfSBlbHNlIGlmIChuYW1lID09ICdJQ09OLlNWRycpIHtcbiAgICAgICAgICAgIHByb2ZpbGUuaWNvblVybCA9IGNoaWxkLnBhdGg7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFJlcGxhY2UgdGhlIGV4aXN0aW5nIHByb2ZpbGUgd2l0aCB0aGUgbmV3IGxvYWRlZCBvbmVcbiAgICAgICAgdGhpcy5kYXRhLnNwbGljZShfLnNvcnRlZEluZGV4KHRoaXMuZGF0YSwgcHJvZmlsZSwgJ2lkJyksIDAsIHByb2ZpbGUpO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIHByb2ZpbGVzIHNlbGVjdGlvbiBpbiBjYXNlIGl0IGNvbnRhaW5zIHRoaXMgcHJvZmlsZVxuICAgICAgICBsZXQgaSA9IF8uZmluZEluZGV4KHRoaXMuY2FydCwge2lkOiBwcm9maWxlLmlkfSk7XG4gICAgICAgIGlmIChpID49IDApIHtcbiAgICAgICAgICB0aGlzLmNhcnRbaV0gPSBwcm9maWxlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb21wbGV0ZSgpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgY29tcGxldGUgPSAoKTp2b2lkID0+IHtcbiAgICAgIGlmICgtLXRoaXMucmVxdWVzdHMgPT09IDApIHtcbiAgICAgICAgU2VsZWN0aW9uSGVscGVycy5zeW5jR3JvdXBTZWxlY3Rpb24odGhpcy5jYXJ0LCB0aGlzLmRhdGEsICdpZCcpO1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sb2FkZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBjbGFzcyBQcm9maWxlVmlldyB7XG4gICAgb3BlbjogIGJvb2xlYW47XG4gICAgZm9yY2U6IGJvb2xlYW47XG4gICAgc2NvcGU6IGFueTtcblxuICAgIGNvbnN0cnVjdG9yIChzY29wZTogYW55KSB7XG4gICAgICB0aGlzLnNjb3BlID0gc2NvcGU7XG4gICAgfVxuXG4gICAgZ2V0IG9wZW5PclNpbmdsZSgpOmJvb2xlYW4ge1xuICAgICAgbGV0IHNjb3BlID0gdGhpcy5zY29wZTtcbiAgICAgIGlmIChzY29wZS5maWx0ZXJlZFByb2ZpbGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBpZiAoIXRoaXMuZm9yY2UgJiYgKCFzY29wZS5sb2FkaW5nKCkgfHwgc2NvcGUucHJvZmlsZXMubGVuZ3RoID4gMSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mb3JjZSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMub3BlbjtcbiAgICB9XG5cbiAgICBzZXQgb3Blbk9yU2luZ2xlKG9wZW46Ym9vbGVhbikge1xuICAgICAgaWYgKHRoaXMuc2NvcGUuZmlsdGVyZWRQcm9maWxlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgdGhpcy5mb3JjZSA9IHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLm9wZW4gPSBvcGVuO1xuICAgIH1cbiAgfVxuXG4gIGNsYXNzIFByb2ZpbGVWaWV3cyB7XG4gICAgc2VsZWN0ZWRUYWdzOnN0cmluZ1tdID0gW107XG4gICAgcHJvZmlsZVZpZXdzOk9iamVjdCAgID0ge307XG4gIH1cblxuICBtb2R1bGUuc2VydmljZSgncHJvZmlsZXMnLCBQcm9maWxlcyk7XG4gIG1vZHVsZS5zZXJ2aWNlKCdwcm9maWxlVmlld3MnLCBQcm9maWxlVmlld3MpO1xuXG4gIC8vIEV4cG9zZSBqcy15YW1sIGFzIGNvbnN0YW50IGZvciBpbmplY3Rpb25cbiAgbW9kdWxlLmNvbnN0YW50KCdqc3lhbWwnLCBqc3lhbWwpO1xuXG4gIG1vZHVsZS5maWx0ZXIoJ2ZpbHRlckNvbGxlY3Rpb24nLCAoKSA9PiAoY29sbGVjdGlvbiwgdGV4dCkgPT5cbiAgICBDb3JlLmlzQmxhbmsodGV4dClcbiAgICAgID8gY29sbGVjdGlvblxuICAgICAgOiBfLmZpbHRlcihjb2xsZWN0aW9uLCBpdGVtID0+IEZpbHRlckhlbHBlcnMuc2VhcmNoT2JqZWN0KGl0ZW0sIHRleHQpKSk7XG5cbiAgbW9kdWxlLmNvbnRyb2xsZXIoJ1Byb2ZpbGVzLlByb2ZpbGVzQ29udHJvbGxlcicsXG4gICAgICBbJyRzY29wZScsICckbG9jYXRpb24nLCAnbWFya2VkJywgJyRzY2UnLCAncHJvZmlsZXMnLCAncHJvZmlsZVZpZXdzJyxcbiAgICAgICAoJHNjb3BlLCAkbG9jYXRpb24sIG1hcmtlZCwgJHNjZSwgcHJvZmlsZXM6IFByb2ZpbGVzLCBwcm9maWxlVmlld3M6IFByb2ZpbGVWaWV3cykgPT4ge1xuICAgICRzY29wZS50YWJzID0gY3JlYXRlUHJvZmlsZXNTdWJOYXZCYXJzKCRzY29wZS5uYW1lc3BhY2UsICRzY29wZS5wcm9qZWN0SWQpO1xuICAgIC8vIEFzc29jaWF0ZSB0aGlzIGNvbnRyb2xsZXIgc2NvcGUgdG8gdGhlIEZvcmdlUHJvamVjdFNlcnZpY2VcbiAgICBGb3JnZS51cGRhdGVGb3JnZVByb2plY3QoJHNjb3BlKTtcbiAgICAkc2NvcGUuZ2l0UmVzdFVybCA9IHBhdGggPT4gV2lraS5naXRSZXN0VVJMKCRzY29wZSwgcGF0aCk7XG5cbiAgICAkc2NvcGUucHJvZmlsZXMgPSBwcm9maWxlcy5kYXRhO1xuICAgICRzY29wZS5zZWxlY3Rpb24gPSBwcm9maWxlcy5jYXJ0O1xuXG4gICAgJHNjb3BlLnNlbGVjdGVkVGFncyA9IHByb2ZpbGVWaWV3cy5zZWxlY3RlZFRhZ3M7XG4gICAgJHNjb3BlLnByb2ZpbGVWaWV3cyA9IHByb2ZpbGVWaWV3cy5wcm9maWxlVmlld3M7XG5cbiAgICBTZWxlY3Rpb25IZWxwZXJzLmRlY29yYXRlKCRzY29wZSk7XG4gICAgJHNjb3BlLmlzQmxhbmsgPSBDb3JlLmlzQmxhbms7XG4gICAgJHNjb3BlLmxvYWRpbmcgPSAoKSA9PiBwcm9maWxlcy5sb2FkaW5nO1xuICAgICRzY29wZS53aWtpTGluayA9IHBhdGggPT4gV2lraS52aWV3TGluaygkc2NvcGUucHJvamVjdElkLCAkc2NvcGUuYnJhbmNoLCBwYXRoLCAkbG9jYXRpb24pO1xuXG4gICAgbGV0IHdpa2kgPSBuZXcgV2lraS5HaXRXaWtpUmVwb3NpdG9yeSgkc2NvcGUpO1xuXG4gICAgJHNjb3BlLmxvYWRTdW1tYXJ5ID0gKHByb2ZpbGU6IFByb2ZpbGUpID0+IHtcbiAgICAgIGlmIChwcm9maWxlLnN1bW1hcnlVcmwpIHtcbiAgICAgICAgbGV0IHJlbmRlcmVyID0gbmV3IG1hcmtlZC5SZW5kZXJlcigpO1xuICAgICAgICAvLyBBZGFwdCB0aGUgcmVsYXRpdmUgaW1hZ2UgVVJMcyB0byByZXRyaWV2ZSBjb250ZW50IGZyb20gdGhlIEZvcmdlIEFQSVxuICAgICAgICByZW5kZXJlci5pbWFnZSA9IChocmVmOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcsIHRleHQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgIGxldCB1cmkgPSBuZXcgVVJJKGhyZWYpO1xuICAgICAgICAgIGlmICh1cmkuaXMoJ3JlbGF0aXZlJykpIHtcbiAgICAgICAgICAgIGlmIChfLnN0YXJ0c1dpdGgodXJpLnBhdGgoKSwgJy8nKSkge1xuICAgICAgICAgICAgICB1cmkuc2VnbWVudChbJ3Byb2ZpbGVzJywgLi4udXJpLnNlZ21lbnQoKV0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdXJpID0gdXJpLmFic29sdXRlVG8oVXJsSGVscGVycy5qb2luKHByb2ZpbGUucGF0aCwgJy8nKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBHZXQgdGhlIGltYWdlIFVSTCBmb3IgdGhlIEZvcmdlIFJFU1QgQVBJXG4gICAgICAgICAgICBsZXQgc3JjID0gV2lraS5naXRSZXN0VVJMKCRzY29wZSwgdXJpLm5vcm1hbGl6ZSgpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgLy8gYW5kIHVzZSBVUkwuY3JlYXRlT2JqZWN0VVJMIHZpYSBhbmd1bGFyLWltZy1odHRwLXNyYyB0byBnZXQgYW4gVVJMIGZvciB0aGUgaW1hZ2UgQkxPQlxuICAgICAgICAgICAgcmV0dXJuICc8aW1nIHNyYz1cImltZy9sb2FkZXIuc3ZnXCIgaHR0cC1zcmM9XCInICsgc3JjICsgJ1wiIGFsdD1cIicgKyAodGl0bGUgPyB0aXRsZSA6IHRleHQpICsgJ1wiIC8+JztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU2ltcGx5IHJldHVybiB0aGUgaW1nIHRhZyB3aXRoIHRoZSBvcmlnaW5hbCBsb2NhdGlvblxuICAgICAgICAgICAgcmV0dXJuICc8aW1nIHNyYz1cIicgKyBocmVmICsgJ1wiIGFsdD1cIicgKyAodGl0bGUgPyB0aXRsZSA6IHRleHQpICsgJ1wiIC8+JztcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgd2lraS5nZXRQYWdlKCRzY29wZS5icmFuY2gsIHByb2ZpbGUuc3VtbWFyeVVybCwgbnVsbCxcbiAgICAgICAgICAgIGRhdGEgPT4gcHJvZmlsZS5zdW1tYXJ5ID0gbWFya2VkKGRhdGEudGV4dCwge3JlbmRlcmVyOiByZW5kZXJlcn0pKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2ZpbGUuc3VtbWFyeSA9ICc8ZW0+bm8gc3VtbWFyeTwvZW0+JztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgJHNjb3BlLmFzc2lnblByb2ZpbGVzID0gKCkgPT4gJGxvY2F0aW9uLnBhdGgoVXJsSGVscGVycy5qb2luKCcvd29ya3NwYWNlcycsICRzY29wZS5uYW1lc3BhY2UsICdwcm9qZWN0cycsICRzY29wZS5wcm9qZWN0SWQsICdwcm9maWxlcycsICdjb250YWluZXJzJywgJ2Fzc2lnblByb2ZpbGVzJykpO1xuXG4gICAgJHNjb3BlLmRlcGxveVByb2ZpbGVzID0gKCkgPT4gJGxvY2F0aW9uLnBhdGgoVXJsSGVscGVycy5qb2luKCcvd29ya3NwYWNlcycsICRzY29wZS5uYW1lc3BhY2UsICdwcm9qZWN0cycsICRzY29wZS5wcm9qZWN0SWQsICdwcm9maWxlcycsICdjb250YWluZXJzJywgJ2RlcGxveVByb2ZpbGVzJykpO1xuXG4gICAgbGV0IHVwZGF0ZVByb2ZpbGVWaWV3cyA9IHByb2ZpbGVzID0+IF8ucmVkdWNlKHByb2ZpbGVzLCAocHJvZmlsZVZpZXdzOiBQcm9maWxlVmlld3MsIHByb2ZpbGU6IFByb2ZpbGUpID0+IHtcbiAgICAgIGlmICghXy5oYXMocHJvZmlsZVZpZXdzLCBwcm9maWxlLmlkKSkge1xuICAgICAgICBwcm9maWxlVmlld3NbcHJvZmlsZS5pZF0gPSBuZXcgUHJvZmlsZVZpZXcoJHNjb3BlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2ZpbGVWaWV3c1twcm9maWxlLmlkXS5zY29wZSA9ICRzY29wZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcm9maWxlVmlld3M7XG4gICAgfSwgJHNjb3BlLnByb2ZpbGVWaWV3cyk7XG5cbiAgICBfLmtleXMoJHNjb3BlLnByb2ZpbGVWaWV3cykuZm9yRWFjaChrZXkgPT4gZGVsZXRlICRzY29wZS5wcm9maWxlVmlld3Nba2V5XSk7XG4gICAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oJ3Byb2ZpbGVzJywgdXBkYXRlUHJvZmlsZVZpZXdzKTtcblxuICAgICRzY29wZS5yZWZyZXNoID0gKCkgPT4gcHJvZmlsZXMubG9hZCh3aWtpLCAkc2NvcGUuYnJhbmNoKTtcblxuICAgIGlmICghKHByb2ZpbGVzLmxvYWRlZCB8fCBwcm9maWxlcy5sb2FkaW5nKSkge1xuICAgICAgJHNjb3BlLnJlZnJlc2goKTtcbiAgICB9XG4gIH1dKVxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9pbmNsdWRlcy50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJwcm9maWxlc1BsdWdpbi50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJwcm9maWxlc0hlbHBlcnMudHNcIi8+XG5cbm1vZHVsZSBQcm9maWxlcyB7XG5cbiAgbW9kdWxlLmNvbnRyb2xsZXIoJ1Byb2ZpbGVzLlNldHRpbmdzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgKCRzY29wZSkgPT4ge1xuICAgICAgJHNjb3BlLnRhYnMgPSBjcmVhdGVQcm9maWxlc1N1Yk5hdkJhcnMoJHNjb3BlLm5hbWVzcGFjZSwgJHNjb3BlLnByb2plY3RJZCk7XG4gICAgICAvLyBBc3NvY2lhdGUgdGhpcyBjb250cm9sbGVyIHNjb3BlIHRvIHRoZSBGb3JnZVByb2plY3RTZXJ2aWNlXG4gICAgICBGb3JnZS51cGRhdGVGb3JnZVByb2plY3QoJHNjb3BlKTtcblxuICAgICAgdmFyIHdpa2lSZXBvc2l0b3J5ID0gbmV3IFdpa2kuR2l0V2lraVJlcG9zaXRvcnkoJHNjb3BlKTtcbiAgXG4gICAgICAvLyBXZSB1c2UgJHNjb3BlLmxvYWRpbmcgdG8gcmVmZXJlbmNlIGNvdW50IGxvYWRpbmcgb3BlcmF0aW9ucyBzbyB0aGF0IHdlIGtub3cgd2hlbiBhbGwgdGhlIGRhdGFcbiAgICAgIC8vIGZvciB0aGlzIHZpZXcgaGFzIGJlZW4gZmV0Y2hlZC5cbiAgICAgICRzY29wZS5sb2FkaW5nID0gMDtcblxuICAgICAgJHNjb3BlLmNvbmZpZyA9IHtcbiAgICAgICAgc3R5bGU6IEhhd3Rpb0Zvcm1zLkZvcm1TdHlsZS5TVEFOREFSRCxcbiAgICAgICAgbW9kZTogSGF3dGlvRm9ybXMuRm9ybU1vZGUuVklFVyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGdpdFJlbW90ZVVyaVBhdHRlcm46IHtcbiAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdHaXQgcmVtb3RlIFVSSSBwYXR0ZXJuIGZvciBhbGwgY29udGFpbmVycywgbmFtZSBpcyB0aGUgbmFtZSBvZiB0aGUgY29udGFpbmVyLCBlLmcuIHJvb3QnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBnb2dzVXNlcm5hbWU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZydcbiAgICAgICAgICB9LFxuICAgICAgICAgIGdvZ3NQYXNzd29yZDoge1xuICAgICAgICAgICAgICB0eXBlOiAncGFzc3dvcmQnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBncm91cElkOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB2ZXJzaW9uOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUucmVmcmVzaCA9ICgpID0+IHtcbiAgICAgICAgJHNjb3BlLmxvYWRpbmcrKztcbiAgICAgICAgd2lraVJlcG9zaXRvcnkuZ2V0UGFnZSgkc2NvcGUuYnJhbmNoLCAnZmFicmljOC1wcm9maWxlcy5jZmcnLCBudWxsLCBkYXRhID0+IHtcbiAgICAgICAgICAkc2NvcGUubG9hZGluZy0tO1xuICAgICAgICAgICRzY29wZS5zZXR0aW5ncyA9IGRhdGEudGV4dDtcbiAgICAgICAgICAkc2NvcGUucHJvcGVydGllcyA9IHBhcnNlUHJvcGVydGllcyhkYXRhLnRleHQpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS4kd2F0Y2goJ2xvYWRpbmcnLCB2YWx1ZSA9PiAkc2NvcGUuY29uZmlnLm1vZGUgPSB2YWx1ZSA+IDBcbiAgICAgICAgPyBIYXd0aW9Gb3Jtcy5Gb3JtTW9kZS5WSUVXXG4gICAgICAgIDogSGF3dGlvRm9ybXMuRm9ybU1vZGUuRURJVCk7XG5cbiAgICAgICRzY29wZS5zYXZlID0gKCkgPT4ge1xuICAgICAgICB2YXIgZWRpdCA9IGFwcGx5KCRzY29wZS5wcm9wZXJ0aWVzLCAkc2NvcGUuc2V0dGluZ3MpO1xuICAgICAgICBpZiAoZWRpdCAhPSAkc2NvcGUuc2V0dGluZ3MpIHtcbiAgICAgICAgICAkc2NvcGUubG9hZGluZysrO1xuICAgICAgICAgIC8vIFRPRE86IHVzZSBQYXR0ZXJuRmx5IG5vdGlmaWNhdGlvbnNcbiAgICAgICAgICB3aWtpUmVwb3NpdG9yeS5wdXRQYWdlKCRzY29wZS5icmFuY2gsICdmYWJyaWM4LXByb2ZpbGVzLmNmZycsIGVkaXQsICdVcGRhdGUgcHJvZmlsZXMgc2V0dGluZ3MnLFxuICAgICAgICAgICAgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICBXaWtpLm9uQ29tcGxldGUocmVzcG9uc2UpO1xuICAgICAgICAgICAgICBDb3JlLm5vdGlmaWNhdGlvbignc3VjY2VzcycsIHJlc3BvbnNlLmZpbGUgKyAnIHNhdmVkIScpO1xuICAgICAgICAgICAgICAkc2NvcGUubG9hZGluZy0tO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgQ29yZS5ub3RpZmljYXRpb24oJ2Vycm9yJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAkc2NvcGUubG9hZGluZy0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGxldCBhcHBseSA9IChwcm9wZXJ0aWVzOmFueSwgc2V0dGluZ3M6c3RyaW5nKTpzdHJpbmcgPT5cbiAgICAgICAgc2V0dGluZ3MucmVwbGFjZSgvXihbXiM9XSspPSguKikkL2dtLCAobWF0Y2gsIGtleSwgdmFsdWUpID0+IGtleSArICc9JyArIHByb3BlcnRpZXNba2V5XSB8fCB2YWx1ZSk7XG5cbiAgICAgICRzY29wZS5yZWZyZXNoKCk7XG4gICAgfVxuICBdKTtcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=

angular.module("hawtio-profiles-templates", []).run(["$templateCache", function($templateCache) {$templateCache.put("plugins/profiles/html/assignProfiles.html","<div ng-controller=\"Profiles.AssignProfilesController\">\n\n  <div class=\"row\">\n    <div template-cache-include=\"plugins/kubernetes/html/tabs.html\"></div>\n  </div>\n\n  <h2>Assign profile(s) to container(s)</h2>\n\n  <div class=\"row\">\n    <form class=\"form-horizontal\">\n      <div class=\"form-group has-feedback\" ng-class=\"profiles.cart.length > 0 ? \'has-success\' : \'has-error\'\">\n        <label class=\"control-label col-sm-2\">Profile(s)</label>\n        <div class=\"col-sm-9\">\n          <div class=\"input-group\">\n            <ui-select multiple sortable=\"true\" ng-model=\"profiles.cart\" theme=\"bootstrap\" aria-describedby=\"selectProfilesStatus\">\n              <ui-select-match placeholder=\"Select profiles...\">\n                <img ng-if=\"$item.iconUrl\" width=\"16px\" height=\"16px\"\n                     class=\"profile-logo\" style=\"max-width: 16px; max-height: 16px\"\n                     src=\"img/loader.svg\"\n                     http-src=\"{{gitRestUrl($item.iconUrl)}}\" media-type=\"image/svg+xml\" />\n                <img ng-if=\"!$item.iconUrl\" width=\"16px\" height=\"16px\"\n                     class=\"profile-logo\" style=\"max-width: 16px; max-height: 16px\"\n                     src=\"img/fabric8_icon.svg\" />\n                {{$item.id}}\n              </ui-select-match>\n              <ui-select-choices group-by=\"profileGroups\" repeat=\"profile in (profiles.data | filter: $select.search) track by profile.id\">\n                <img ng-if=\"profile.iconUrl\"\n                     class=\"profile-logo\" style=\"max-width: 32px; max-height: 32px\"\n                     src=\"img/loader.svg\"\n                     http-src=\"{{gitRestUrl(profile.iconUrl)}}\" media-type=\"image/svg+xml\" />\n                <img ng-if=\"!profile.iconUrl\"\n                     class=\"profile-logo\" style=\"max-width: 32px; max-height: 32px\"\n                     src=\"img/fabric8_icon.svg\" />\n                <span ng-bind-html=\"profile.id | highlight: $select.search\"></span>\n              </ui-select-choices>\n              <ui-select-no-choice>\n                <a ng-click=\"refreshProfiles()\">No profile is available. Click to refresh available profiles.</a>\n              </ui-select-no-choice>\n            </ui-select>\n            <span class=\"glyphicon form-control-feedback\" ng-class=\"profiles.cart.length > 0 ? \'glyphicon-ok\' : \'glyphicon-remove\'\" aria-hidden=\"true\"></span>\n            <span id=\"selectProfilesStatus\" class=\"sr-only\">{{profiles.cart.length > 0 ? \'(success)\' : \'(error)\'}}</span>\n            <span class=\"input-group-addon\">\n              <span class=\"fa fa-refresh\" ng-click=\"refreshProfiles()\" ng-class=\"{\'fa-spin\': profiles.loading}\"></span>\n            </span>\n          </div>\n          <span ng-show=\"profiles.cart.length == 0\" class=\"help-block\">At least one profile is required</span>\n        </div>\n      </div>\n      <div class=\"form-group has-feedback\" ng-class=\"containers.cart.length > 0 ? \'has-success\' : \'has-error\'\">\n        <label class=\"control-label col-sm-2\">Container(s)</label>\n        <div class=\"col-sm-9\">\n          <div class=\"input-group\">\n            <ui-select multiple sortable=\"true\" ng-model=\"containers.cart\" theme=\"bootstrap\" aria-describedby=\"selectContainersStatus\">\n              <ui-select-match placeholder=\"Select containers...\">{{$item.name}}</ui-select-match>\n              <ui-select-choices repeat=\"container in (containers.data | filter: $select.search)\">\n                <div ng-bind-html=\"container.name | highlight: $select.search\"></div>\n              </ui-select-choices>\n              <ui-select-no-choice>\n                No container is available! Click on the refresh button\n              </ui-select-no-choice>\n            </ui-select>\n            <span class=\"glyphicon form-control-feedback\" ng-class=\"containers.cart.length > 0 ? \'glyphicon-ok\' : \'glyphicon-remove\'\" aria-hidden=\"true\"></span>\n            <span id=\"selectContainersStatus\" class=\"sr-only\">{{containers.cart.length > 0 ? \'(success)\' : \'(error)\'}}</span>\n            <span class=\"input-group-addon\">\n              <span class=\"fa fa-refresh\" ng-click=\"refreshContainers()\" ng-class=\"{\'fa-spin\': containers.loading}\"></span>\n            </span>\n          </div>\n          <span ng-show=\"containers.cart.length == 0\" class=\"help-block\">At least one container must be selected</span>\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <div class=\"col-sm-offset-2 col-sm-9\">\n          <button class=\"btn btn-primary pull-right\" ng-disabled=\"profiles.cart.length == 0 || containers.cart.length == 0 || containers.loading || saving()\" ng-click=\"assignProfiles()\"><i class=\"fa fa-cloud-upload\"></i> Assign</button>\n        </div>\n      </div>\n    </form>\n  </div>\n\n  <h2>Containers <i ng-show=\"containers.loading\" class=\"fa fa-refresh fa-spin\"></i> <span class=\"badge\">{{containers.cart.length + \'/\' + containers.data.length}}</span></h2>\n\n  <div class=\"row\" block-ui=\"blockTable\">\n    <div ng-include=\"\'plugins/profiles/html/containerList.html\'\"></div>\n  </div>\n\n</div>\n");
$templateCache.put("plugins/profiles/html/containerList.html","<div ng-controller=\"Profiles.ContainerListController\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <table class=\"table table-bordered table-striped\" hawtio-simple-table=\"tableConfig\"></table>\n    </div>\n  </div>\n</div>\n\n<script type=\"text/ng-template\" id=\"containerName.html\">\n  <div class=\"ngCellText nowrap\">\n    <a ng-if=\"row.entity.deployment\" href=\"\" title=\"View details for {{row.entity.name}}\"\n       ng-href=\"{{row.entity.deployment | kubernetesPageLink}}\">\n      {{row.entity.name}}\n    </a>\n    <span ng-if=\"!row.entity.deployment\">{{row.entity.name}}</span>\n  </div>\n</script>\n\n<script type=\"text/ng-template\" id=\"containerPods.html\">\n  <div class=\"ngCellText nowrap\">\n    <i ng-if=\"!row.entity.deployment || row.entity.deployment.$pods.length === 0\" class=\"fa fa-power-off\"></i>\n    <ul class=\"plain-list\">\n      <li ng-repeat=\"pod in row.entity.deployment.$pods\">\n        <i ng-class=\"pod.$statusCss\"></i>\n        <a href=\"\" title=\"View details for {{pod.metadata.name}}\"\n           ng-href=\"{{pod | kubernetesPageLink}}\">\n          {{pod.metadata.name}}\n        </a>\n        <span ng-show=\"pod.$jolokiaUrl && pod.$ready\" ng-controller=\"Kubernetes.ConnectController\">\n          <!--\n            Redirects to the OpenShift JVM plugin for the corresponding pod\n            Requires to use the \'serve-site\' task for local development\n          -->\n          <a class=\"clickable\"\n             ng-click=\"doConnect(pod)\"\n             title=\"Open a new window and connect to this container\">\n            <i class=\"fa fa-sign-in\"></i>\n          </a>\n        </span>\n        <span ng-show=\"pod.status.phase === \'Running\'\" ng-controller=\"Kubernetes.TermController\">\n          <span ng-repeat=\"container in pod.spec.containers\" ng-show=\"canConnectTo(container)\">\n            <a href=\"\" ng-href=\"{{pod | kubernetesPageLink:\'term\':container.name}}\">\n              <i class=\"fa fa-television clickable\" title=\"Open up a terminal to {{pod.metadata.name}}:{{container.name}}\"></i>\n            </a>\n          </span>\n        </span>\n        <span ng-show=\"pod.status.phase === \'Running\'\" ng-controller=\"Kubernetes.PodLogLinkController\">\n          <span ng-repeat=\"container in pod.spec.containers\">\n            <a href=\"\" ng-href=\"{{pod | kubernetesPageLink:\'log\':container.name}}\">\n              <i class=\"fa fa-file-text clickable\" title=\"Open up the log for {{pod.metadata.name}}:{{container.name}}\"></i>\n            </a>\n          </span>\n        </span>\n      </li>\n    </ul>\n  </div>\n</script>\n\n<script type=\"text/ng-template\" id=\"containerTypes.html\">\n  <div class=\"ngCellText nowrap\">\n    <ul class=\"plain-list\">\n      <li class=\"inline-block\" ng-repeat=\"icon in row.entity.icons\">\n        <hawtio-icon config=\"icon\"/>\n      </li>\n    </ul>\n  </div>\n</script>\n\n<script type=\"text/ng-template\" id=\"containerProfiles.html\">\n  <div class=\"ngCellText nowrap\">\n    <ul class=\"plain-list\">\n      <li class=\"inline-block\" ng-repeat=\"profile in row.entity.profiles\">\n        <button ng-if=\"profile.id\" class=\"btn btn-link\" ng-click=\"$parent.$parent.$parent.$parent.viewProfile(profile);$event.stopPropagation();\">{{profile.id}} <i class=\"fa fa-files-o\"></i></button>\n        <span ng-if=\"!profile.id\" class=\"text-muted\">\n          {{profile}}\n          <i ng-if=\"$parent.$parent.$parent.$parent.profiles.loading\" class=\"fa fa-refresh fa-spin\"></i>\n          <i ng-if=\"$parent.$parent.$parent.$parent.profiles.loaded\" class=\"fa fa-chain-broken\"></i>\n        </span>\n      </li>\n    </ul>\n  </div>\n</script>");
$templateCache.put("plugins/profiles/html/containers.html","<div ng-controller=\"Profiles.ContainersController\">\n\n  <div class=\"row\">\n    <div template-cache-include=\"plugins/kubernetes/html/tabs.html\"></div>\n  </div>\n\n  <button class=\"btn btn-primary pull-right\" ng-disabled=\"containers.loading\" ng-click=\"refresh()\">\n    <i class=\"fa fa-refresh\" ng-class=\"{\'fa-spin\': containers.loading}\"></i> Refresh\n  </button>\n\n  <h2>Containers <i ng-show=\"containers.loading\" class=\"fa fa-refresh fa-spin\"></i> <span class=\"badge\" ng-show=\"containers.data.length > 0\">{{containers.length}}</span></h2>\n\n  <div class=\"row\" block-ui=\"blockTable\">\n    <div ng-include=\"\'plugins/profiles/html/containerList.html\'\"></div>\n  </div>\n\n  <div class=\"row pull-right\">\n    <button class=\"btn btn-link\"\n            type=\"button\"\n            ng-disabled=\"containers.loading || saving()\"\n            ng-click=\"createContainers()\"\n            title=\"Create new container(s) from a set of profiles\">\n      Create <i class=\"fa fa-cubes\"></i>\n    </button>\n    <button class=\"btn btn-link\"\n            type=\"button\"\n            ng-disabled=\"!containers.cart.length || containers.loading || saving()\"\n            ng-click=\"assignProfiles()\"\n            title=\"Modify the selected container(s) by changing the set of profiles\">\n      Assign profiles <i class=\"fa fa-magic\"></i>\n    </button>\n    <button class=\"btn btn-danger\"\n            type=\"button\"\n            ng-disabled=\"!containers.cart.length || containers.loading || saving()\"\n            ng-click=\"deleteContainers()\"\n            title=\"Delete the selected container(s)\">\n      Delete <i class=\"fa fa-times-circle\"></i>\n    </button>\n  </div>\n\n</div>");
$templateCache.put("plugins/profiles/html/deployProfiles.html","<div ng-controller=\"Profiles.DeployProfilesController\">\n\n  <div class=\"row\">\n    <div template-cache-include=\"plugins/kubernetes/html/tabs.html\"></div>\n  </div>\n\n  <h2>Deploy profile(s) into new container(s)</h2>\n\n  <div class=\"row\">\n    <form class=\"form-horizontal\">\n      <div class=\"form-group has-feedback\" ng-class=\"profiles.cart.length > 0 ? \'has-success\' : \'has-error\'\">\n        <label class=\"control-label col-sm-2\">Profile(s)</label>\n        <div class=\"col-sm-9\">\n          <div class=\"input-group\">\n            <ui-select multiple sortable=\"true\" ng-model=\"profiles.cart\" theme=\"bootstrap\" aria-describedby=\"selectProfilesStatus\">\n              <ui-select-match placeholder=\"Select profiles...\">\n                <img ng-if=\"$item.iconUrl\" width=\"16px\" height=\"16px\"\n                     class=\"profile-logo\" style=\"max-width: 16px; max-height: 16px\"\n                     src=\"img/loader.svg\"\n                     http-src=\"{{gitRestUrl($item.iconUrl)}}\" media-type=\"image/svg+xml\" />\n                <img ng-if=\"!$item.iconUrl\" width=\"16px\" height=\"16px\"\n                     class=\"profile-logo\" style=\"max-width: 16px; max-height: 16px\"\n                     src=\"img/fabric8_icon.svg\" />\n                {{$item.id}}\n              </ui-select-match>\n              <ui-select-choices group-by=\"profileGroups\" repeat=\"profile in (profiles.data | filter: $select.search) track by profile.id\">\n                <img ng-if=\"profile.iconUrl\"\n                     class=\"profile-logo\" style=\"max-width: 32px; max-height: 32px\"\n                     src=\"img/loader.svg\"\n                     http-src=\"{{gitRestUrl(profile.iconUrl)}}\" media-type=\"image/svg+xml\" />\n                <img ng-if=\"!profile.iconUrl\"\n                     class=\"profile-logo\" style=\"max-width: 32px; max-height: 32px\"\n                     src=\"img/fabric8_icon.svg\" />\n                <span ng-bind-html=\"profile.id | highlight: $select.search\"></span>\n              </ui-select-choices>\n              <ui-select-no-choice>\n                <a ng-click=\"refreshProfiles()\">No profile is available. Click to refresh available profiles.</a>\n              </ui-select-no-choice>\n            </ui-select>\n            <span class=\"glyphicon form-control-feedback\" ng-class=\"profiles.cart.length > 0 ? \'glyphicon-ok\' : \'glyphicon-remove\'\" aria-hidden=\"true\"></span>\n            <span id=\"selectProfilesStatus\" class=\"sr-only\">{{profiles.cart.length > 0 ? \'(success)\' : \'(error)\'}}</span>\n            <span class=\"input-group-addon\">\n              <span class=\"fa fa-refresh\" ng-click=\"refreshProfiles()\" ng-class=\"{\'fa-spin\': profiles.loading}\"></span>\n            </span>\n          </div>\n          <span ng-show=\"profiles.cart.length == 0\" class=\"help-block\">At least one profile is required</span>\n        </div>\n      </div>\n      <div class=\"form-group has-feedback\" ng-class=\"(status = select.names.length > 0 ? ((existing = existingContainers(select.names)).length > 0 ? \'has-warning\' : \'has-success\') : \'has-error\')\">\n        <label class=\"control-label col-sm-2\">Name(s)</label>\n        <div class=\"col-sm-9\">\n          <ui-select multiple tagging tagging-label=\"false\" tagging-tokens=\"ENTER|SPACE\" ng-model=\"select.names\" theme=\"bootstrap\" aria-describedby=\"selectNamesStatus\">\n            <ui-select-match placeholder=\"Enter names...\">\n              <span ng-if=\"existing.indexOf($item) >= 0\" class=\"glyphicon glyphicon-alert\" ng-class=\"{\'text-warning\': $selectMultiple.activeMatchIndex !== $index}\" aria-hidden=\"true\"></span>\n              <span ng-class=\"{\'text-warning\': existing.indexOf($item) >= 0 && $selectMultiple.activeMatchIndex !== $index}\">{{$item}}</span>\n            </ui-select-match>\n            <ui-select-choices repeat=\"item in []\"></ui-select-choices>\n          </ui-select>\n          <span class=\"glyphicon form-control-feedback\" ng-class=\"select.names.length > 0 ? (existing.length > 0 ? \'glyphicon-warning-sign\' : \'glyphicon-ok\') : \'glyphicon-remove\'\" aria-hidden=\"true\"></span>\n          <span id=\"selectNamesStatus\" class=\"sr-only\">{{select.names.length > 0 ? \'(success)\' : \'(error)\'}}</span>\n          <span ng-show=\"select.names.length == 0\" class=\"help-block\">At least one container name is required</span>\n          <span ng-show=\"select.names.length != 0 && existing.length > 0\" class=\"help-block\">Some container profiles will be overwritten</span>\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <div class=\"col-sm-offset-2 col-sm-9\">\n          <button class=\"btn btn-primary pull-right\" ng-disabled=\"profiles.cart.length == 0 || select.names.length == 0 || containers.loading || saving()\" ng-click=\"deployProfiles()\"><i class=\"fa fa-cloud-upload\"></i> Deploy</button>\n        </div>\n      </div>\n    </form>\n  </div>\n\n  <h2>Existing containers <i ng-show=\"containers.loading\" class=\"fa fa-refresh fa-spin\"></i> <span class=\"badge\">{{containers.data.length}}</span></h2>\n\n  <div class=\"row\" block-ui=\"blockTable\">\n    <div ng-include=\"\'plugins/profiles/html/containerList.html\'\"></div>\n  </div>\n\n</div>\n");
$templateCache.put("plugins/profiles/html/profileSummary.html","<div class=\"row\">\n  <div class=\"col-md-2\">\n    <a ng-href=\"{{wikiLink(profile.path)}}\">Details...</a>\n    <!-- ideally angular-img-http-src would reuse the same BLOB for the same URLs though\n         it seems it creates a new one each time -->\n    <!-- TODO: use the fileExtensionTypeRegistry service to retrieve the MIME type -->\n    <img class=\"profile-logo\" ng-if=\"profile.iconUrl\" src=\"img/loader.svg\" http-src=\"{{gitRestUrl(profile.iconUrl)}}\" media-type=\"image/svg+xml\" />\n    <img class=\"profile-logo\" ng-if=\"!profile.iconUrl\" src=\"img/fabric8_icon.svg\" />\n  </div>\n\n  <div class=\"col-md-10\">\n    <i ng-hide=\"profile.summary\" class=\"fa fa-refresh fa-spin\"></i>\n    <!-- We need to use compile directive so that the http-src directive from angular-img-http-src applied -->\n    <div class=\"profile-summary\" ng-show=\"profile.summary\" compile=\"profile.summary\"></div>\n  </div>\n</div>");
$templateCache.put("plugins/profiles/html/profiles.html","<div ng-controller=\"Profiles.ProfilesController\">\n\n  <div class=\"row\">\n    <div template-cache-include=\"plugins/kubernetes/html/tabs.html\"></div>\n  </div>\n\n  <button class=\"btn btn-primary pull-right\" ng-disabled=\"loading()\" ng-click=\"refresh()\">\n    <i class=\"fa fa-refresh\" ng-class=\"{\'fa-spin\': loading()}\"></i> Refresh\n  </button>\n\n  <h2 class=\"inline-block\">\n    Profiles\n    <i ng-show=\"loading()\" class=\"fa fa-refresh fa-spin\"></i>\n    <span class=\"badge\" ng-show=\"profiles.length > 0\">{{selectedTags.length > 0 || !isBlank(searchFilter) ? (filteredProfiles = (profiles | selectedTags:\'tags\':selectedTags | filterCollection:searchFilter)).length + \' / \' + profiles.length : (filteredProfiles = profiles).length}}</span>\n    <hawtio-filter ng-model=\"searchFilter\"\n                   css-class=\"search-input\"\n                   placeholder=\"Search...\"\n                   save-as=\"profiles-search-filter\">\n    </hawtio-filter>\n  </h2>\n\n  <div>\n    <div class=\"row-fluid\">\n      <div class=\"col-md-8\">\n        <accordion close-others=\"false\">\n          <accordion-group ng-init=\"profileView = profileViews[profile.id]\" is-open=\"profileView.openOrSingle\" ng-repeat=\"profile in filteredProfiles\">\n            <accordion-heading>\n              <div class=\"pull-left\">\n                <i class=\"glyphicon\" ng-class=\"{\'glyphicon-chevron-down\': profileView.openOrSingle, \'glyphicon-chevron-right\': !profileView.openOrSingle}\"></i>\n              </div>\n              <div class=\"pull-right\">\n                <!-- See https://github.com/angular-ui/bootstrap/issues/3299 -->\n                <hawtio-tag-list tags=\"profile.tags\" selected=\"selectedTags\"\n                                 ng-click=\"$event.stopPropagation();$event.preventDefault();\"></hawtio-tag-list>\n                <input type=\"checkbox\" ng-checked=\"isInGroup(selection, profile)\"\n                       ng-click=\"toggleSelectionFromGroup(selection, profile);$event.stopPropagation();\">\n              </div>\n              <div class=\"ellipsis\">\n                {{profile.id}}\n              </div>\n            </accordion-heading>\n            <div ng-if=\"profileView.openOrSingle\" ng-include=\"\'plugins/profiles/html/profileSummary.html\'\" onload=\"loadSummary(profile)\"></div>\n          </accordion-group>\n        </accordion>\n      </div>\n\n      <div class=\"col-md-4\">\n        <div class=\"panel panel-default\">\n          <div class=\"panel-heading\">\n            <h3 class=\"panel-title\"><i class=\"fa fa-cart-arrow-down\"></i> Selection</h3>\n          </div>\n          <div class=\"panel-body\">\n            <div ng-hide=\"selection.length > 0\">\n              <em class=\"text-muted\">Select profiles...</em>\n            </div>\n            <ul class=\"plain-list\">\n              <li class=\"inline-block\" style=\"max-width: 100%\" ng-repeat=\"profile in selection\">\n                <span type=\"button\" style=\"max-width: 100%\" class=\"btn btn-default btn-xs ellipsis\">\n                  <span type=\"button\" class=\"close\" aria-label=\"Close\" ng-click=\"toggleSelectionFromGroup(selection, profile)\"><span aria-hidden=\"true\">&times;</span>\n                  </span>\n                  <img ng-if=\"profile.iconUrl\" width=\"16px\" height=\"16px\"\n                       class=\"profile-logo\" style=\"max-width: 16px; max-height: 16px\"\n                       src=\"img/loader.svg\"\n                       http-src=\"{{gitRestUrl(profile.iconUrl)}}\" media-type=\"image/svg+xml\" />\n                  <img ng-if=\"!profile.iconUrl\" width=\"16px\" height=\"16px\"\n                       class=\"profile-logo\" style=\"max-width: 16px; max-height: 16px\"\n                       src=\"img/fabric8_icon.svg\" />\n                  <span>\n                    {{profile.id}}\n                  </span>\n                </span>\n                <small><i ng-if=\"!$last\" class=\"fa fa-plus text-muted\"></i></small>\n                <span ng-if=\"$last\" type=\"button\" class=\"glyphicon glyphicon-trash text-muted\" ng-click=\"selection.length = 0\" aria-hidden=\"true\"></span>\n              </li>\n            </ul>\n            <div class=\"pull-right\">\n              <button class=\"btn btn-link\"\n                      type=\"button\"\n                      ng-disabled=\"!selection.length\"\n                      ng-click=\"deployProfiles()\"\n                      title=\"Deploy the selected profile(s) into new container(s)\">\n                Deploy <i class=\"fa fa-cubes\"></i>\n              </button>\n              <button class=\"btn btn-link\"\n                      type=\"button\"\n                      ng-disabled=\"!selection.length\"\n                      ng-click=\"assignProfiles()\"\n                      title=\"Assign the selected profile(s) to existing container(s)\">\n                Assign <i class=\"fa fa-magic\"></i>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"panel panel-default\">\n          <div class=\"panel-heading\">\n            <h3 class=\"panel-title\"><i class=\"fa fa-tags\"></i> Tags</h3>\n          </div>\n          <div class=\"panel-body\">\n            <hawtio-tag-filter class=\"tag-filter\"\n                               tags=\"tags\"\n                               selected=\"selectedTags\"\n                               collection=\"profiles\"\n                               collection-property=\"tags\">\n            </hawtio-tag-filter>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>");
$templateCache.put("plugins/profiles/html/settings.html","<div ng-controller=\"Profiles.SettingsController\">\n\n  <div class=\"row\">\n    <div template-cache-include=\"plugins/kubernetes/html/tabs.html\"></div>\n  </div>\n\n  <button class=\"btn btn-primary pull-right\" ng-disabled=\"loading != 0\" ng-click=\"refresh()\">\n    <i class=\"fa fa-refresh\" ng-class=\"{\'fa-spin\': loading != 0}\"></i> Refresh\n  </button>\n\n  <h2>Settings <i ng-hide=\"loading == 0\" class=\"fa fa-refresh fa-spin\"></i></h2>\n\n  <div>\n    Settings for building containers from Fabric8 profiles repository\n  </div>\n\n  <div class=\"row\">\n    <button class=\"btn btn-primary pull-right\"\n            title=\"Saves changes to profiles settings\"\n            ng-disabled=\"loading != 0\"\n            ng-click=\"save()\">\n        Save Changes\n    </button>\n  </div>\n\n  <div hawtio-form-2=\"config\" entity=\"properties\"></div>\n\n</div>");}]); hawtioPluginLoader.addModule("hawtio-profiles-templates");