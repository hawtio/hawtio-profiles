<div ng-controller="Profiles.ProfilesController">

  <div class="row">
    <div ng-include="'plugins/kubernetes/html/tabs.html'"></div>
  </div>

  <button class="btn btn-primary pull-right" ng-disabled="loading != 0" ng-click="refresh()">Refresh</button>

  <h2>Profiles <i ng-hide="loading == 0" class="fa fa-spinner fa-spin"></i></h2>

  <div>
    <div class="row-fluid">
      <div class="col-md-8">
        <accordion close-others="false">
          <accordion-group is-open="status.open" ng-repeat="profile in profiles | selectedTags:'tags':selectedTags">
            <accordion-heading>
              <i class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
              {{profile.name}}
              <!--See https://github.com/angular-ui/bootstrap/issues/3299 -->
              <hawtio-tag-list ng-click="$event.stopPropagation();$event.preventDefault();" class="pull-right" tags="profile.tags" selected="selectedTags"></hawtio-tag-list>
            </accordion-heading>
            <div ng-if="status.open" ng-include="'plugins/profiles/html/profileSummary.html'" onload="loadSummary(profile)"></div>
          </accordion-group>
        </accordion>
      </div>

      <div class="col-md-4">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Tags</h3>
          </div>
          <div class="panel-body">
            <hawtio-tag-filter tags="tags"
                               selected="selectedTags"
                               collection="profiles"
                               collection-property="tags">
            </hawtio-tag-filter>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>